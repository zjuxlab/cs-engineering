"use strict";(self.webpackChunkcs_engineering=self.webpackChunkcs_engineering||[]).push([[1689],{15680:(e,a,n)=>{n.d(a,{xA:()=>u,yg:()=>y});var t=n(96540);function l(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){l(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var g=t.createContext({}),o=function(e){var a=t.useContext(g),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},u=function(e){var a=o(e.components);return t.createElement(g.Provider,{value:a},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,l=e.mdxType,i=e.originalType,g=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=o(n),d=l,y=m["".concat(g,".").concat(d)]||m[d]||p[d]||i;return n?t.createElement(y,r(r({ref:a},u),{},{components:n})):t.createElement(y,r({ref:a},u))}));function y(e,a){var n=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var g in a)hasOwnProperty.call(a,g)&&(s[g]=a[g]);s.originalType=e,s[m]="string"==typeof e?e:l,r[1]=s;for(var o=2;o<i;o++)r[o]=n[o];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},91392:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>g,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var t=n(58168),l=(n(96540),n(15680));const i={title:"Redis",slug:"Redis",sidebar_position:1},r="Redis",s={unversionedId:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis",id:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis",title:"Redis",description:"Author\uff1aPTA,\u590f\u5f66",source:"@site/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis.md",sourceDirName:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis",slug:"/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/Redis.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Redis",slug:"Redis",sidebar_position:1},sidebar:"sidebar",previous:{title:"Go-BSON",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/MongoDB/GoBSON/Go-BSON"},next:{title:"\u6570\u636e\u64cd\u4f5c",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u6570\u636e\u5e93/\u6570\u636e\u5e93\u5206\u7c7b\u9009\u578b/NoSQL/Redis/\u6570\u636e\u64cd\u4f5c/\u6570\u636e\u64cd\u4f5c"}},g={},o=[{value:"Core",id:"core",level:2},{value:"Strings",id:"strings",level:3},{value:"eg",id:"eg",level:4},{value:"Basic Commands",id:"basic-commands",level:4},{value:"eg",id:"eg-1",level:4},{value:"Basic Commands",id:"basic-commands-1",level:4},{value:"eg",id:"eg-2",level:4},{value:"Basic Commands",id:"basic-commands-2",level:4},{value:"Hashes",id:"hashes",level:3},{value:"eg",id:"eg-3",level:4},{value:"Basic Commands",id:"basic-commands-3",level:4},{value:"Sorted Sets",id:"sorted-sets",level:3},{value:"eg",id:"eg-4",level:4},{value:"Basic Commands",id:"basic-commands-4",level:4},{value:"Streams",id:"streams",level:3},{value:"eg",id:"eg-5",level:4},{value:"Basic Commands",id:"basic-commands-5",level:5},{value:"Geospatial Indexes",id:"geospatial-indexes",level:3},{value:"eg",id:"eg-6",level:4},{value:"Basic Commands",id:"basic-commands-6",level:4},{value:"Bitmaps",id:"bitmaps",level:3},{value:"eg",id:"eg-7",level:4},{value:"Basic Commands",id:"basic-commands-7",level:4},{value:"Bitfields",id:"bitfields",level:3},{value:"eg",id:"eg-8",level:4},{value:"Basic Commands",id:"basic-commands-8",level:4},{value:"HyperLogLog",id:"hyperloglog",level:3},{value:"eg",id:"eg-9",level:4},{value:"Basic Commands",id:"basic-commands-9",level:4}],u={toc:o},m="wrapper";function p(e){let{components:a,...n}=e;return(0,l.yg)(m,(0,t.A)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"redis"},"Redis"),(0,l.yg)("p",null,"Author\uff1aPTA,\u590f\u5f66"),(0,l.yg)("h1",{id:"\u57fa\u672c\u4ecb\u7ecd"},"\u57fa\u672c\u4ecb\u7ecd"),(0,l.yg)("b",null,"RE"),"mote ",(0,l.yg)("b",null,"DI"),"ctionary ",(0,l.yg)("b",null,"S"),"erver(Redis) \u662f\u4e00\u4e2a\u7531 Salvatore Sanfilippo \u5199\u7684 key-value \u5b58\u50a8\u7cfb\u7edf\uff0c\u662f\u8de8\u5e73\u53f0\u7684\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002",(0,l.yg)("p",null,"Redis \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4f7f\u7528 ANSI C \u8bed\u8a00\u7f16\u5199\u3001\u9075\u5b88 BSD \u534f\u8bae\u3001\u652f\u6301\u7f51\u7edc\u3001\u53ef\u57fa\u4e8e\u5185\u5b58\u3001\u5206\u5e03\u5f0f\u3001\u53ef\u9009\u6301\u4e45\u6027\u7684\u952e\u503c\u5bf9(Key-Value)\u5b58\u50a8\u6570\u636e\u5e93\uff0c\u5e76\u63d0\u4f9b\u591a\u79cd\u8bed\u8a00\u7684 API\u3002"),(0,l.yg)("p",null,"Redis \u901a\u5e38\u88ab\u79f0\u4e3a\u6570\u636e\u7ed3\u6784\u670d\u52a1\u5668\uff0c\u56e0\u4e3a\u503c\uff08value\uff09\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32(String)\u3001\u54c8\u5e0c(Hash)\u3001\u5217\u8868(list)\u3001\u96c6\u5408(sets)\u548c\u6709\u5e8f\u96c6\u5408(sorted sets)\u7b49\u7c7b\u578b\u3002"),(0,l.yg)("p",null,"mentor "),(0,l.yg)("h1",{id:"brief-intro"},"Brief Intro"),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"Redis is an open source, in-memory data structure store used as a database, cache, message broker, and streaming engine.\nRedis is written in ANSI C and works on most POSIX systems like Linux, ",(0,l.yg)("em",null,"BSD, and Mac OS X, without external dependencies. Linux and OS X are the two operating systems where Redis is developed and tested the most, and we *"),"recommend using Linux for deployment**. Redis may work in Solaris-derived systems like SmartOS, but support is ",(0,l.yg)("em",null,"best effort"),". There is no official support for Windows builds.\nKey-value storage system.")),(0,l.yg)("h1",{id:"prepare"},"Prepare"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"You can follow the ",(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2Fdocs%2Fgetting-started%2F%23install-redis&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"instructions")," to install Redis.")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Once your Redis is running(",(0,l.yg)("inlineCode",{parentName:"p"},"redis-server"),"), you can use ",(0,l.yg)("inlineCode",{parentName:"p"},"redis-cli")," to connect it."),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Use ",(0,l.yg)("inlineCode",{parentName:"li"},"ping")," to check."))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Use ",(0,l.yg)("inlineCode",{parentName:"p"},"redis-cli <command>")," to run one command, or just type ",(0,l.yg)("inlineCode",{parentName:"p"},"redis-cli")," to run in interaction mode."))),(0,l.yg)("h1",{id:"data-types"},"Data Types"),(0,l.yg)("h2",{id:"core"},"Core"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"You can search commands ",(0,l.yg)("a",{parentName:"li",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2Fcommands%2F%3Fgroup%3Dstring&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"here"),".")),(0,l.yg)("h3",{id:"strings"},"Strings"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Text, serialized objects, binary arrays."),(0,l.yg)("li",{parentName:"ul"},"The most basic Redis data type.")),(0,l.yg)("h4",{id:"eg"},"eg"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> SET user:1 salvatore\nOK\n> GET user:1\n"salvatore"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Serialized JSON & set it to expire 100 seconds from now")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> SET ticket:27 \"\\\"{'username': 'priya', 'ticket_id': 321}\\\"\" EX 100\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Increment a counter")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> INCR views:page:2\n(integer) 1\n> INCRBY views:page:2 10\n(integer) 11\n")),(0,l.yg)("h4",{id:"basic-commands"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Getting and setting Strings"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SET")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SETNX")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"GET")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"MGET")))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Managing counters"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"INCRBY")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"INCRBYFLOAT")))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Bitwise operations"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"See ",(0,l.yg)("a",{parentName:"li",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2Fdocs%2Fdata-types%2Fbitmaps%2F&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"this")," for details.",(0,l.yg)("h3",{parentName:"li",id:"lists"},"Lists")))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Linked lists of string values."))),(0,l.yg)("h4",{id:"eg-1"},"eg"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> LPUSH work:queue:ids 101\n(integer) 1\n> LPUSH work:queue:ids 237\n(integer) 2\n> RPOP work:queue:ids\n"101"\n> RPOP work:queue:ids\n"237"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Stack")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> LPUSH work:queue:ids 101\n(integer) 1\n> LPUSH work:queue:ids 237\n(integer) 2\n> LPOP work:queue:ids\n"237"\n> LPOP work:queue:ids\n"101"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Check the length of a list")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> LLEN work:queue:ids\n(integer) 0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Atomically pop an element from one list and push to another")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> LPUSH board:todo:ids 101\n(integer) 1\n> LPUSH board:todo:ids 273\n(integer) 2\n> LMOVE board:todo:ids board:in-progress:ids LEFT LEFT\n"273"\n> LRANGE board:todo:ids 0 -1\n1) "101"\n> LRANGE board:in-progress:ids 0 -1\n1) "273"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"To create a capped list that never grows beyond 100 elements, you can call ",(0,l.yg)("inlineCode",{parentName:"li"},"LTRIM")," after each call to ",(0,l.yg)("inlineCode",{parentName:"li"},"LPUSH"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> LPUSH notifications:user:1 "You\'ve got mail!"\n(integer) 1\n> LTRIM notifications:user:1 0 99\nOK\n> LPUSH notifications:user:1 "Your package will be delivered at 12:01 today."\n(integer) 2\n> LTRIM notifications:user:1 0 99\nOK\n')),(0,l.yg)("h4",{id:"basic-commands-1"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Blocking commands"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"BLPOP")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"BLMOVE"),(0,l.yg)("h3",{parentName:"li",id:"sets"},"Sets")))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Unordered collection of unique strings."))),(0,l.yg)("h4",{id:"eg-2"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Store the set of favorited book IDs for users 123 and 456:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> SADD user:123:favorites 347 \n(integer) 1\n> SADD user:123:favorites 561 \n(integer) 1\n> SADD user:123:favorites 742 \n(integer) 1 \n> SADD user:456:favorites 561 \n(integer) 1\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Check whether user 123 likes books 742 and 299")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> SISMEMBER user:123:favorites 742\n(integer) 1 \n> SISMEMBER user:123:favorites 299\n(integer) 0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Do user 123 and 456 have any favorite books in common?")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> SINTER user:123:favorites user:456:favorites \n1) "561"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"How many books has user 123 favorited?")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> SCARD user:123:favorites \n(integer) 3\n")),(0,l.yg)("h4",{id:"basic-commands-2"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SADD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SREM")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SISMEMBER")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SINTER")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SCARD"))),(0,l.yg)("h3",{id:"hashes"},"Hashes"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Redis hashes are record types structured as collections of field-value pairs.")),(0,l.yg)("h4",{id:"eg-3"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Represent a basic user profile as a hash:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> HSET user:123 username martina firstName Martina lastName Elisa country GB\n(integer) 4\n> HGET user:123 username\n"martina"\n> HGETALL user:123\n1) "username"\n2) "martina"\n3) "firstName"\n4) "Martina"\n5) "lastName"\n6) "Elisa"\n7) "country"\n8) "GB"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Store counters for the number of times device 777 had pinged the server, issued a request, or sent an error:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> HINCRBY device:777:stats pings 1\n(integer) 1\n> HINCRBY device:777:stats pings 1\n(integer) 2\n> HINCRBY device:777:stats pings 1\n(integer) 3\n> HINCRBY device:777:stats errors 1\n(integer) 1\n> HINCRBY device:777:stats requests 1\n(integer) 1\n> HGET device:777:stats pings\n"3"\n> HMGET device:777:stats requests errors\n1) "1"\n2) "1"\n')),(0,l.yg)("h4",{id:"basic-commands-3"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"HSET")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"HGET")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"HMGET")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"HINCRBY"))),(0,l.yg)("h3",{id:"sorted-sets"},"Sorted Sets"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"A Redis sorted set is a collection of unique strings (members) ordered by an associated score.")),(0,l.yg)("h4",{id:"eg-4"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Update a real-time leaderboard as players' scores change:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> ZADD leaderboard:455 100 user:1\n(integer) 1\n> ZADD leaderboard:455 75 user:2\n(integer) 1\n> ZADD leaderboard:455 101 user:3\n(integer) 1\n> ZADD leaderboard:455 15 user:4\n(integer) 1\n> ZADD leaderboard:455 275 user:2\n(integer) 0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Notice that ",(0,l.yg)("inlineCode",{parentName:"li"},"user:2"),"'s score is updated in the final ",(0,l.yg)("inlineCode",{parentName:"li"},"ZADD")," call."),(0,l.yg)("li",{parentName:"ul"},"Get the top 3 players' scores:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> ZRANGE leaderboard:455 0 4 REV WITHSCORES\n1) "user:2"\n2) "275"\n3) "user:3"\n4) "101"\n5) "user:1"\n6) "100"\n7) "user:4"\n8) "15"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"What's the rank of user 2?")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> ZREVRANK leaderboard:455 user:2\n(integer) 0\n")),(0,l.yg)("h4",{id:"basic-commands-4"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ZADD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ZRANGE")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ZRANK")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ZREVRANK"))),(0,l.yg)("h3",{id:"streams"},"Streams"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"A Redis stream is a data structure that acts like an append-only log."),(0,l.yg)("li",{parentName:"ul"},"Redis generates a unique ID for each stream entry. You can use these IDs to retrieve their associated entries later or to read and process all subsequent entries in the stream."),(0,l.yg)("li",{parentName:"ul"},"Redis streams support several trimming strategies (to prevent streams from growing unbounded) and more than one consumption strategy (see ",(0,l.yg)("inlineCode",{parentName:"li"},"XREAD"),", ",(0,l.yg)("inlineCode",{parentName:"li"},"XREADGROUP"),", and ",(0,l.yg)("inlineCode",{parentName:"li"},"XRANGE"),").")),(0,l.yg)("h4",{id:"eg-5"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Add several temperature readings to a stream.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> XADD temperatures:us-ny:10007 * temp_f 87.2 pressure 29.69 humidity 46\n"1658354918398-0"\n> XADD temperatures:us-ny:10007 * temp_f 83.1 pressure 29.21 humidity 46.5\n"1658354934941-0"\n> XADD temperatures:us-ny:10007 * temp_f 81.9 pressure 28.37 humidity 43.7\n"1658354957524-0"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Read the first two stream entries starting at ID 1658354934941-0.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> XRANGE temperatures:us-ny:10007 1658354934941-0 + COUNT 2\n1) 1) "1658354934941-0"\n 2) 1) "temp_f"\n    2) "83.1"\n    3) "pressure"\n    4) "29.21"\n    5) "humidity"\n    6) "46.5"\n2) 1) "1658354957524-0"\n 2) 1) "temp_f"\n    2) "81.9"\n    3) "pressure"\n    4) "28.37"\n    5) "humidity"\n    6) "43.7"\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Read up to 100 new stream entries, starting at the end of the stream, and block for up to 300 ms if no entries are being written.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> XREAD COUNT 100 BLOCK 300 STREAMS tempertures:us-ny:10007 $\n(nil)\n")),(0,l.yg)("h5",{id:"basic-commands-5"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"XADD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"XREAD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"XRANGE")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"XLEN"))),(0,l.yg)("p",null,(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2Fdocs%2Fdata-types%2Fstreams-tutorial%2F&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"tutorial")),(0,l.yg)("h3",{id:"geospatial-indexes"},"Geospatial Indexes"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Redis geospatial indexes let you store coordinates and search for them.")),(0,l.yg)("h4",{id:"eg-6"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Add several locations to a geospatial index:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> GEOADD locations:ca -122.27652 37.805186 station:1\n(integer) 1\n> GEOADD locations:ca -122.2674626 37.8062344 station:2\n(integer) 1\n> GEOADD locations:ca -122.2469854 37.8104049 station:3\n(integer) 1\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Find all locations within a 1 kilometer radius of a given location, and return the distance to each location.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},'> GEOSEARCH locations:ca FROMLONLAT -122.2612767 37.7936847 BYRADIUS 5 km WITHDIST\n1) 1) "station:1"\n 2) "1.8523"\n2) 1) "station:2"\n 2) "1.4979"\n3) 1) "station:3"\n 2) "2.2441"\n')),(0,l.yg)("h4",{id:"basic-commands-6"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"GEOADD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"GEOSEARCH"))),(0,l.yg)("h3",{id:"bitmaps"},"Bitmaps"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Redis bitmaps are an extension of the string data type that lets you treat a string like a bit vector. You can also perform bitwise operations on one or more strings.")),(0,l.yg)("h4",{id:"eg-7"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"You can represent this scenario using a bitmap whose key references the current hour."),(0,l.yg)("li",{parentName:"ul"},"Sensor 123 pings the server on January 1, 2024 within the 00:00 hour.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> SETBIT pings:2024-01-01-00:00 123 1 \n(integer) 0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Did sensor 123 ping the server on January 1, 2024 within the 00:00 hour?")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> GETBIT pings:2024-01-01-00:00 123\n1\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"What about server 456?")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> GETBIT pings:2024-01-01-00:00 456\n0\n")),(0,l.yg)("h4",{id:"basic-commands-7"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"SETBIT")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"GETBIT")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"BITOP"))),(0,l.yg)("h3",{id:"bitfields"},"Bitfields"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Redis bitfields let you perform bitwise arithmetic on integer field of arbitrary bit length. For example, you an operate on anything from unsigned, 32-bit integers to signed 5-bit integers."),(0,l.yg)("li",{parentName:"ul"},"These values are stored using binary-encoded Redis strings. Bitfields support atomic read, write and increment operations, making them a good choice for managing counters and similar numerical values.")),(0,l.yg)("h4",{id:"eg-8"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"You can represent these counters with one bitfield per player."),(0,l.yg)("li",{parentName:"ul"},"New players start the tutorial with 1000 gold (counter in offset 0).")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> BITFIELD player:1:stats SET u32 #0 1000\n1) (integer) 0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},'After killing the goblin holding the prince captive, add the 50 gold earned and increment the "slain" counter (offset 1).')),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> BITFIELD player:1:stats INCRBY u32 #0 50 INCRBY u32 #1 1\n1) (integer) 1050\n2) (integer) 1\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Pay the blacksmith 999 gold to buy a legendary rusty dagger.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> BITFIELD player:1:stats INCRBY u32 #0 -999\n1) (integer) 51\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Read the player's stats:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> BITFIELD player:1:stats GET u32 #0 GET u32 #1\n1) (integer) 51\n2) (integer) 1\n")),(0,l.yg)("h4",{id:"basic-commands-8"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"BITFIELD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"BIITFIELD_RO"))),(0,l.yg)("h3",{id:"hyperloglog"},"HyperLogLog"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"HyperLogLog is a data structure that estimates the cardinality of a set. As a probabilistic data structure, HyperLogLog trades perfect accuracy for efficient space utilization.")),(0,l.yg)("h4",{id:"eg-9"},"eg"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Add some items to the HyperLogLog.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> PFADD members 123\n(integer) 1\n> PFADD members 500\n(integer) 1\n> PFADD members 12\n(integer) 1\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Estimate the number of members in the set:")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sql"},"> PFCOUNT members\n(integer) 3\n")),(0,l.yg)("h4",{id:"basic-commands-9"},"Basic Commands"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"PFADD")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"PFCOUNT")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"PFMERGE"))),(0,l.yg)("h1",{id:"recommended-articles"},"Recommended Articles"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2F&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://redis.io/")),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fredis.io%2Fdocs%2F&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://redis.io/docs/")))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fwww.cnblogs.com%2Fpowertoolsteam%2Fp%2Fredis.html&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"Redis\u662f\u4ec0\u4e48\uff1f\u770b\u8fd9\u4e00\u7bc7\u5c31\u591f\u4e86"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fwww.runoob.com%2Fredis%2Fredis-intro.html&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://www.runoob.com/redis/redis-intro.html"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F62667184&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://zhuanlan.zhihu.com/p/62667184"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=http%3A%2F%2Fc.biancheng.net%2Fredis%2Fwhat-is-redis.html&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"http://c.biancheng.net/redis/what-is-redis.html"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fwww.huaweicloud.com%2Fzhishi%2Fedits-15756133.html&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://www.huaweicloud.com/zhishi/edits-15756133.html"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("a",{parentName:"p",href:"https://security.feishu.cn/link/safety?target=https%3A%2F%2Fwww.runoob.com%2Fredis%2Fredis-intro.html&scene=ccm&logParams=%7B%22location%22%3A%22ccm_drive%22%7D&lang=zh-CN"},"https://www.runoob.com/redis/redis-intro.html")))),(0,l.yg)("h1",{id:"\u601d\u8003\u9898"},"\u601d\u8003\u9898"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Redis\u6709\u54ea\u4e9b\u5371\u9669\u6307\u4ee4\uff1f\u5982\u4f55\u5bf9\u5176\u4f7f\u7528\u8fdb\u884c\u63a7\u5236"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"\u5220\u5e93\uff1f"),(0,l.yg)("li",{parentName:"ul"},"Root\u6cc4\u9732\uff1f"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Redis\u662f\u5355\u7ebf\u7a0b\u8fd8\u662f\u591a\u7ebf\u7a0b\u8fd0\u884c\u7684\uff1f\u5982\u4f55\u4fdd\u8bc1\u5e76\u53d1\u91cf\u7684\uff1f")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"\u5982\u679c\u5728\u670d\u52a1\u5668\u4e0a\u6709\u591a\u4e2a\u5e94\u7528\u9700\u8981\u7f13\u5b58\u952e\u503c\u5bf9\uff0c\u8be5\u516c\u7528\u8fd8\u662f\u5206\u522b\u5f00Redis\u5b9e\u4f8b\uff1f")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Redis\u652f\u6301\u4e8b\u52a1\u5417\uff0c\u652f\u6301\u7684\u600e\u4e48\u6837\uff1f"))))}p.isMDXComponent=!0}}]);