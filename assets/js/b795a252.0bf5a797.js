"use strict";(self.webpackChunkcs_engineering=self.webpackChunkcs_engineering||[]).push([[1672],{15680:(e,n,a)=>{a.d(n,{xA:()=>s,yg:()=>d});var t=a(96540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=t.createContext({}),u=function(e){var n=t.useContext(c),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},s=function(e){var n=u(e.components);return t.createElement(c.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),p=u(a),g=r,d=p["".concat(c,".").concat(g)]||p[g]||m[g]||i;return a?t.createElement(d,l(l({ref:n},s),{},{components:a})):t.createElement(d,l({ref:n},s))}));function d(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=g;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o[p]="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=a[u];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},73258:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var t=a(58168),r=(a(96540),a(15680));const i={title:"CMake",slug:"CMake",sidebar_position:1},l="CMake",o={unversionedId:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake",id:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake",title:"CMake",description:"Author\uff1a\u9f99\u6bc5\u8c6a",source:"@site/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake.md",sourceDirName:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake",slug:"/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake",permalink:"/cs-engineering/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/CMake/CMake.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"CMake",slug:"CMake",sidebar_position:1},sidebar:"sidebar",previous:{title:"Makefile",permalink:"/cs-engineering/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/Makefile/Makefile"},next:{title:"\u73b0\u4ee3\u811a\u672c\uff1ascons\uff0cxmake",permalink:"/cs-engineering/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u57fa\u7840\u5165\u95e8/\u6784\u5efa\u5de5\u5177/\u73b0\u4ee3\u811a\u672csconsxmake/\u73b0\u4ee3\u811a\u672c\uff1ascons\uff0cxmake"}},c={},u=[{value:"Cmake\u5b8f",id:"cmake\u5b8f",level:2},{value:"configure",id:"configure",level:3},{value:"option",id:"option",level:3},{value:"list",id:"list",level:3},{value:"\u539f\u59cb\u65b9\u6cd5",id:"\u539f\u59cb\u65b9\u6cd5",level:2},{value:"interface",id:"interface",level:2}],s={toc:u},p="wrapper";function m(e){let{components:n,...a}=e;return(0,r.yg)(p,(0,t.A)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"cmake"},"CMake"),(0,r.yg)("p",null,"Author\uff1a\u9f99\u6bc5\u8c6a"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://cmake.org/cmake/help/latest/guide/tutorial/index.html"},"https://cmake.org/cmake/help/latest/guide/tutorial/index.html")),(0,r.yg)("h1",{id:"cmakeliststxt-\u57fa\u672c\u683c\u5f0f"},"CMakeLists.txt \u57fa\u672c\u683c\u5f0f"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},"cmake_minimum_required(VERSION 3.9)\nproject(answer VERSION 1.0)\n\nadd_executable(answer main.cpp answer.cpp)\n")),(0,r.yg)("h1",{id:"\u751f\u6210--\u6784\u5efa--\u8fd0\u884c\u547d\u4ee4"},"\u751f\u6210 & \u6784\u5efa & \u8fd0\u884c\u547d\u4ee4"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u751f\u6210\u6784\u5efa\u76ee\u5f55",(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"- `cmake -B build      # \u751f\u6210\u6784\u5efa\u76ee\u5f55\uff0c-B \u6307\u5b9a\u751f\u6210\u7684\u6784\u5efa\u7cfb\u7edf\u4ee3\u7801\u653e\u5728 build \u76ee\u5f55 `         ` ccmake -B build   #ccmake\u548ccmake\u547d\u4ee4\u7528\u6cd5\u4e00\u6837\uff0c\u4f46\u662fccmake\u4f1a\u6709\u547d\u4ee4\u884c\u4e0b\u7684UI`\n-         ```bash\n")),"mkdir build_dir   # \u81ea\u5df1\u624b\u52a8\u521b\u5efa\u6784\u5efa\u76ee\u5f55\ncd build_dir\ncmake ..")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"\n> \u8fd9\u4e00\u6b65\u662f\u5c06CmakeList.txt\u7ffb\u8bd1\u4e3amakefile\uff0c\u7f16\u8bd1\u540e\u7684\u4e1c\u897f\u653e\u7f6e\u5728\u6784\u5efa\u76ee\u5f55\u4e0b\n\n- build\n    - `cmake --build build_dir # \u6267\u884c\u6784\u5efa `    \u6216       `make`\n    > cmake \u547d\u4ee4\u8fd0\u884c\u76ee\u5f55\u968f\u610f\uff0c\u6545\u9700\u8981\u6307\u5b9abuild_dir\n> make\u547d\u4ee4\u8fd0\u884c\u76ee\u5f55\u4e3amakefile\u6240\u5728\u76ee\u5f55\n\n- \u8fd0\u884c\n\n`./build/answer      # \u8fd0\u884c answer \u7a0b\u5e8f`\n\n# \u57fa\u7840\u9879\u76ee\u914d\u7f6e\n\n## \u6307\u5b9a C++ \u6807\u51c6\n\n```cmake\nset(CMAKE_CXX_STANDARD 11)\nset(CMAKE_CXX_STANDARD True)\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"set()\u4e3acmake\u51fd\u6570,\u7528\u4e8e\u8bbe\u7f6e\u503c\uff0cCMAKE_CXX_STANDARD\u548cCMAKE_CXX_STANDARD \u662fCmake\u5185\u7f6e\u7684\u53d8\u91cf")),(0,r.yg)("h2",{id:"cmake\u5b8f"},"Cmake\u5b8f"),(0,r.yg)("h3",{id:"configure"},"configure"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},"configure_file(TutorialConfig.h.in TutorialConfig.h)\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u5728TutorialConfig.h.in\u4e2d\u53ef\u4ee5\u4f7f\u7528Cmake\u5185\u7f6e\u7684\u5b8f\u53d8\u91cf\uff0c\u5982",(0,r.yg)("inlineCode",{parentName:"p"},"@Tutorial_VERSION_MAJOR@")," ",(0,r.yg)("inlineCode",{parentName:"p"},"@Tutorial_VERSION_MINOR@")," \u3002\nconfigure_file(x y) \u51fd\u6570\u5c06x\u6587\u4ef6\u4e2d\u7684Cmake\u5b8f\u66ff\u6362\u6389\uff0c\u5f97\u5230y\u6587\u4ef6\uff0c\u4fdd\u5b58\u5728build\u76ee\u5f55\u4e0b")),(0,r.yg)("h3",{id:"option"},"option"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},'option(USE_MYMATH "Use tutorial provided math implementation" ON) #\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\nif(USE_MYMATH)\n  add_subdirectory(MathFunctions)\n  list(APPEND EXTRA_LIBS MathFunctions)\n  list(APPEND EXTRA_INCLUDES "${PROJECT_SOURCE_DIR}/MathFunctions")\nendif()\n')),(0,r.yg)("p",null,"\u5728C/C++\u6e90\u7801\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528option\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},'#cmakedefine USE_MYMATH   //use cmakedefine to define USE_MYMATH\n\n#ifdef USE_MYMATH\n    #include "MathFunctions.h"\n#endif\n')),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("inlineCode",{parentName:"p"},"cmake ../ _DUSE_MYMATH=OFF ")," \u5728\u751f\u6210\u6784\u5efa\u76ee\u5f55\u65f6\u53ef\u4ee5\u6307\u5b9a\u5b8f\u5b9a\u4e49 ")),(0,r.yg)("h3",{id:"list"},"list"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},"list(APPEND EXTRA_LIBS MathFunctions)  //\u5b9a\u4e49\u4e86EXTRA_LIBS\uff0c\u5728CmakeList.txt\u4e2d\u53ef\u4ee5\u7528${EXTRA_LIBS}\u6765\u5f15\u7528\u53d8\u91cf\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u4e00\u4e9b\u9884\u5b9a\u4e49\u53d8\u91cf\uff1a${PROJECT_BINARY_DIR}  ${PROJECT_SOURCE_DIR}")),(0,r.yg)("h1",{id:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5e93"},"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5e93"),(0,r.yg)("h2",{id:"\u539f\u59cb\u65b9\u6cd5"},"\u539f\u59cb\u65b9\u6cd5"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u5728\u5e93\u51fd\u6570\u6240\u5728\u76ee\u5f55\u6dfb\u52a0CmakeList.txt")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},"add_library(MathFunctions mysqrt.cxx)  #add_library(\u5e93\u540d \u5e93\u6e90\u4ee3\u7801\u6587\u4ef6)\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u5728\u4e3b\u76ee\u5f55(main\u51fd\u6570\u6240\u5728\u76ee\u5f55)\uff0c\u6dfb\u52a0\u5b50\u76ee\u5f55\u3001\u94fe\u63a5\u5e93\u3001\u5934\u6587\u4ef6\u5305\u542b\u76ee\u5f55")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},'add_subdirectory( \u5e93\u51fd\u6570\u6e90\u7801.c\u6240\u5728\u76ee\u5f55 )  #\u4f7f\u5e93\u51fd\u6570\u7f16\u8bd1\u6784\u5efa\ntarget_link_libraries(Tutorial.exe PUBLIC \u5e93\u5934\u6587\u4ef6\u76ee\u5f55)  #\u5c06\u65b0\u5e93\u76ee\u6807\u94fe\u63a5\u5230\u53ef\u6267\u884c\u76ee\u6807\ntarget_include_directories(Tutorial.exe PUBLIC                          \n                                    "${PROJECT_BINARY_DIR}"\n                                    "${PROJECT_SOURCE_DIR}/MathFunctions")  #\u6dfb\u52a0\u5e93\u5934\u6587\u4ef6\u76ee\u5f55\n')),(0,r.yg)("h2",{id:"interface"},"interface"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u5728\u5e93\u51fd\u6570\u6240\u5728\u76ee\u5f55\u6dfb\u52a0CmakeList.txt")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cmake"},"add_library(MathFunctions mysqrt.cxx)\ntarget_include_directories(MathFunctions\n          INTERFACE ${CMAKE_CURRENT_SOURCE_DIR}\n          )\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u4e3b\u76ee\u5f55\u5c31\u53ef\u4ee5\u7701\u7565",(0,r.yg)("inlineCode",{parentName:"li"},'target_include_directories(Tutorial.exe PUBLIC    "${PROJECT_SOURCE_DIR}/MathFunctions")  #\u6dfb\u52a0\u5e93\u5934\u6587\u4ef6\u76ee\u5f55'))),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"target_link_libraries(Tutorial.exe PUBLIC \u5e93\u5934\u6587\u4ef6\u76ee\u5f55)")," \u4e0d\u80fd\u7701\u7565"))}m.isMDXComponent=!0}}]);