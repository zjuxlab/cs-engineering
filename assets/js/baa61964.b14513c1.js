"use strict";(self.webpackChunkcs_engineering=self.webpackChunkcs_engineering||[]).push([[8557],{7617:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var r=t(58168),a=(t(96540),t(15680));const i={title:"\u4e00\u79cdRust web\u6280\u672f\u6808",slug:"\u4e00\u79cdRust web\u6280\u672f\u6808",sidebar_position:2},l="\u4e00\u79cdRust web\u6280\u672f\u6808",s={unversionedId:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRustweb\u6280\u672f\u6808",id:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRustweb\u6280\u672f\u6808",title:"\u4e00\u79cdRust web\u6280\u672f\u6808",description:"Author\uff1a\u5f20\u7acb\u51ac",source:"@site/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRustweb\u6280\u672f\u6808.md",sourceDirName:"\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808",slug:"/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRust web\u6280\u672f\u6808",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRust web\u6280\u672f\u6808",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u4e00\u79cdRustweb\u6280\u672f\u6808/\u4e00\u79cdRustweb\u6280\u672f\u6808.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"\u4e00\u79cdRust web\u6280\u672f\u6808",slug:"\u4e00\u79cdRust web\u6280\u672f\u6808",sidebar_position:2},sidebar:"sidebar",previous:{title:"\u8fdb\u9636\uff1a\u7406\u89e3\u5728\u7c7b\u578b\u7cfb\u7edf\u4e2d\u7684\u751f\u547d\u5468\u671f",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/Rust/\u8fdb\u9636\u7406\u89e3\u5728\u7c7b\u578b\u7cfb\u7edf\u4e2d\u7684\u751f\u547d\u5468\u671f/\u8fdb\u9636\uff1a\u7406\u89e3\u5728\u7c7b\u578b\u7cfb\u7edf\u4e2d\u7684\u751f\u547d\u5468\u671f"},next:{title:"NodeJS",permalink:"/cs-engineering/\u8f6f\u4ef6\u5de5\u7a0b\u6280\u80fd\u6811/\u540e\u7aef\u6280\u672f/\u5f00\u53d1\u8bed\u8a00/NodeJS/NodeJS"}},o={},u=[{value:"tiny-url",id:"tiny-url",level:2},{value:"0.\u4f7f\u7528cargo\u521b\u5efarust\u9879\u76ee",id:"0\u4f7f\u7528cargo\u521b\u5efarust\u9879\u76ee",level:3},{value:"1.\u4fee\u6539main.rs\u6587\u4ef6",id:"1\u4fee\u6539mainrs\u6587\u4ef6",level:3},{value:"rust\u4e0ego\u4e0d\u540c\u7684\u4e00\u4e9b\u8bed\u6cd5",id:"rust\u4e0ego\u4e0d\u540c\u7684\u4e00\u4e9b\u8bed\u6cd5",level:4},{value:"2.\u4fee\u6539handler\u51fd\u6570\uff0c\u589e\u52a0\u4e1a\u52a1\u903b\u8f91",id:"2\u4fee\u6539handler\u51fd\u6570\u589e\u52a0\u4e1a\u52a1\u903b\u8f91",level:3},{value:"3.\u589e\u52a0model\u7ed3\u6784\u4f53",id:"3\u589e\u52a0model\u7ed3\u6784\u4f53",level:3},{value:"3.\u5c01\u88c5\u7edf\u4e00\u7684\u8fd4\u56de\u503c\u548c<code>serde::Serialize</code>",id:"3\u5c01\u88c5\u7edf\u4e00\u7684\u8fd4\u56de\u503c\u548cserdeserialize",level:3},{value:"4.\u8fde\u63a5\u6570\u636e\u5e93",id:"4\u8fde\u63a5\u6570\u636e\u5e93",level:3},{value:"5.\u914d\u7f6e\u7684\u9694\u79bb",id:"5\u914d\u7f6e\u7684\u9694\u79bb",level:3},{value:"6.\u6587\u4ef6\u4e0a\u4f20",id:"6\u6587\u4ef6\u4e0a\u4f20",level:3},{value:"7.\u767b\u5f55\u7684\u5b9e\u73b0",id:"7\u767b\u5f55\u7684\u5b9e\u73b0",level:3}],p={toc:u},g="wrapper";function c(e){let{components:n,...t}=e;return(0,a.yg)(g,(0,r.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"\u4e00\u79cdrust-web\u6280\u672f\u6808"},"\u4e00\u79cdRust web\u6280\u672f\u6808"),(0,a.yg)("p",null,"Author\uff1a\u5f20\u7acb\u51ac"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\u7b14\u8005\u6ce8\uff1a\u7531\u4e8e\u8981\u4e0arust\u77ed\u5b66\u671f\uff0c\u770b\u8bfe\u7a0b\u8981\u6c42\u8981\u572810\u5929\u5185\uff0c\u4ecerust\u57fa\u7840\u8bed\u6cd5\u5230rust\u306eweb&\u5fae\u670d\u52a1\u5f00\u53d1\uff0c\u5bf9\u4e8e\u4ee5\u96be\u5b66\u96be\u7528\u95fb\u540d\u7684rust\u6765\u8bf4\u53ef\u80fd\u591a\u5c11\u6709\u70b9\u79bb\u8c31\uff0c\u4e8e\u662f\u5728\u5047\u671f\u5077\u8dd1\u4e00\u4e0b\uff0c\u5728\u5927\u6982\u770b\u8fc7\u8bed\u6cd5\u77e5\u8bc6\u70b9\u540e\uff0c\u4ee5\u4e00\u4e2arust\u4e0b\u7684\u77ed\u94fe\u63a5\u4e3a\u5207\u5165\u70b9\uff0c\u7406\u89e3\u4e00\u4e0brust\u54f2\u5b66\uff0c\u5b66\u4e60\u4e00\u4e0brust\u4e0bweb\u524d\u540e\u7aef\u5f00\u53d1\u7684\u6280\u672f\u6808")),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"\u9879\u76ee\u662f\u627e\u7684&\u597d\u50cf\u6ca1\u6709\u5f00\u6e90\u534f\u8bae\uff0c\u4e0d\u8fc7\u5b66\u4e60\u7528\u9014\u5e94\u8be5\u5173\u7cfb\u4e0d\u5927\u5427qwq")),(0,a.yg)("p",null,"\u4ed3\u5e93\u5730\u5740\uff1a"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/snack8310/tiny-url"},"https://github.com/snack8310/tiny-url")," -",">"," \u540e\u7aef"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/snack8310/tiny-url-web"},"https://github.com/snack8310/tiny-url-web")," -",">"," \u524d\u7aef"),(0,a.yg)("b",null,"web\u540e\u7aef\u6846\u67b6"),(0,a.yg)("p",null,"actix-web\uff1a\u6587\u6863",(0,a.yg)("a",{parentName:"p",href:"https://actix.rs/docs/"},"Welcome | Actix")),(0,a.yg)("p",null,"actix-web\u662frust\u6bd4\u8f83\u5b8c\u5584\u548c\u70ed\u95e8\u7684\u6846\u67b6\u4e4b\u4e00\uff0c\u6709\u8be6\u5c3d\u7684\u6587\u6863\u548c\u793a\u4f8b\uff0c\u5bf9\u5b66\u4e60\u66f2\u7ebf\u53cb\u5584\u3002"),(0,a.yg)("h2",{id:"tiny-url"},"tiny-url"),(0,a.yg)("h3",{id:"0\u4f7f\u7528cargo\u521b\u5efarust\u9879\u76ee"},"0.\u4f7f\u7528cargo\u521b\u5efarust\u9879\u76ee"),(0,a.yg)("p",null,"\u7565\uff0c\u89c1rust\u5b98\u65b9\u6587\u6863",(0,a.yg)("a",{parentName:"p",href:"https://rustwiki.org/zh-CN/book/"},"https://rustwiki.org/zh-CN/book/")),(0,a.yg)("p",null,"\u6dfb\u52a0actix-web\u5230Cargo.toml\uff0c\u6dfb\u52a0\u4f9d\u8d56"),(0,a.yg)("h3",{id:"1\u4fee\u6539mainrs\u6587\u4ef6"},"1.\u4fee\u6539main.rs\u6587\u4ef6"),(0,a.yg)("p",null,"\u5305\u542b\u51e0\u4e2a\u57fa\u672c\u7684\u8def\u7531\u51fd\u6570\u548c\u542f\u52a8\u670d\u52a1\u7684main\u51fd\u6570\uff0c\u5bf9\u4e8e\u6709\u4e00\u4e9bweb\u540e\u7aef\u5f00\u53d1\u7ecf\u5386\u7684\u540c\u5b66\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\u611f\u5230\u719f\u6089\u7684\u3002"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-rs"},'use actix_web::{get, post, web, App, HttpResponse, HttpServer, Responder};\n\n#[get("/")]\nasync fn hello() -> impl Responder {\n    HttpResponse::Ok().body("Hello world!")\n}\n\n#[actix_web::main]\nasync fn main() -> std::io::Result<()> {\n    HttpServer::new(|| {\n        App::new()\n            .service(hello)\n    })\n    .bind(("127.0.0.1", 8080))?\n    .run()\n    .await\n}\n')),(0,a.yg)("h4",{id:"rust\u4e0ego\u4e0d\u540c\u7684\u4e00\u4e9b\u8bed\u6cd5"},"rust\u4e0ego\u4e0d\u540c\u7684\u4e00\u4e9b\u8bed\u6cd5"),(0,a.yg)("p",null,"\u81f3\u6b64\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u53ef\u8fd0\u884c\u7684rust\u7684web server\u7a0b\u5e8f\uff0c\u5bf9\u6bd4\u4f7f\u7528go\u5b9e\u73b0\u7684\u7248\u672c\uff0c\u53ef\u89c1\u4ee3\u7801\u7a0d\u957f\uff0c\u542f\u52a8\u670d\u52a1\u7684\u51fd\u6570\u8c03\u7528\u7565\u957f\u3002\u533a\u522b\u6700\u5927\u7684\u662f\u5c06\u8def\u7531\u51fd\u6570\u7ed1\u5b9a\u5728\u8def\u5f84\u4e0a\u662f\u7528#\u7684\u2018\u8bed\u53e5\u2019\u5b9e\u73b0\u7684"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("inlineCode",{parentName:"li"},"#"),": \u5728Rust\u4e2d\uff0c",(0,a.yg)("inlineCode",{parentName:"li"},"#"),"\u7b26\u53f7\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u5c5e\u6027\uff08attribute\uff09\u3002\u5c5e\u6027\u662f\u4e00\u79cd\u5143\u6570\u636e\uff0c\u53ef\u4ee5\u7528\u4e8e\u4e3aRust\u4ee3\u7801\u63d0\u4f9b\u9644\u52a0\u4fe1\u606f\uff0c\u4f8b\u5982\u544a\u8bc9\u7f16\u8bd1\u5668\u5982\u4f55\u5904\u7406\u4ee3\u7801\u6216\u8005\u5411\u5b8f\u63d0\u4f9b\u989d\u5916\u7684\u4fe1\u606f\u3002\u5982\u6b64\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u4ee3\u7801\u81ea\u8eab\u53ef\u8bfb\u6027\u589e\u5f3a\uff0c\u627f\u62c5\u4e86\u90e8\u5206\u4e4b\u524d\u6ce8\u91ca\u7684\u529f\u80fd\uff0c\u5728\u8bbe\u7f6e#\u540e\u518dmain\u51fd\u6570\u4e2dservice\u8bbe\u7f6ehandler\u65f6\u5c31\u4f1a\u5c06\u5176\u7ed1\u5b9a\u5728\u5bf9\u5e94\u7684\u8def\u5f84\u4e0a\u4e86\u3002"),(0,a.yg)("li",{parentName:"ol"},"rust\u4e2d\u7684\u5f02\u6b65\uff1a\u5bf9\u4e8e\u5f02\u6b65\u7684\u5b9e\u73b0rust\u4f7f\u7528\u7684\u662fasync+await\u65b9\u5f0f\uff0c\u548cgo\u7684channel+goroutine\u4e0d\u540c\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u7b14\u8005\u5bf9\u4e8ego\u7684\u5f02\u6b65\u4e0d\u751a\u4e86\u89e3qwq\uff0c\u5c31\u4e0d\u8d58\u8ff0\u4e86"),(0,a.yg)("li",{parentName:"ol"},"rust\u4e2d\u7684\u95ed\u5305\uff1a\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u5728\u7a0b\u5e8f\u7684\u4e00\u4e2a\u4f4d\u7f6e\u6307\u5b9a\u67d0\u4e9b\u4ee3\u7801\uff0c\u5e76\u53ea\u5728\u7a0b\u5e8f\u7684\u67d0\u5904\u5b9e\u9645\u9700\u8981\u7ed3\u679c\u7684\u65f6\u5019 ",(0,a.yg)("b",null,"\u6267\u884c")," \u8fd9\u4e9b\u4ee3\u7801\u3002\u8fd9\u662f\u95ed\u5305\u7684\u7528\u6b66\u4e4b\u5730\uff0c\u5728rust\u4e2d\u95ed\u5305\u6709\u4e0d\u540c\u7684\u8bed\u6cd5\uff0c\u53ef\u89c1\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684||\u5c31\u662f\u663e\u793a\u7684\u95ed\u5305\u5b9a\u4e49\uff0c\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u6355\u83b7\u73af\u5883\u4e2d\u7684\u53d8\u91cf\uff0c\u533a\u522b\u4e8ego\u597d\u50cf\u53ea\u7528\u8fc7\u533f\u540d\u51fd\u6570\uff0c\u4ffa\u5bf9\u5176\u4ed6\u7684\u95ed\u5305\u4e0d\u751a\u4e86\u89e3qwq")),(0,a.yg)("h3",{id:"2\u4fee\u6539handler\u51fd\u6570\u589e\u52a0\u4e1a\u52a1\u903b\u8f91"},"2.\u4fee\u6539handler\u51fd\u6570\uff0c\u589e\u52a0\u4e1a\u52a1\u903b\u8f91"),(0,a.yg)("p",null,"\u4e3a\u4e86\u5b9e\u73b0\u77ed\u94fe\u63a5\u529f\u80fd\uff0c\u521b\u5efa\u5982\u4e0b\u51e0\u4e2ahandler\u51fd\u6570\uff0c\u5206\u522b\u8bbe\u7f6e\u8def\u7531"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"\u589e\u52a0\u77ed\u94fe\u63a5"),(0,a.yg)("li",{parentName:"ul"},"\u67e5\u8be2\u5168\u90e8\u77ed\u94fe\u63a5"),(0,a.yg)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7ed9\u51fa\u7684\u77ed\u94fe\u63a5\u8df3\u8f6c\u5bf9\u5e94\u539f\u94fe\u63a5\u7f51\u9875")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-rs"},'#[post("/create")]\nasync fn create_link() -> impl Responder {}\n\n#[get("/{code}")]\nasync fn get_from_link() -> impl Responder {}\n\n#[get("/links")]\nasync fn get_all_links() -> impl Responder {}\n')),(0,a.yg)("h3",{id:"3\u589e\u52a0model\u7ed3\u6784\u4f53"},"3.\u589e\u52a0model\u7ed3\u6784\u4f53"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-rs"},"#[derive(Deserialize, Serialize, Debug, Clone)]\nstruct Link {\n    tiny_code: String,\n    origin_url: String,\n}\n\n#[derive(Deserialize, Clone)]\nstruct ApiAddLink {\n    origin_url: String,\n}\n\nimpl ApiAddLink {\n    fn to_new_link(self) -> Link {\n        Link {\n            tiny_code: nanoid!(5),\n            origin_url: self.origin_url,\n        }\n    }\n}\n")),(0,a.yg)("p",null,"rust\u6709\u548ccpp\u76f8\u4f3c\u7684\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u6cd5\u7279\u70b9\uff0c\u8fd9\u4e00\u70b9\u4ece\u4e0a\u9762\u7684\u7ed3\u6784\u4f53\u5b9a\u4e49\u4ee3\u7801\u4e2d\u56fd\uff0c\u5b9a\u4e49\u7ed3\u6784\u4f53\u540e\u53ef\u4ee5\u4f7f\u7528impl\u8bed\u53e5\u5b9a\u4e49\u7ed3\u6784\u4f53\u7684\u65b9\u6cd5\u53ef\u4ee5\u770b\u51fa\u3002"),(0,a.yg)("p",null,"\u503c\u5f97\u4e00\u63d0\u7684\u662f\u5176\u4e2d\u7684",(0,a.yg)("inlineCode",{parentName:"p"},"derive"),"\u8bed\u53e5\uff0c\u8981\u6b63\u786e\u7684\u7406\u89e3\u4ed6\u4eec\u7684\u542b\u4e49\uff0c\u53ef\u80fd\u9700\u8981\u5bf9rust\u4e2d\u6838\u5fc3\u6982\u5ff5\u6240\u6709\u6743\u6709\u6240\u4e86\u89e3\uff1a",(0,a.yg)("a",{parentName:"p",href:"https://rustwiki.org/zh-CN/book/ch04-00-understanding-ownership.html"},"\u8ba4\u8bc6\u6240\u6709\u6743 - Rust \u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00 \u4e2d\u6587\u7248")),(0,a.yg)("p",null,"Rust \u4e2d\u7684\u6240\u6709\u6743\u662f\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u7ba1\u7406\u5728\u5185\u5b58\u4e2d\u5206\u914d\u7684\u8d44\u6e90\u3002\u5728 Rust \u4e2d\uff0c\u6bcf\u4e2a\u503c\u90fd\u6709\u4e00\u4e2a\u6240\u6709\u8005\uff0c\u540c\u65f6\u4e00\u4e2a\u503c\u53ea\u80fd\u6709\u4e00\u4e2a\u6240\u6709\u8005\u3002\u5f53\u6240\u6709\u8005\u8d85\u51fa\u5176\u4f5c\u7528\u57df\u6216\u88ab\u91ca\u653e\u65f6\uff0c\u5b83\u6240\u62e5\u6709\u7684\u8d44\u6e90\uff08\u5982\u5806\u4e0a\u7684\u5185\u5b58\uff09\u4f1a\u88ab\u81ea\u52a8\u91ca\u653e\u3002"),(0,a.yg)("p",null,"\u56e0\u4e3a\u503c\u7684\u6240\u6709\u6743\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u6240\u4ee5\u5728\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\u4e00\u4e9b\u5e38\u89c1\u884c\u4e3a\u4e2d\uff0c\u6240\u6709\u6743\u4f1a\u8fdb\u884c\u4f20\u9012\uff0c\u4f8b\u5982\u51fd\u6570\u4f20\u53c2\u548c\u503c\u62f7\u8d1d\u3002\uff08\u8fd9\u4e2a\u4e0d\u592a\u80fd\u8bf4\u6e05\u695a\uff0cbut\u611f\u89c9\u4e0a\u9762\u7684\u6587\u6863\u4e2d\u8bf4\u7684\u8d3c\u597d"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"derive")," \u8bed\u53e5\u53ef\u4ee5\u81ea\u52a8\u4e3a\u6211\u4eec\u5b9a\u4e49\u7684\u7ed3\u6784\u4f53\u5b9e\u73b0\u4e00\u4e9btrait\uff0c\u4f8b\u5982derive\u5c5e\u6027\u5b8f\u4e3a\u81ea\u5b9a\u4e49\u7c7b\u578b\u81ea\u52a8\u751f\u6210 ",(0,a.yg)("inlineCode",{parentName:"p"},"clone")," \u65b9\u6cd5\u3002\u53ef\u4ee5 ",(0,a.yg)("inlineCode",{parentName:"p"},"clone")," \u65b9\u6cd5\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4e0e\u539f\u59cb\u6570\u636e\u5b8c\u5168\u76f8\u540c\u7684\u65b0\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u8f6c\u79fb\u6240\u6709\u6743\u3002"),(0,a.yg)("p",null,"\u53e6\uff1ananoid\u662f\u4e00\u4e2arust\u4e2d\u7528\u4e8e\u751f\u6210\u968f\u673a\u6570\u7684\u5e93\uff0c\u518d\u6240\u793a\u4ee3\u7801\u4e2d\u4f7f\u7528\u5e93\u4e2d\u7684\u5b8f\u751f\u6210\u4e86\u4e00\u4e2a5\u4f4d\u7684\u968f\u673a\u6570\uff0c\u503c\u5f97\u4e00\u63d0\u7684\u662f\u5728\u4f7f\u7528 ",(0,a.yg)("inlineCode",{parentName:"p"},"nanoid")," \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\u65f6\uff0c\u751f\u6210\u7684\u5b57\u7b26\u4e32\u662f\u975e\u5e38\u63a5\u8fd1\u552f\u4e00\u7684\uff0c\u4f46\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u7edd\u5bf9\u7684\u552f\u4e00\u6027\u3002",(0,a.yg)("inlineCode",{parentName:"p"},"nanoid")," \u4f7f\u7528\u4e86\u4e00\u4e2a\u7b97\u6cd5\u6765\u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u65f6\u95f4\u6233\u548c\u968f\u673a\u6570\u7b49\u4fe1\u606f\uff0c\u4ee5\u786e\u4fdd\u751f\u6210\u7684\u5b57\u7b26\u4e32\u5c3d\u53ef\u80fd\u5730\u72ec\u4e00\u65e0\u4e8c\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u60c5\u51b5\uff0c\u751f\u6210\u7684\u5b57\u7b26\u4e32\u5728\u5b9e\u8df5\u4e2d\u51e0\u4e4e\u662f\u552f\u4e00\u7684\uff0c\u56e0\u4e3a\u751f\u6210\u7684\u6982\u7387\u975e\u5e38\u4f4e\u3002"),(0,a.yg)("h3",{id:"3\u5c01\u88c5\u7edf\u4e00\u7684\u8fd4\u56de\u503c\u548cserdeserialize"},"3.\u5c01\u88c5\u7edf\u4e00\u7684\u8fd4\u56de\u503c\u548c",(0,a.yg)("inlineCode",{parentName:"h3"},"serde::Serialize")),(0,a.yg)("p",null,"\u5bf9\u4e8eapi\u51fd\u6570\u4e2d\u7684\u4e0d\u540c\u8fd4\u56de\u503c\uff0c\u53ef\u80fd\u5b58\u5728\u5404\u79cd\u5404\u6837\u7684\u7c7b\u578b\uff0c\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\uff0c\u662f\u5c06\u5176\u5c01\u88c5\u5728\u4e00\u4e2a\u7ed3\u6784\u4f53\u7684data\u90e8\u5206\uff0c\u5176\u4ed6\u90e8\u5206\u8868\u793a\u8bf7\u6c42\u7684\u6210\u529f\u4e0e\u5426\u548c\u9519\u8bef\u4fe1\u606f\u3002\u5982\u6b64\u7684\u597d\u5904\u662f\u65b9\u4fbf\u524d\u7aef\u5904\u7406\uff0c\u503c\u5f97\u4e00\u63d0\u7684\u662frust\u4e2d\u6709\u7c7b\u4f3c\u7684\u8bed\u6cd5\u673a\u5236",(0,a.yg)("inlineCode",{parentName:"p"},"Result<T, E>"),"\uff0c\u5728\u6587\u6863\u4e2d\u6709\u6bd4\u8f83\u591a\u7684\u4ecb\u7ecd\u3002"),(0,a.yg)("p",null,"\u4f7f\u7528",(0,a.yg)("inlineCode",{parentName:"p"},"serde::Serialize")," \u5e93\u53ef\u4ee5\u65b9\u4fbf\u7684\u5bf9\u4e3a\u81ea\u5b9a\u4e49\u6570\u636e\u7ed3\u6784\u5b9e\u73b0\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u5982\u4e0b"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"#[derive(Serialize)]"),"\u4e3a\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u81ea\u52a8\u5b9e\u73b0\u4e86\u5e8f\u5217\u5316"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-rs"},"use serde::Serialize;\n\n#[derive(Serialize)]\npub struct ApiResult<T: Serialize> {\n    pub ok: bool,\n    pub err: Option<String>,\n    pub data: Option<T>,\n}\n\nimpl <T: Serialize> ApiResult<T>{\n    pub fn success(r: Option<T>) -> ApiResult<T>{\n        ApiResult{\n            ok: true,\n            err: None,\n            data: r,\n        }\n    }\n    pub fn error<E: ToString>(err: E)-> ApiResult<T> {\n        ApiResult{\n            ok: false,\n            err: Some(err.to_string()),\n            data: None,\n        }\n    }\n}\n")),(0,a.yg)("h3",{id:"4\u8fde\u63a5\u6570\u636e\u5e93"},"4.\u8fde\u63a5\u6570\u636e\u5e93"),(0,a.yg)("p",null,"\u7531\u4e8e\u539f\u4f5c\u8005\u6ca1\u6709\u4f7f\u7528orm\uff0c\u4e2a\u4eba\u611f\u89c9\u662f\u4ed6\u5b8c\u6210\u7684\u65f6\u5019\u8fd8\u6ca1\u6709\u597d\u7528\u7684\u5f02\u6b65\u7684orm\uff0c\u4e5f\u53ef\u80fd\u662f\u5bf9\u4e8e\u8fd9\u4e2a\u9879\u76ee\u6765\u8bf4orm\u6709\u4e00\u70b9\u4e0d\u9002\u5408\uff08orm\u53ef\u80fd\u4f1a\u635f\u5931\u6027\u80fd\uff09\uff0c\u5982\u4ecarust\u4e5f\u6709\u54e6\u4e86"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"sqlx")," \u662f\u4e00\u4e2a Rust \u8bed\u8a00\u7684\u5f88\u597d\u7528\u7684\u5f02\u6b65\u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177\uff0c\u597d\u5728\u548c\u5f88\u591a\u6846\u67b6\u4f8b\u5982actix\u65e0\u7f1d\u8854\u63a5\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c\uff0c\u5e76\u4e14\u652f\u6301\u9884\u7f16\u8bd1\u67e5\u8be2\u7a0d\u5fae\u5b89\u5168\u7684\u540c\u65f6\u63d0\u5347\u4e86\u67e5\u8be2\u7684\u6027\u80fd\u3002"),(0,a.yg)("p",null,"\u5173\u4e8e",(0,a.yg)("inlineCode",{parentName:"p"},"sqlx"),"\u4f7f\u7528\u8fd8\u662f\u76f8\u5bf9\u7b80\u5355\u7684\uff0c\u5e76\u4e14\u548cgo\u4e2d\u7684",(0,a.yg)("inlineCode",{parentName:"p"},"sqlx")," \u5f88\u76f8\u4f3c\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u770b\u535a\u6587",(0,a.yg)("a",{parentName:"p",href:"https://blog.logrocket.com/interacting-databases-rust-diesel-vs-sqlx/"},"Interacting with databases in Rust using Diesel vs. SQLx - LogRocket Blog"),"\u6216sqlx\u5b98\u65b9\u6587\u6863"),(0,a.yg)("h3",{id:"5\u914d\u7f6e\u7684\u9694\u79bb"},"5.\u914d\u7f6e\u7684\u9694\u79bb"),(0,a.yg)("p",null,"\u7c7b\u4f3cgo\u4e2d\u4f7f\u7528\u7684vaper\uff0c\u5728rust\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u7684\u5e93\uff0c",(0,a.yg)("inlineCode",{parentName:"p"},"config")," ",(0,a.yg)("a",{parentName:"p",href:"https://docs.rs/config/latest/config/"},"config - Rust")),(0,a.yg)("h3",{id:"6\u6587\u4ef6\u4e0a\u4f20"},"6.\u6587\u4ef6\u4e0a\u4f20"),(0,a.yg)("p",null,"\u7531\u4e8e\u539f\u9879\u76ee\u4e2d\u6ca1\u6709\uff0c\u4f8b\u5b50\u6765\u6e90\u662f\u5728\u67d0\u8bba\u575b\u91cc\u627e\u5230\u7684\uff08\u4e0d\u4fdd\u8bc1\u6ca1\u95ee\u9898qwq\uff0c\u4f46\u786e\u4fdd\u80fd\u8dd1qwq\uff0c\u5206\u5f00\u521b\u5efa\u6587\u4ef6\u548c\u5199\u5165\u6587\u4ef6\u7684\u539f\u56e0\u662f\uff0c\u539f\u535a\u4e3b\u8bf4\u7531\u4e8e\u6587\u4ef6\u7684\u4e0a\u4f20\u53ef\u80fd\u9700\u8981\u5206\u7247\uff0c\u4e0d\u5206\u5f00\u4f1a\u5b58\u5728\u95ee\u9898\uff0c\u5e76\u672a\u8fdb\u884c\u5b9e\u6d4b"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-rs"},'fn save_file_create(name: String) {\n    let filepath = std::path::Path::new(SAVE_DIR).join(name);\n    std::fs::File::create(&filepath).unwrap();\n}\n\nfn save_file_add(name: String, file: web::Bytes) -> Result<(), std::io::Error> {\n    let filepath = std::path::Path::new(SAVE_DIR).join(name);\n    let mut f = std::fs::OpenOptions::new()\n        .append(true)\n        .open(&filepath)\n        .unwrap();\n    f.write_all(&file)\n}\n#[post("/upload/{name}")]\nasync fn upload(\n    name: actix_web::web::Path<String>,\n    mut payload: actix_multipart::Multipart,\n) -> Result<actix_web::HttpResponse, Error> {\n    save_file_create(name.to_string());\n    // iterate over multipart stream\n    while let Some(item) = payload.next().await {\n        let mut field = item?;\n        // Field in turn is stream of *Bytes* object\n        while let Some(chunk) = field.next().await {\n            let data = chunk.unwrap();\n            save_file_add(name.to_string(), data).unwrap();\n        }\n    }\n    Ok(actix_web::HttpResponse::Ok().into())\n}\n')),(0,a.yg)("h3",{id:"7\u767b\u5f55\u7684\u5b9e\u73b0"},"7.\u767b\u5f55\u7684\u5b9e\u73b0"),(0,a.yg)("p",null,"\u53c2\u8003\u9879\u76ee\uff1a"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/karthickai/actix_login"},"https://github.com/karthickai/actix_login")),(0,a.yg)("p",null,"\ud83d\udc46\u4e00\u4e2a\u5f88\u7eaf\u7cb9\uff0c\u65e0\u70ab\u6280\u7684rust\u767b\u5f55demo"))}c.isMDXComponent=!0},15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>y});var r=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),u=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(o.Provider,{value:n},e.children)},g="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=u(t),d=a,y=g["".concat(o,".").concat(d)]||g[d]||c[d]||i;return t?r.createElement(y,l(l({ref:n},p),{},{components:t})):r.createElement(y,l({ref:n},p))}));function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=d;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s[g]="string"==typeof e?e:a,l[1]=s;for(var u=2;u<i;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);