<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-basics/virtualization/docker/docker">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Docker入门 | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cs-engineering/docs/basics/virtualization/docker"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Docker入门 | My Site"><meta data-rh="true" name="description" content="作者: @pacman"><meta data-rh="true" property="og:description" content="作者: @pacman"><link data-rh="true" rel="icon" href="/cs-engineering/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cs-engineering/docs/basics/virtualization/docker"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/basics/virtualization/docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/basics/virtualization/docker" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cs-engineering/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cs-engineering/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/cs-engineering/assets/css/styles.3abdc6bc.css">
<link rel="preload" href="/cs-engineering/assets/js/runtime~main.b7a3a53c.js" as="script">
<link rel="preload" href="/cs-engineering/assets/js/main.87046eeb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cs-engineering/"><div class="navbar__logo"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs-engineering/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/cs-engineering/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cs-engineering/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/前端">前端</a><button aria-label="Toggle the collapsible sidebar category &#x27;前端&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/后端">后端</a><button aria-label="Toggle the collapsible sidebar category &#x27;后端&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cs-engineering/docs/category/基础">基础</a><button aria-label="Toggle the collapsible sidebar category &#x27;基础&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/basics/linux-basic">Linux基础</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/category/网络">网络</a><button aria-label="Toggle the collapsible sidebar category &#x27;网络&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/category/虚拟化">虚拟化</a><button aria-label="Toggle the collapsible sidebar category &#x27;虚拟化&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/category/docker">Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cs-engineering/docs/basics/virtualization/docker">Docker入门</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/工具">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cs-engineering/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/category/基础"><span itemprop="name">基础</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/category/虚拟化"><span itemprop="name">虚拟化</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/category/docker"><span itemprop="name">Docker</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Docker入门</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Docker入门</h1><p>作者: @pacman</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-docker简介">1. Docker简介<a href="#1-docker简介" class="hash-link" aria-label="Direct link to 1. Docker简介" title="Direct link to 1. Docker简介">​</a></h2><blockquote><p>Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly. With Docker, you can manage your infrastructure in the same way you manage your applications. By taking advantage of Docker’s methodologies for shipping, testing, and deploying code quickly, you can significantly reduce the delay between writing code and running it in production.</p></blockquote><ul><li>尽管原理上存在本质不同，但是你可以暂时将它当作一个轻量级的“虚拟机”。<ul><li>关于 Docker 和 VM 的区别，推荐阅读：<a href="https://cloudacademy.com/blog/docker-vs-virtual-machines-differences-you-should-know/" target="_blank" rel="noopener noreferrer">Docker vs. Virtual Machines: Differences You Should Know</a></li></ul></li><li>从模式上来讲，Docker 专注于三件事：<code>Build Image</code>, <code>Ship Image</code>, <code>Run Image</code>.<ul><li>而这里的<code>Image</code>则是学习 Docker 过程中必须理解的一个概念。</li></ul></li></ul><p>设想这样一个背景：</p><ul><li>你在你的本地机器上写了一个复杂的服务，除了 GoLang 以外还配置了一大堆其他的依赖；</li><li>这时候你需要把它部署到一个干干净净的服务器上，并且该发行版有很多你并不熟悉的特性……</li></ul><p>如果你未曾了解过 Docker，那你或许只能选择再花一个下午在上面配置环境，甚至还会踩到更多的坑；但是如果你会用 Docker，那么你只需要为你的项目写一个 Dockerfile，并确保服务器上安装了 Docker，接下来只需要通过 Docker 直接部署即可。</p><ul><li>按照我的理解，Docker 就是为了在部署过程中便捷地构建一个必须的环境而存在的。</li><li>按照上面那个不太恰当的的“虚拟机”的比喻，就是在远程服务器上快速启一个配置好的虚拟机，并在里面运行对应的服务。</li></ul><blockquote><p>关于如何安装 Docker，这里我们直接略过，请自行搜索如何在你使用的操作系统上安装 Docker。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-docker核心概念">2. Docker核心概念<a href="#2-docker核心概念" class="hash-link" aria-label="Direct link to 2. Docker核心概念" title="Direct link to 2. Docker核心概念">​</a></h2><ul><li>Image<ul><li>Docker Image 是用来构建 Docker Container 的一系列资源，你可以当它是一个“模板”，而 Container 是其实例化。其本质是一堆静态文件，并不具备执行能力。</li></ul></li><li>Container<ul><li>Container 是 Image 的实例化，是一系列进程（当然你可以选择停止他们），它们根据 Image 中的内容被初始化创建，并基本上与你的宿主系统隔离，只留下一些用来进行交互的通道。</li></ul></li><li>Docker Hub<ul><li>类似于 GitHub，你可以在上面搜索查看公开的 Image，从中挑选你需要的并拉取到本地进行使用。</li></ul></li></ul><p><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-docker使用">3. Docker使用<a href="#3-docker使用" class="hash-link" aria-label="Direct link to 3. Docker使用" title="Direct link to 3. Docker使用">​</a></h2><ul><li>关于命令行的说明，我将融合在之后的内容中在对应的使用场景中介绍，如果想要查看列表类型的命令说明，可以查看：<ul><li><a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/commandline/cli/</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/commandline/docker/</a></li></ul></li><li>在这里，我将简单介绍两种 Docker 的使用流程。分别对应“使用 Docker Hub 的 Docker 镜像”和“本地构建镜像并创建容器使用”。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-使用-docker-hub-的-docker-镜像">3.1 使用 Docker Hub 的 Docker 镜像<a href="#31-使用-docker-hub-的-docker-镜像" class="hash-link" aria-label="Direct link to 3.1 使用 Docker Hub 的 Docker 镜像" title="Direct link to 3.1 使用 Docker Hub 的 Docker 镜像">​</a></h3><ul><li>刚好我之前写过一篇用 Docker 安装 FSL 的博客，直接拿这个做介绍了。<ul><li><a href="https://www.yuque.com/isshikixiu/notes/sna3ru" target="_blank" rel="noopener noreferrer">https://www.yuque.com/isshikixiu/notes/sna3ru</a></li></ul></li></ul><p>这里只放几个常见的命令，其它命令建议在使用遇到的时候去查阅docs：</p><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 拉取image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker pull {image name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建容器并进入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker run -it {image name} {entrance}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 启动/结束实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker start {container id}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker stop {container id}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 进入运行中的实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker exec -ti {container id} {entrance}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># container操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker container ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># image操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker image ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>查找镜像<ul><li>*<em>Docker Hub 支持命令行交互，但使用起来大概不如直接浏览 Docker Hub 方便，所以这里不做介绍</em> 。</li></ul></li><li>使用<code>docker pull</code> 来拉取镜像</li><li>使用<code>docker run</code> 来生成容器并运行</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-本地构建镜像并创建容器使用">3.2 本地构建镜像并创建容器使用<a href="#32-本地构建镜像并创建容器使用" class="hash-link" aria-label="Direct link to 3.2 本地构建镜像并创建容器使用" title="Direct link to 3.2 本地构建镜像并创建容器使用">​</a></h3><p>首先，在考虑服务器之前，请先在本地做好这些事：</p><ul><li>准备好的你的代码。<ul><li>例如我们需要在服务器上部署一个后端服务，那么首先你需要把这个后端服务的源代码准备好，否则“部署”将无从谈起。</li></ul></li><li>写 Dockerfile<ul><li>具体来说，Dockerfile 指导 Docker 如何构建一个镜像，包括但不限于要如何准备你所需要的依赖、如何组织你的源代码、如何编译你的源代码、镜像中会包含什么等。</li><li>关于 Dockerfile 的语法，可以参考我展示的例子，但是并不仅限于这些。</li></ul></li></ul><p>这里提供一个简单的 dockerfile 模版样例：</p><div class="language-Dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 选取一个 go 的官方镜像作为基础 作为 编译环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM golang:1.18 AS builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置一些环境变量，其中三个是 golang 所需要的；WORKDIR 是为了方便下面使用而设置的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV GOPROXY=https://mirrors.aliyun.com/goproxy/,direct \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GO111MODULE=on \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CGO_ENABLED=0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WORKDIR=/tmp/src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 运行 &#x27;mkdir -p $WORKDIR&#x27; 来创建工作目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mkdir -p $WORKDIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 将 . 下的内容全部复制到 $WORKDIR ，也就是 /tmp/src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . $WORKDIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 进入工作目录 并且 进行 go 的包管理操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd $WORKDIR &amp;&amp; go mod download all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 进入工作目录 并且 编译</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd $WORKDIR &amp;&amp; go build -o /fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 选取 alpine 作为运行环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM alpine:3.15.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 复制文件内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=builder /fileName /fileName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 在启动容器时运行该命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;/fileName&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>[非必需]<!-- --> 写一个部署脚本<ul><li>使用 Docker 已经很大程度上便利了在服务器上的部署，但是仍然还是需要一些步骤，而多数情况写我们需要多次修改源代码并重新部署，为了偷懒提高效率，我们还可以血已干部署脚本来让我们的部署真正实现“一键化”；</li><li>由于我们在这个流程中需要在部署端准备源代码，那么将不可避免的涉及到“源代码版本管理”这件事，显然这件事和 Docker 无关（如果你使用在本地把镜像上传到 Docker Hub 上，并在部署端拉取 Image 的模式，那么这件事就和 Docker 有关了），所以我们需要在脚本中写上一些 git 指令；</li><li>除此之外，由于我们需要多次重新部署，那么对于老版本的容器和镜像也需要一定的管理，即删除没有用的镜像和容器；</li><li>当然，最重要的还有从镜像的构建到容器的运行这一系列操作；</li></ul></li></ul><p><strong>[ homework ]</strong></p><ol><li>去 Docker Hub 找一个喜欢的 Image 把它 pull 下来，并在本地尝试部署，最好能写一个部署脚本；</li><li>（选做）尝试给自己的一个项目写一个 Dockerfile，并成功为该项目创建一个能用的镜像；</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-推荐阅读">4 推荐阅读<a href="#4-推荐阅读" class="hash-link" aria-label="Direct link to 4 推荐阅读" title="Direct link to 4 推荐阅读">​</a></h2><ul><li><a href="https://yeasy.gitbook.io/docker_practice/" target="_blank" rel="noopener noreferrer">https://yeasy.gitbook.io/docker_practice/</a></li><li><a href="https://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="noopener noreferrer">https://www.runoob.com/docker/docker-tutorial.html</a></li><li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/basics/virtualization/docker/docker.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cs-engineering/docs/category/docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Docker</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cs-engineering/docs/category/工具"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">工具</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-docker简介" class="table-of-contents__link toc-highlight">1. Docker简介</a></li><li><a href="#2-docker核心概念" class="table-of-contents__link toc-highlight">2. Docker核心概念</a></li><li><a href="#3-docker使用" class="table-of-contents__link toc-highlight">3. Docker使用</a><ul><li><a href="#31-使用-docker-hub-的-docker-镜像" class="table-of-contents__link toc-highlight">3.1 使用 Docker Hub 的 Docker 镜像</a></li><li><a href="#32-本地构建镜像并创建容器使用" class="table-of-contents__link toc-highlight">3.2 本地构建镜像并创建容器使用</a></li></ul></li><li><a href="#4-推荐阅读" class="table-of-contents__link toc-highlight">4 推荐阅读</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cs-engineering/assets/js/runtime~main.b7a3a53c.js"></script>
<script src="/cs-engineering/assets/js/main.87046eeb.js"></script>
</body>
</html>