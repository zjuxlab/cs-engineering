<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-frontend/frame/react" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">React | CS-Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cs-engineering/docs/frontend/frame/react"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="React | CS-Engineering"><meta data-rh="true" name="description" content="@biu9"><meta data-rh="true" property="og:description" content="@biu9"><link data-rh="true" rel="icon" href="/cs-engineering/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cs-engineering/docs/frontend/frame/react"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/frontend/frame/react" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/frontend/frame/react" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cs-engineering/blog/rss.xml" title="CS-Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cs-engineering/blog/atom.xml" title="CS-Engineering Atom Feed"><link rel="stylesheet" href="/cs-engineering/assets/css/styles.0fafe10b.css">
<link rel="preload" href="/cs-engineering/assets/js/runtime~main.cc607e59.js" as="script">
<link rel="preload" href="/cs-engineering/assets/js/main.d643dc48.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cs-engineering/"><div class="navbar__logo"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CS-Engineering</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs-engineering/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/cs-engineering/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cs-engineering/docs/intro">摸鱼者说</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/基础">基础</a><button aria-label="Toggle the collapsible sidebar category &#x27;基础&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cs-engineering/docs/category/前端">前端</a><button aria-label="Toggle the collapsible sidebar category &#x27;前端&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/category/框架">框架</a><button aria-label="Toggle the collapsible sidebar category &#x27;框架&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cs-engineering/docs/frontend/frame/react">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/frontend/frame/vue">Vue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/category/css">CSS</a><button aria-label="Toggle the collapsible sidebar category &#x27;CSS&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/frontend/frontend-intro">前端入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/frontend/frontend-practice">前端入门实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/frontend/html-and-css">HTML和CSS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/category/javascript">JavaScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/后端">后端</a><button aria-label="Toggle the collapsible sidebar category &#x27;后端&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/category/工具">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cs-engineering/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/category/前端"><span itemprop="name">前端</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/category/框架"><span itemprop="name">框架</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">React</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>React</h1><p>@biu9</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-及其生态简介">react 及其生态简介<a href="#react-及其生态简介" class="hash-link" aria-label="Direct link to react 及其生态简介" title="Direct link to react 及其生态简介">​</a></h2><p>这篇文章的主要目的是介绍 react 社区中各种插件/包,并为创建一个 react 应用提供相应的建议，由于整篇文章是综述性质的，因此不会过多涉及每个插件/包的高级用法，我们在这里只展示初级用法，如果你想要更进一步，你可以阅读本文的推荐阅读或直接去官网看文档</p><p>本文主要会涉及到以下内容</p><ul><li>redux / mobx</li><li>react-query</li><li>clean code</li><li>eslint / husky / jest</li><li>a clear project structure</li><li>css 预处理器 less / scss / tailwind</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="初始化代码环境">初始化代码环境<a href="#初始化代码环境" class="hash-link" aria-label="Direct link to 初始化代码环境" title="Direct link to 初始化代码环境">​</a></h2><p>由于 react 只是一个 JavaScript library,因此我们需要别的包配合以构建一个完整的 react 应用,框架在这一过程中起的是减轻开发者初始化代码环境负担的作用</p><p>目前比较主流的 react 框架有如下几种</p><ol><li>create-react-app</li><li>next.js</li><li>vite</li></ol><p>每种框架都有自己的优点 × ,在这里我们用 create-react-app 初始化代码环境</p><p>初始化的一些指令在此就不赘述了,在初始化完之后,我们首先来修改 src 文件夹下的文件结构</p><blockquote><p>我认为一个清晰的文件结构对于开发是有很大帮助的</p></blockquote><p>scr 文件夹下可以分成以下几个目录</p><ul><li>assets,存放项目中用到的所有静态资源文件</li><li>components,存放可以被复用的组件</li><li>hooks,存放自定义的 hook 函数</li><li>routes,应该是有关路由的文件夹,内部应该会和 protect routes 等有关(但我还没学 ×)</li><li>store,使用 redux / mobx 等全局状态管理工具时需要的 store</li><li>test,存放单元测试文件的地方</li><li>types,自定义的可以复用的各种 type</li><li>utils,自定义的纯函数</li><li>pages,页面文件夹</li><li>config,一些全局常量,如请求的 server 名</li></ul><p>对于 pages 文件夹,里面的每一个 page 都应该由以下部分组成</p><ul><li>index.tsx</li><li>components</li><li>api,存放各种封装好的请求的文件夹</li><li>types</li><li>style,存放样式文件(但用 tailwind 就不用这个目录了 ×</li></ul><blockquote><p>为什么 pages 里面有 types 却没有 hooks / utils 呢</p><p>从我个人的开发经验来看,自定义的 hook / util 的复用频率较高且数量较少,为了文件目录的简洁,所以放在了全局目录下</p></blockquote><p>在建立好文件目录之后,我们需要做的是配置各种开发插件,这些插件对于规范代码质量有着很重要的作用,包括不局限于:</p><ol><li>husky</li><li>eslint</li><li>jest</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eslint">eslint<a href="#eslint" class="hash-link" aria-label="Direct link to eslint" title="Direct link to eslint">​</a></h3><p>首先我们来初始化 eslint,执行以下命令:</p><ol><li><code>npm install eslint --save-dev</code></li><li><code>./node_modules/.bin/eslint --init</code></li><li>在 package.json 的 scripts 中添加:</li></ol><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;lint&quot;: &quot;eslint --ext .js,.jsx,.ts,.tsx src/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lint-fix&quot;: &quot;eslint --ext .js,.jsx,.ts,.tsx src/ --fix&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>之后你就可以通过<code>npm run lint</code>来检查你的代码格式,使用<code>npm run lint -- --fix</code>来自动修复格式问题</p><p>如果你需要自定义 eslint 检查的内容，你可以编辑.eslintrc.js 文件,大部分规则定义在 rules 字段中，下面是一个例子</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;rules&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;semi&quot;: [&quot;error&quot;, &quot;always&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;quotes&quot;: [&quot;error&quot;, &quot;double&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&quot;semi&quot;和&quot;quotes&quot;是规则名，&quot;error&quot;代表将规则视为一个错误，可选的别的字段还有&quot;off&quot;,&quot;warn&quot;,分别代表将这个规则关掉或视为 warning</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="husky">husky<a href="#husky" class="hash-link" aria-label="Direct link to husky" title="Direct link to husky">​</a></h3><p>下一步是使用 husky 配置规范的 git commit 流程</p><p>执行以下命令安装 husky:</p><ol><li><code>npx husky-init</code></li><li><code>npm install</code></li><li><code>npx huksy install</code></li><li><code>npm set-script prepare &quot;husky install&quot;</code></li><li>执行完上述命令后可以看到项目根目录下出现<code>.husky/pre-commit</code>文件,由于我们之前配置了 eslint,修改<code>.husky/pre-commit</code>中的 npm run test 为 npm run lint,这样,当你执行 git 时,husky 会自动执行 npm run lint</li></ol><p>之后创建用于检查 commit-msg 的文件,并在 husky 上添加对应检查规则</p><ol><li><code>npm install @commitlint/cli @commitlint/config-conventional</code></li><li><code>echo &quot;module.exports = {extends: [&#x27;@commitlint/config-conventional&#x27;]}&quot; &gt; commitlint.config.js</code></li><li><code>npx husky add .husky/commit-msg &quot;npm run commitlint&quot;</code></li></ol><p>为 commitlint.config.js 添加以下内容</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* eslint-disable no-undef */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extends: [&quot;@commitlint/config-conventional&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rules: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type-enum&quot;: [ // type枚举</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2, &quot;always&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;build&quot;, // 编译相关的修改，例如发布版本、对项目构建或者依赖的改动</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;feat&quot;, // 新功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;fix&quot;, // 修补bug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;docs&quot;, // 文档修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;style&quot;, // 代码格式修改, 注意不是 css 修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;refactor&quot;, // 重构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;perf&quot;, // 优化相关，比如提升性能、体验</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;test&quot;, // 测试用例修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;revert&quot;, // 代码回滚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ci&quot;, // 持续集成修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;config&quot;, // 配置修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;chore&quot;, // 其他改动</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type-empty&quot;: [2, &quot;never&quot;], // never: type不能为空; always: type必须为空</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type-case&quot;: [0, &quot;always&quot;, &quot;lower-case&quot;], // type必须小写，upper-case大写，camel-case小驼峰，kebab-case短横线，pascal-case大驼峰，等等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;scope-empty&quot;: [0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;scope-case&quot;: [0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;subject-empty&quot;: [2, &quot;never&quot;], // subject不能为空</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;subject-case&quot;: [0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;subject-full-stop&quot;: [0, &quot;never&quot;, &quot;.&quot;], // subject以.为结束标记</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;header-max-length&quot;: [2, &quot;always&quot;, 72], // header最长72</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;body-leading-blank&quot;: [0], // body换行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;footer-leading-blank&quot;: [0, &quot;always&quot;], // footer以空行开头</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>之后每次执行 git commit 时，husky 都会执行 npm run commitlint 检查你的提交规范,一次成功的提交示例如下:</p><p><img loading="lazy" alt="img" src="/cs-engineering/assets/images/react-1-e950acd95d69d2263ff8313c13b56499.png" width="992" height="244" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jest">jest<a href="#jest" class="hash-link" aria-label="Direct link to jest" title="Direct link to jest">​</a></h3><p>下一步是配置 jest,单元测试对于维护开发的安全性&amp;稳定性有着很大的作用</p><p>Jest 是 Facebook 开源的一套 JavaScript 测试框架， 它集成了断言、JSDom、覆盖率报告等开发者所需要的所有测试工具。</p><p>执行以下步骤以初始化 jest</p><ol><li><code>npm install --save-dev jest</code></li><li>在 package.json 中修改<code>scripts:{&quot;test&quot;: &quot;jest&quot;,}</code></li><li>在.eslintrc.js 中添加<code>&quot;env&quot;:{&quot;jest/globals&quot;: true}</code></li></ol><p>至此,你可以运行 npm test 来运行你的所有 jest.js 文件</p><p>下面提供一个样例:</p><p>在 test 目录下新建一个 example 文件夹,在 example 文件夹中新建 sum.js 与 sum.jest.js</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// sum.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function sum(a,b) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return a+b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.exports = sum;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// sum.jest.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const sum = require(&quot;./sum&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test(&quot;adds 1 + 2 to equal 3&quot;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect(sum(1, 2)).toBe(3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>运行 npm test 后你可以看到</p><p><img loading="lazy" alt="img" src="/cs-engineering/assets/images/react-2-dfde720b1465daf0ac6743c44993713c.png" width="1280" height="223" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="css-预处理器">css 预处理器<a href="#css-预处理器" class="hash-link" aria-label="Direct link to css 预处理器" title="Direct link to css 预处理器">​</a></h2><p>在完成各种插件的配置后,另一个重要的问题是选用什么样的 css 预处理器(现在一般很少有直接写 css 的了吧 ×)</p><p>目前主流的 css 预处理器有:</p><ul><li>less</li><li>scss</li><li>tailwind</li></ul><p>由于我完全不了解 scss,在这里仅介绍一下 less 和 tailwind</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="less">less<a href="#less" class="hash-link" aria-label="Direct link to less" title="Direct link to less">​</a></h3><p>less: Less （Leaner Style Sheets 的缩写） 是一门向后兼容的 CSS 扩展语言。这里呈现的是 Less 的官方文档（中文版），包含了 Less 语言以及利用 JavaScript 开发的用于将 Less 样式转换成 CSS 样式的 Less.js 工具。</p><p>less 增加了嵌套，混合，变量等一系列特性,使用 less 可以大大简化你的样式文件的代码量</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tailwind">tailwind<a href="#tailwind" class="hash-link" aria-label="Direct link to tailwind" title="Direct link to tailwind">​</a></h3><p>tailwind 是一个功能优先的 css 框架,通过 tailwind,你可以在 html 中书写样式代码,同时,tailwind 规定了一系列预先设置好的 className，使用 tailwind 可以使你不用在 css 文件和 jsx 文件之间不停切换,这样就可以大大节省开发时间以及代码量,但是由于 tailwind 内部是集成了一系列预先设置好的样式,当项目需要复杂的 css 动画效果时,tailwind 可能不会是一个很好的选择</p><p>对于 create-react-app 创建的应用来说，由于 tailwind 官网的引入教程有一些 typo，我在这里列一下正确的引入步骤，建议读者同时参考在这里列的步骤以及官网引入教程</p><ol><li><code>npm install -D tailwindcss@npm:@tailwindcss/postcss7-compat postcss@^8 autoprefixer@^9</code></li><li><code>npm install @craco/craco --legacy-peer-deps</code></li><li><code>npx tailwindcss-cli@latest init</code></li></ol><p>craco.config.js 文件中需要将 postcss 改为 postcssOptions</p><p>例子:</p><p>在 tailwind 中，你只需要下面三行代码即可创建一个垂直居中的黑色矩形</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div className=&quot;absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div className=&quot;w-10 h-10 rounded-lg bg-black flex justify-center items-center&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/div&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-query">react-query<a href="#react-query" class="hash-link" aria-label="Direct link to react-query" title="Direct link to react-query">​</a></h2><blockquote><p>推荐阅读:<a href="https://blog.skk.moe/post/why-you-should-not-fetch-data-directly-in-use-effect/" target="_blank" rel="noopener noreferrer">为什么你不应该在 React 中直接使用 useEffect 从 API 获取数据</a></p></blockquote><p>在前端应用中,网络请求是一个很重要的部分,react 库本身并没有提供一个很好的请求方式,因此选择一个优秀的网络请求工具对于后续代码质量&amp;简化有着很重要的作用</p><p>在传统的 react 应用中,一种普遍的发起请求的方式是通过 useEffect 获取数据(这大概是由于请求是异步的,我们需要在请求完成后重新 setState 并更新组件,同时还要避免无限重渲染),但是这样就会带来很多问题,举例而言,你需要怎么处理请求异常?如果需要展示 loading 效果你又应该怎么写请求?你需要怎么处理请求结果的缓存?</p><p>react-query 被提出用于解决这一系列问题,通过使用 react-query,你可以以简洁的代码完成上述的一系列功能,当然,它的功能不仅限于此,更多的用处你可以查阅官网文档</p><p>这里是 react-query 的一个 sample:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const { isLoading, error, data } = useQuery([&quot;repoData&quot;], () =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fetch(&quot;https://api.github.com/repos/tannerlinsley/react-query&quot;).then(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (res) =&gt; res.json(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (isLoading) return &quot;Loading...&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (error) return &quot;An error has occurred: &quot; + error.message;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="状态管理">状态管理<a href="#状态管理" class="hash-link" aria-label="Direct link to 状态管理" title="Direct link to 状态管理">​</a></h2><p>状态管理也是构建前端应用中很重要的一部分,我们都知道 react 应用会形成一个组件树,参数只能在这个组件树上从上到下流动(当然也有一些办法可以完成子组件到父组件的通信),如果没有一个全局的状态管理器的话,假设我们需要从树的一个子组件传递参数到它的兄弟节点,我们得遵循:子组件-&gt;父组件-&gt;子组件的顺序传递参数,这种写法无疑是非常冗长的</p><p>redux / mobx 被提出用于解决这个问题</p><p><img loading="lazy" alt="img" src="/cs-engineering/assets/images/react-3-6e16b11541c1f66ebdd44ab28f0ca65c.png" width="468" height="373" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redux">redux<a href="#redux" class="hash-link" aria-label="Direct link to redux" title="Direct link to redux">​</a></h3><p>redux 的设计模式类似于发布-订阅模式,所有全局数据&amp;逻辑被保存在一个对象中,用户使用 action 修改对象内的状态,当对象内状态发生改变时,redux 会告知订阅者状态发生了改变</p><p>redux 主要有以下几个核心概念:</p><ol><li>action:包含 type 属性和 payload 属性,描述动作相关信息</li><li>reducer:定义如何响应不同的 action</li><li>store:管理 action 以及 reducer,提供以下功能<ol><li>监听 action 的分发(dispatch(action))</li><li>支持订阅 store 的变更(subscribe(listener))</li><li>由于 redux 对 store 状态的变更都是通过 action 触发,对于异步任务,我们需要引入 redux-thunk 等插件来保证不将业务或者数据相关的任务混入 react 组件中</li></ol></li></ol><p><img loading="lazy" alt="img" src="/cs-engineering/assets/images/react-4-3d6cc1dbc05199f7fdbd733e15e686e5.png" width="907" height="301" class="img_ev3q"></p><p>另外我们还可以关注一下 redux-toolkit,这是 redux 官方推出的为了简化 redux 使用的一个库,在 redux-toolkit 中,我们可以简单的通过 useSelector()获取 store 中的数据,通过 useDispatch(action)来修改 store 中的数据</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mobx">mobx<a href="#mobx" class="hash-link" aria-label="Direct link to mobx" title="Direct link to mobx">​</a></h3><p>mobx 则是利用 es6 的 proxy 来追踪属性,通过隐式订阅,自动追踪被监听的对象变化</p><p>相对于 redux,我个人认为 mobx 最大的优点是实现了数据局部更新</p><p>就使用上来说,你可以通过 mobx 的 useObserver()或<code>&lt;Observer/&gt;</code>来局部监听数据变化,</p><p>而对应到 redux-toolkit 上来说,每次 useSelector 的数据的变化都会引起当前组件的刷新</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clean-code">clean code<a href="#clean-code" class="hash-link" aria-label="Direct link to clean code" title="Direct link to clean code">​</a></h2><blockquote><p><a href="https://github.com/ryanmcdermott/clean-code-javascript" target="_blank" rel="noopener noreferrer">https://github.com/ryanmcdermott/clean-code-javascript</a></p><p>好的编程远不止是掌握语言的机制。最重要的是，需要记住程序员创建程序是为其他人将来阅读的。好的程序反映了问题陈述及其中的重要概念，它带有简洁的自我描述。示例说明了此描述，并将其与需要解决的问题联系起来。这些示例还确保未来的读者知道代码的工作原理和方式。</p></blockquote><p>这一部分是对于代码格式的一些建议,包括但不仅限于变量命名,函数命名,注释格式等</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="变量">变量<a href="#变量" class="hash-link" aria-label="Direct link to 变量" title="Direct link to 变量">​</a></h3><ol><li>使用 meaningful 的变量名</li></ol><p>bad: <code>const yyyymmdstr = moment().format(&quot;YYYY/MM/DD&quot;);</code></p><p>good: <code>const currentDate = moment().format(&quot;YYYY/MM/DD&quot;);</code></p><ol><li>不要使用 magic number</li></ol><p>bad:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// What the heck is 86400000 for?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setTimeout(blastOff, 86400000);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>good:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Declare them as capitalized named constants.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const MILLISECONDS_PER_DAY = 60 * 60 * 24 * 1000; //86400000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setTimeout(blastOff, MILLISECONDS_PER_DAY);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>使用易于理解的变量名(在 forEach 等中)</li></ol><p>bad:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[1,2,3,4].forEach(i =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>good:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[1,2,3,4].forEach(item =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // replace item with other meaningful name related to origin array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>如果你的 class/object 名表明了一些事情,不要在变量名中重复</li></ol><p>bad:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const Car = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    carColor:&quot;blue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>good:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const Car = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color:&quot;blue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>在函数中使用 default parameters</li></ol><p>bad:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function tutorialExample(param) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const tmpParam = param || &quot;default param&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>good:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function tutorialExample(param = &quot;default param&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="函数">函数<a href="#函数" class="hash-link" aria-label="Direct link to 函数" title="Direct link to 函数">​</a></h3><ol><li>限制函数的参数在两个及以下，当参数数量过多时，将他们写在一个对象里</li><li>一个函数只能做一件事情，在函数中尽可能避免 if 等条件语句</li><li>函数的名字应该说明这个函数的用处</li><li>尽可能减少重复的代码，提高函数的可复用性</li><li>尽可能避免 Side Effects，一个函数应当尽可能<strong>只做到接受一个值并返回一个值</strong></li></ol><p>Bad:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Global variable referenced by following function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If we had another function that used this name, now it&#x27;d be an array and it could break it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let name = &quot;Ryan McDermott&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function splitIntoFirstAndLastName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = name.split(&quot; &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">splitIntoFirstAndLastName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(name); // [&#x27;Ryan&#x27;, &#x27;McDermott&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const addItemToCart = (cart, item) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cart.push({ item, date: Date.now() });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Good:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function splitIntoFirstAndLastName(name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return name.split(&quot; &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const name = &quot;Ryan McDermott&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const newName = splitIntoFirstAndLastName(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(name); // &#x27;Ryan McDermott&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(newName); // [&#x27;Ryan&#x27;, &#x27;McDermott&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const addItemToCart = (cart, item) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return [...cart, { item, date: Date.now() }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考">参考<a href="#参考" class="hash-link" aria-label="Direct link to 参考" title="Direct link to 参考">​</a></h2><p>如果你在配置本文涉及到的插件时遇到问题，可以参考<code>https://github.com/biu9/sample-react-app</code>这个仓库的配置</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/frontend/frame/react.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cs-engineering/docs/category/框架"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">框架</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cs-engineering/docs/frontend/frame/vue"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vue</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#react-及其生态简介" class="table-of-contents__link toc-highlight">react 及其生态简介</a></li><li><a href="#初始化代码环境" class="table-of-contents__link toc-highlight">初始化代码环境</a><ul><li><a href="#eslint" class="table-of-contents__link toc-highlight">eslint</a></li><li><a href="#husky" class="table-of-contents__link toc-highlight">husky</a></li><li><a href="#jest" class="table-of-contents__link toc-highlight">jest</a></li></ul></li><li><a href="#css-预处理器" class="table-of-contents__link toc-highlight">css 预处理器</a><ul><li><a href="#less" class="table-of-contents__link toc-highlight">less</a></li><li><a href="#tailwind" class="table-of-contents__link toc-highlight">tailwind</a></li></ul></li><li><a href="#react-query" class="table-of-contents__link toc-highlight">react-query</a></li><li><a href="#状态管理" class="table-of-contents__link toc-highlight">状态管理</a><ul><li><a href="#redux" class="table-of-contents__link toc-highlight">redux</a></li><li><a href="#mobx" class="table-of-contents__link toc-highlight">mobx</a></li></ul></li><li><a href="#clean-code" class="table-of-contents__link toc-highlight">clean code</a><ul><li><a href="#变量" class="table-of-contents__link toc-highlight">变量</a></li><li><a href="#函数" class="table-of-contents__link toc-highlight">函数</a></li></ul></li><li><a href="#参考" class="table-of-contents__link toc-highlight">参考</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 浙江大学启真交叉学科创新创业实验室, Inc.</div></div></div></footer></div>
<script src="/cs-engineering/assets/js/runtime~main.cc607e59.js"></script>
<script src="/cs-engineering/assets/js/main.d643dc48.js"></script>
</body>
</html>