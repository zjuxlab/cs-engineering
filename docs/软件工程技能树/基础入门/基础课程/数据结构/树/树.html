<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-软件工程技能树/基础入门/基础课程/数据结构/树/树" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">树 | CS-Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="树 | CS-Engineering"><meta data-rh="true" name="description" content="Author：刘心源"><meta data-rh="true" property="og:description" content="Author：刘心源"><link data-rh="true" rel="icon" href="/cs-engineering/img/xlab-logo.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树" hreflang="zh"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cs-engineering/blog/rss.xml" title="CS-Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cs-engineering/blog/atom.xml" title="CS-Engineering Atom Feed"><link rel="stylesheet" href="/cs-engineering/assets/css/styles.58f2b0f0.css">
<link rel="preload" href="/cs-engineering/assets/js/runtime~main.e29adf2c.js" as="script">
<link rel="preload" href="/cs-engineering/assets/js/main.20ce48b1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cs-engineering/"><div class="navbar__logo"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cs-engineering/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CS-Engineering</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs-engineering/docs/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">知识空间</a><a class="navbar__item navbar__link" href="/cs-engineering/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cs-engineering/docs/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">新人必看：CS工程指南介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cs-engineering/docs/软件工程技能树/软件工程技能树">软件工程技能树</a><button aria-label="打开/收起侧边栏菜单「软件工程技能树」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础入门">基础入门</a><button aria-label="打开/收起侧边栏菜单「基础入门」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/基础课程">基础课程</a><button aria-label="打开/收起侧边栏菜单「基础课程」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/数据结构">数据结构</a><button aria-label="打开/收起侧边栏菜单「数据结构」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树">树</a><button aria-label="打开/收起侧边栏菜单「树」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/线段树/线段树">线段树</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/可持久化数据结构/可持久化数据结构">可持久化数据结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/动态树/动态树">动态树</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/KD树/K-D树">K-D树</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/图/图">图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/基础算法/基础算法">基础算法</a><button aria-label="打开/收起侧边栏菜单「基础算法」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/计算机网络/计算机网络">计算机网络</a><button aria-label="打开/收起侧边栏菜单「计算机网络」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/操作系统/操作系统">操作系统</a><button aria-label="打开/收起侧边栏菜单「操作系统」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/计算机组成原理/计算机组成原理">计算机组成原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据库/数据库">数据库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/面向对象语言OOP/面向对象语言 OOP">面向对象语言 OOP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/Git与GiteeGithub/Git 与 Gitee/Github">Git 与 Gitee/Github</a><button aria-label="打开/收起侧边栏菜单「Git 与 Gitee/Github」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/常见工具/常见工具">常见工具</a><button aria-label="打开/收起侧边栏菜单「常见工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/构建工具/构建工具">构建工具</a><button aria-label="打开/收起侧边栏菜单「构建工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/设计模式/设计模式">设计模式</a><button aria-label="打开/收起侧边栏菜单「设计模式」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/正则表达式Regex/正则表达式 Regex">正则表达式 Regex</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/Linux入门/Linux 入门">Linux 入门</a><button aria-label="打开/收起侧边栏菜单「Linux 入门」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/代码规范/代码规范">代码规范</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/虚拟化/虚拟化">虚拟化</a><button aria-label="打开/收起侧边栏菜单「虚拟化」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/基础入门/杂项常识/杂项常识">杂项常识</a><button aria-label="打开/收起侧边栏菜单「杂项常识」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/前端技术/前端技术">前端技术</a><button aria-label="打开/收起侧边栏菜单「前端技术」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/后端技术/后端技术">后端技术</a><button aria-label="打开/收起侧边栏菜单「后端技术」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/运营维护/运营维护">运营维护</a><button aria-label="打开/收起侧边栏菜单「运营维护」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/开发工具/开发工具">开发工具</a><button aria-label="打开/收起侧边栏菜单「开发工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/docs/软件工程技能树/进阶技术/进阶技术">进阶技术</a><button aria-label="打开/收起侧边栏菜单「进阶技术」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/docs/软件科研技能树/软件科研技能树">软件科研技能树</a><button aria-label="打开/收起侧边栏菜单「软件科研技能树」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cs-engineering/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/软件工程技能树/软件工程技能树"><span itemprop="name">软件工程技能树</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/软件工程技能树/基础入门/基础入门"><span itemprop="name">基础入门</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/基础课程"><span itemprop="name">基础课程</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/数据结构"><span itemprop="name">数据结构</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">树</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>树</h1><p>Author：刘心源</p><p>部分内容参考（直接复制）自清华的课件</p><blockquote><p>什么？你问学这个有什么用？
OI都有用，这个为啥没用x
<a href="https://www.luogu.com.cn/blog/user3296/ji-qi-xue-xi-zhong-di-oi" target="_blank" rel="noopener noreferrer">机器学习中的 OI</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="线段树">线段树<a href="#线段树" class="hash-link" aria-label="线段树的直接链接" title="线段树的直接链接">​</a></h2><p><img loading="lazy" src="/cs-engineering/assets/images/IqabbgkPcoXY1ZxxbP7chF6rnPh-7b4168ef28370b59110b6b96edffadee.png" width="1202" height="484" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="平衡树">平衡树<a href="#平衡树" class="hash-link" aria-label="平衡树的直接链接" title="平衡树的直接链接">​</a></h2><p>全称“平衡二叉搜索树”，常见的类型有：</p><p>1.splay</p><p>2.treap</p><p>3.AVL Tree</p><p>4.Red Black Tree</p><p>5.Scape Goat Tree</p><del>6.珂朵莉树（并不是）</del><p>嗯，就像名字一样，它就是一棵二叉搜索树，但是我们使用一些方法使得整棵树<b>尽量</b>平衡</p><p>其实我觉得ads会讲这个<del>，而且这种等级的数据结构正常语言都会提供写好的库吧</del></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="旋转">旋转<a href="#旋转" class="hash-link" aria-label="旋转的直接链接" title="旋转的直接链接">​</a></h4><p>是平衡树的核心操作，我们通过旋转，在保证二叉搜索树性质的同时，改变树的结构。一般情况下，我们是通过旋转来改变父子关系，即把一个儿子变成他父亲的父亲。</p><p>其实这里本来是要有动图的，但是飞书文档好像不支持GIF，所以借用一下wiki的图。</p><p><img loading="lazy" src="/cs-engineering/assets/images/TdrsbJshIoa068x4fhicbVK9nnf-2fa13bdb67c1983eaa2b30cabe986ceb.png" width="1064" height="356" class="img_ev3q"></p><p>上图就是对x进行右旋的结果，左旋就是对称一下。不难发现，这样的旋转不会改变二叉搜索树的性质。</p><p><img loading="lazy" src="data:image/png;base64,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" width="426" height="180" class="img_ev3q"></p><p>如上图，我们先对x实施左旋，再实施一下右旋，就变成了右图的情况。嗯，非常神奇地平衡了（并不是这个原理哦</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="splay">Splay<a href="#splay" class="hash-link" aria-label="Splay的直接链接" title="Splay的直接链接">​</a></h3><p>就像名字一样，splay每次对一个节点进行操作的时候通过一种方法（splay）把这个点旋转至根。splay的意思就是把节点x不断地向上旋转。</p><p>splay的核心就是splay，splay的核心是rotate（旋转），旋转分为单旋和双旋，除此之外就没了，非常地简单。</p><p>比如插入，就是把一个点按照BST的方式插入，再把这个点splay到根节点。</p><p>比如删除，非常地暴力，把左子树的最大点splay到根，再把右子树接上去。</p><p>Splay具有“自适应性”，大概就是说splay会根据操作的特点调整树结构，使得操作尽可能高效。</p><p>关于splay有一个“动态最优性”的猜想，就是说splay splay的时间和它最优算法的搜索时间是同级的。这个问题Tarjan老爷子最近就在带着搞（真·最近）<a href="https://arxiv.org/abs/1907.06310" target="_blank" rel="noopener noreferrer">arxiv.org</a>。国内好像也有人在搞，总之这个问题特别火</p><p>可以通过势能分析证明splay的复杂度是均摊 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> 的，也就是说splay在很多次操作中可能会有一次<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>复杂度的操作。</p><p>除此之外，splay自身常数比较大，所以实际应用中使用treap可能会更好？（我不知道啊，我打OI的时候一直写splay）</p><p>就我个人的测试来说，treap略优于splay，被树状数组暴打（你问树状数组怎么实现平衡树？纯纯黑科技，没啥用。而且实现起来非常丑，理论时间复杂度多了个log。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="treap">Treap<a href="#treap" class="hash-link" aria-label="Treap的直接链接" title="Treap的直接链接">​</a></h3><p>Treap=Tree+heap，每个点额外随机分配一个权值，使treap同时满足堆性质（随机权值）和二叉搜索树性质（key）</p><p>嗯，是CS的标准命名方式（</p><p>设每个节点的关键字是key，随机权值是rand，则我们要求</p><p>1.如果v是u的左儿子，则key<!-- -->[v]<!-- --> <!-- -->&lt;<!-- --> key<!-- -->[u]</p><p>2.如果v是u的右儿子，则key<!-- -->[v]<!-- --> <!-- -->&gt;<!-- --> key<!-- -->[u]</p><p>3.如果v是u的子节点，则rand<!-- -->[u]<!-- --> <!-- -->&gt;<!-- --> rand<!-- -->[v]</p><p>插入一个节点时，先给这个节点分配一个随机的堆权值。然后把这个节点按照bst的规则插入到一个叶子上。然后通过旋转来调整，使得treap满足堆性质。比如插入的右儿子的权值小于当前点了，就要左旋；插入的左儿子的权值小于当前点了，就要右旋。（不明白的可以看上面的图片</p><p>删除和普通的BST删除一样，若当前节点数值的出现次数大于 1 ，则减一（通常将同一个权值缩掉）。如果当前节点数值的出现次数等于 1 ，则通过旋转调整到叶子节点，进行删除。</p><p>时间复杂度的话，由于我们这棵树满足堆的性质，而堆的权值又是随机的，因此是期望<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="树套树">树套树<a href="#树套树" class="hash-link" aria-label="树套树的直接链接" title="树套树的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="range-tree">Range tree<a href="#range-tree" class="hash-link" aria-label="Range tree的直接链接" title="Range tree的直接链接">​</a></h3><p>狭义的树套树，就是一层树套了一层树</p><p>对于树的每个节点，再开一棵该点和他的所有子孙节点的树。</p><p><img loading="lazy" src="/cs-engineering/assets/images/J1V8b7PuaocaOFxTsU7chsVJnUk-00de2608e9e5b672c0e402133d7bb178.jpeg" width="808" height="400" class="img_ev3q"></p><p>能在<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>d</mi></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log^d n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>的复杂度内进行一次d维偏序的区间查询和d维偏序的单点修改。</p><blockquote><p>偏序：A relation R on a set S is called a partial ordering or partial order if it is reflexive, antisymmetric, and transitive.</p></blockquote><p>上面那段是从离散数学的课本上抄下来的，展开来说，每个点<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span>有<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo separator="true">,</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">a_i,b_i,\dots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span></span></span></span></span>等不同的属性，每次对满足多维的一个限制的所有数进行操作，即每次对满足<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>l</mi><mi>a</mi></msub><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><mtext> </mtext><msub><mi>r</mi><mi>a</mi></msub><mo separator="true">,</mo><msub><mi>l</mi><mi>b</mi></msub><mo>≤</mo><mtext> </mtext><msub><mi>b</mi><mi>i</mi></msub><mtext> </mtext><mo>≤</mo><mtext> </mtext><msub><mi>r</mi><mi>b</mi></msub><mo separator="true">,</mo><mtext> </mtext><mo>…</mo></mrow><annotation encoding="application/x-tex">l_a\leq a_i\leq r_a,l_b\leq b_i \leq r_b, \dots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"> </span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"> </span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord"> </span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"> </span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"> </span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span></span></span></span></span>的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span>进行操作。这里的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo></mrow><annotation encoding="application/x-tex">\leq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≤</span></span></span></span></span>指的是任意的满足“偏序”定义的关系，简单起见，可以当做普通的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo></mrow><annotation encoding="application/x-tex">\leq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≤</span></span></span></span></span>来理解。</p><p>空间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mrow><mi>d</mi><mo>−</mo><mn>1</mn></mrow></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log^{d-1}n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，可以优化到<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mrow><mo fence="true">(</mo><mi>n</mi><msup><mrow><mo fence="true">(</mo><mfrac><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow><mrow><mi>log</mi><mo>⁡</mo><mi>log</mi><mo>⁡</mo><mtext> </mtext><mi>n</mi></mrow></mfrac><mo fence="true">)</mo></mrow><mrow><mi>d</mi><mo>−</mo><mn>1</mn></mrow></msup><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">O\left(n\left(\frac{\log n}{\log\log n}\right)^{d-1}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em">g</span></span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em">g</span></span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mord mtight"> </span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.4461em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em">g</span></span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size2">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.389em"><span style="top:-3.6029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="高维树状数组">高维树状数组<a href="#高维树状数组" class="hash-link" aria-label="高维树状数组的直接链接" title="高维树状数组的直接链接">​</a></h3><p>本质就是树状数组的嵌套，支持单点修改，查询k维前缀和 </p><p>设每一维的值域大小为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span></span></p><p>时间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>d</mi></msup><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log^dv)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mclose">)</span></span></span></span></span>，空间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>v</mi><mi>d</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(v^d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。</p><p>可以通过预先高维离散化来做到时间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>d</mi></msup><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log^dv)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mclose">)</span></span></span></span></span>，空间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>d</mi></msup><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log^dv)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mclose">)</span></span></span></span></span>，其实没啥意义。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="树状数组套平衡树">树状数组套平衡树<a href="#树状数组套平衡树" class="hash-link" aria-label="树状数组套平衡树的直接链接" title="树状数组套平衡树的直接链接">​</a></h3><p>终于，我们进入了真正的树套树！（一个典型的函数化数据结构</p><p>我们先看一下树状数组，树状数组支持：</p><p>1.把x位置的值加上y</p><p>2.查询一个区间的和</p><p>而我们现在需要一个东西，它要支持：</p><p>1.把x位置的值改为y</p><p>2.查询一个区间中小于y的数个数</p><p>树状数组支持单点修改区间查询，所以这个新的要求外层应该是树状数组。</p><p>普通树状数组内部用到的数据结构：支持修改值，查询值——变量，所以普通的树状数组可以用一个数组来维护。</p><p>我们新的要求内部用到的数据结构：支持插入一个值，查询小于一个值的数个数——平衡树。</p><p>所以我们需要的东西 可以用一个平衡树的数组维护。</p><p>所以只需要先写一个平衡树，然后写个树状数组就行了！</p><p>其他的树套树都可以按照树状数组套平衡树的实现方法来实现，即将内部的树看做一个和外部树独立的数据结构</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="comparison">Comparison<a href="#comparison" class="hash-link" aria-label="Comparison的直接链接" title="Comparison的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="树状数组套树">树状数组套树<a href="#树状数组套树" class="hash-link" aria-label="树状数组套树的直接链接" title="树状数组套树的直接链接">​</a></h4><p>优势：好写！（树状数组永远滴神）常数小</p><p>劣势：只能维护支持减法的信息</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="套平衡树">套平衡树<a href="#套平衡树" class="hash-link" aria-label="套平衡树的直接链接" title="套平衡树的直接链接">​</a></h5><p>时间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log^2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1484em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，空间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><p>优势：空间复杂度极其优秀</p><p>劣势： 平衡树没有简单的可以在多个平衡树上二分的方法，区间kth这种询问会多一个log</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="套trie">套Trie<a href="#套trie" class="hash-link" aria-label="套Trie的直接链接" title="套Trie的直接链接">​</a></h5><p>（OI里面可能常称为权值线段树，lxl曾因为这个叫法和其他人吵过很长时间x</p><p>时间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n \log v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mclose">)</span></span></span></span></span>，空间复杂度<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n\log v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mclose">)</span></span></span></span></span></p><p>优势：可以简单地在多个Trie上二分</p><p>劣势：空间复杂度（这个其实也可以优化）</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="线段树套树">线段树套树<a href="#线段树套树" class="hash-link" aria-label="线段树套树的直接链接" title="线段树套树的直接链接">​</a></h4><p>优点：可以维护不支持减法的信息</p><p>缺点：相对难写，慢，空间大</p><p>套平衡树和套Trie的时空复杂度和上面一样</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="平衡树套树">平衡树套树<a href="#平衡树套树" class="hash-link" aria-label="平衡树套树的直接链接" title="平衡树套树的直接链接">​</a></h4><p>优点：可以在线支持第一维插入的问题</p><p>缺点：更难写，更慢</p><p>套平衡树和套Trie的时空复杂度和上面一样</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b树套树">B树套树<a href="#b树套树" class="hash-link" aria-label="B树套树的直接链接" title="B树套树的直接链接">​</a></h4><del>没搞过，据说很快</del><h2 class="anchor anchorWithStickyNavbar_LWe7" id="分块科技">分块科技<a href="#分块科技" class="hash-link" aria-label="分块科技的直接链接" title="分块科技的直接链接">​</a></h2><p>这是树（确信</p><p>可这真的是树</p><p>我也不知道为啥写着写着写到这里来了，但是分块比树更practical！所以呆胶布！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="分块基础">分块基础<a href="#分块基础" class="hash-link" aria-label="分块基础的直接链接" title="分块基础的直接链接">​</a></h3><p>分块的本质就是我们维护一棵每个节点度数为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span></span></span></span></span>的三层的树，每个节点维护的信息是它的子节点的共同信息。</p><p><img loading="lazy" src="/cs-engineering/assets/images/YbUKbG3AJoUJFyxIVVvcE6q8nPh-7554d8716838592f0cfc2e7d9aba41be.png" width="888" height="280" class="img_ev3q"></p><p>每次修改最多只用更新<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span></span></span></span></span>个size为1的节点（我们一般称之为零散块）以及<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mtext> </mtext></msqrt><mi>n</mi></mrow><annotation encoding="application/x-tex">\sqrt n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2395em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8005em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"> </span></span><span style="top:-2.7605em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2395em"><span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span></span></span>个size为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span></span></span></span></span>的节点（即整块），查询时只需要查询我们所需要的节点和它的父节点所维护的信息。（区间修改单点查询的情况下）</p><p>注意到我们不用维护那个size为n的根节点的信息。</p><p><img loading="lazy" src="/cs-engineering/assets/images/Qc3ib7gF2oQHonxoP9OcmCwXnGb-300feec22c35b34e164518a648d2e274.png" width="885" height="303" class="img_ev3q"></p><p>经常与分块进行比较的是分治，上面那些线段树之流就是典型的分治数据结构，它把一个问题分成两个性质相同规模更小的子问题，并合并两个子问题的解来得到原来的解。因此，分治数据结构要求信息可以进行快速合并，即合并信息的时间复杂度不能高于求解子问题的时间复杂度。</p><p>而如果在分治结构上很难快速合并信息，我们就可以使用分块。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="动态分块">动态分块<a href="#动态分块" class="hash-link" aria-label="动态分块的直接链接" title="动态分块的直接链接">​</a></h3><p>（我也不知道这一部分起啥标题好</p><p>分块能做到一件很神奇（？）的事情，就是它的修改和查询的时间复杂度是不同的</p><blockquote><p>维护一个序列，支持：
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>单点修改，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>区间和</p></blockquote><p>分块维护块内和，每次修改的时候更新块内和以及该位置在数组上的值。</p><p><img loading="lazy" src="data:image/png;base64,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" width="707" height="140" class="img_ev3q"></p><p>查询时分别查询整块和离散块的值。</p><p><img loading="lazy" src="data:image/png;base64,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" width="707" height="131" class="img_ev3q"></p><blockquote><p>维护一个序列，支持：
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>单点修改，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>区间和</p></blockquote><p>分块维护块内前缀和和块外前缀和，也就是说维护每个块块内前x个数的和，以及维护前x个块的和。</p><p>更新的时候分别更新这两个前缀和。</p><p><img loading="lazy" src="data:image/png;base64,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" width="706" height="129" class="img_ev3q"></p><p>查询时把这两个前缀和拼起来</p><p><img loading="lazy" src="data:image/png;base64,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aWRkRENDQ5qYmLAtu7CwUA6H42uRK9k/O+fNmyeHw5GRmT3VvSJTs5OZbV9uJmf2/5+dzOz05UrS6OioYrFYRmbnF2Ysxp988onq6+vndFNfVVpaKo/Ho23btn15bXJyUmfPntXp06dty128eLG8Xq+2bNmScL2vr091dXXy+/22Za9du1Yej0crV6788looFFJ9fb2uXr1qW+66devk8XhUUVGRcP3mzZuqr69XZ2enbdkvvviiPB5Pwpvx888/V11dne7evWtb7ne/+115vV4VFBQkXB8eHtYHH3ygs2fP2pZdXl4uj8ej9evXJ+TW19fr008/tS23oqJCXq9XVVVVCde7u7tVV1enGzdu2JZdXV0tr9erJUuWfHktEAiovr5ezc3NtuVu3bpVXq9XpaWlCdevX7+uuro6hUIh27L37dsnr9ebcCP/97//rbq6OoXDYdtyPR6PvF5v0vVPP/1UdXV1tuW6XC55vd6MzGyPx6OtW7cmXO/r61N9fb2uXLliW3amZnZVVZW8Xm/SzG5ra1NdXZ2tM3vXrl3av3+/CgsLv7yWjpn94osvav/+/VPO7A8//FAff/yxbdkrVqyQx+PRhg0bEnLTca/wer1at25dwvXu7m7V19erqanJtuzNmzfL6/Vq6dKlSbl23yv279+vxYsXJ1z/Ymb39vbalr1nzx59//vfT/rw9SXjMSYnJ423337bkGTb/yorK42//OUvCbnj4+PGW2+9ZWvut771LaO2tjbpNX/++efGwYMHbc3+3ve+Z1y8eDEht6WlxXjttddszfV6vcbly5eTXvPf/vY3Y8uWLbZmv/nmm0ZfX19C7nvvvWds3rzZ1txf/OIXRiQSSXrN/f39xs9//nNbs6urq41Tp04l5IbDYeONN96wNXfr1q1GXV1d0mtuaGgwPB6PrdkHDhwwWltbE3IvXLhg7N2719bcgwcPGjdv3kx6zT6fz1i9erWt2W+99ZYxMTGRkHv06FFj1apVtua+/fbbSa93cnLS+M1vfmNrbmVlpXH06NGE3Hg8bvz617+2NXfNmjWGz+dLes3pmNl79+6dcmYfOHDA1lyPx2M0NDQkvea6ujpj69attma/8cYbSTP71KlTts/sn/3sZ0Y0Gk16zf39/cYvf/lLW7M3b95svPfeewm54XDY9nvFli1bjPfffz/pNV++fNnwer22Zv/whz80WlpaEnIvXbpk7Nu3z9bcAwcOTDmzjx8/bqxZs8bW7F/96ldJM/urOGMMAAAAaBZHKb4qLy9Pbrc76ceVZhiGoUAgoO7u7lmvyc/Pl9vtlsvlSmuuJD3xxBNyu91asGCB5ezh4WEFAgH19fV97XMlacmSJXK73Unn2syIRCIKBAKKxWKzXrN06VK53W5lZ5t6W6acK0kOh0Nut1vFxcWWs8fHxxUIBNTT05PW3Hg8rkAgoPv375tat2jRIrnd7qQfWZrx8OFDBQIBRaPRtOY+ePBAgUBAAwMDptYtX75cbrd7+h+hzUI4HFYgENDIyIip3BUrVljOlB796D4QCJg60zpXM7u7u1uBQGDWazI5s4vmzVPZ/GwtyLL+vc+IYejexLj6J2d/zjHTM3vFihVpn52ZnNmFhYVyu90qKSmxnJ3Jmd3d3W0qV5JKSkq0YsWK/8qZbSVXksrKyrRixYq0zmxT7+bi4mK9+uqreuWVVyxtTnp0Fs3n8+nYsWOzXlNSUqJXX31VL7/8suXc8fFx+Xw+nThxwtS6yspK1dTU6Nvf/rbl7Lt378rn85k6V7p69WrV1NTo6aeftpzb2dkpn8+nc+fOmVq3bds21dTUaOHChZazL126JJ/Pp/b29lmv2b59u2pqauR0Oi3nXrhwQT6fT7du3TK1bunSpTpw4IB27txpOXtwcFA+n0+nTp2a9ZqysjIdPHhQ27dvt5wbjUZVW1ur999/39S6qqoq1dTUqLy83HJ2S0uLamtrTZ3JX79+vWpqauR2uy3nNjc3y+fz6Z///Kepdc8//7xqampSupGfOXNGPp9PwWBw1mt27dqlQ4cOpTTc//73v8vn85n6AFRcXKwf/OAH2r17t+XciYkJHTt2TLW1tbNeM1czu7a2VsePHze17snsHP1PoVNPZefO/ORpdE+M63+HHuj86Ox/4WquZnZtba0+++wzU+u2bt2qQ4cOpTSzGxoa5PP51NbWNus127Zt06FDh1Ka2RcvXpTP51NHR4epdcuWLdOBAwf0ne98x3L24OCgjh07ppMnT856TVlZmX70ox9px44dlnOj0aiOHTtm6l4hPTrrfujQoaQz52a0traqtrbW1Jn8qqoqHTp0KKUP9y0tLfL5fKbP5D/33HP68Y9/nPRLemacPXtWR48enfXMNnV3KCgo0Pr167V3715Lm5MeFeOLFy+aWlNYWKgNGzaklBuPx3XhwgXT61wul7Zv355SYWptbdWZM2dMrSktLdWOHTtSKkzNzc36xz/+YXpdeXm5XnrppZS+7RkbGzNd1CoqKvTSSy+l9A3A8PCw6WEjSUVFRdq0aVNK77G+vj7TH0IWLlyozZs3p5QbCoVM50qPPgw899xzKX3oW7hwoT788ENLuU899ZTlXKfTqQ8++MD0ulWrVmnv3r0pFePe3l7T35xUVlZq7969KRXjnp4e07lzMbMnJibU0NCQ9tx4PK5Lly6ZXlcyb76qc/O1LTd/5idPo208rs9MlGLp0b1iLma22XuFNDczOx6Pm56d5eXlevnll1P69nR0dNTSzHY6nXMys8+fP29qTVFR0ZzMbLO50n9m59q1ay1nFxcX66OPPjKd+/zzz6c0s4uKiizN7JUrV2rPnj0pzey+vr6EXyKdCWeMAQAAAFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAEkUYwAAAEASxRgAAACQRDEGAAAAJFGMAQAAAElStpknj46O6vbt2/L7/ZYDJycnde/ePVNrRkZGUs6Nx+MKBoOm1w0MDKilpUU5OTmWs+/cuaP+/n5LufPnz7ece+vWLUUiEdPrent71djYqCeeeMJydnt7u2KxmKk19+/fV2Njo4qKilLKHRoaMr1uaGhI7e3tKb3HBgYG1Nvba2pNLBZTW1tbSrmRSMR0riT19/erqanJ9N/TV7W0tGhgYMBS7oMHD9KaK0nBYFB+v1/Z2aZGX4Lbt29rdHTU1Jp79+7J7/crKysrrblzMbMnJiZMz+y5yLU6sx9MTqotPqbcFP6su8bjikxOmFrz3z6z29raTM/O3t5e/etf//qvndnRaFT37983tWauZrbZ3C/WNTU1Wfrz+kJzc7Pp2RmJRHT9+vWUZnZra6sGBwdNrwsGg7p69WrK/67MzE5Td4doNKp3331XV65cMb2xLxiGoba2NlNrIpGI/vrXv6qhoSGl3Js3b5pe19HRoT/+8Y8qLi62nP3w4UPTr7mtrU1HjhxJadA9fPjQ0mu+cuWKotGocnNzLWf39vaavqk1NDQoEomk9CHk/v376unpMb0uGAzqxIkTOnv2rOXseDxu+s/73r17On78uM6cOWM5d2xszNLf840bN/TOO+9owYIFlrOj0aja29tNrWlqatLvfvc7ORwOy7mRSEQdHR2m1507d073799PqaB2d3ebLi+fffaZpfflVwUCAUWjUVNrotGoTp48mdJN3MrM7u/v17vvvqvLly+nNVeS7ozH5YsN6okR6zfS2OSkOsbjpta0t7dndGYPDAykPLPNfgC6fPmyotFoyjPbygegnp4enThxQp988onl7LGxMdPzKxgM6vjx4/r4449TyrXy3m5ubtbvf//7lGe22eympia98847Kc9ss3/WknT+/HmFw+GUZ7aZLydNFeOhoSFdu3ZN165dM72xVMRiMTU2NqqxsTGtuZIUCoUUCoW+MbnSo2+479y5843JlaTBwcGUyoNVAwMDKX3QTEUwGLR0Q0rVvXv3TN+A50p7e7ul4ZyqtrY2SzfCVGVqZg8NDWVsZvdNTqhvzNy3vXMhkzO7s7NTnZ2dac/N9My+evVq2nMHBgYycq+QMjezM5UrPfpy0sqXIKngjDEAAACgWXxjXFVVpddee822DSxZskQVFRUJ17KysrR+/Xpbc5ctW5aUK0lOp1M7duzQxIR93zhs3LhRixYtSsrduXOnbZmStGnTJpWUlCRdX7ZsmXbv3q3Kykrbsjdv3pz0Y77ly5drz549WrNmjW25mzZtmvLHi7m5udq0aZOt77GVK1eqrKwsKbe6utrW3MrKSi1btizp+qJFi/TCCy/I6XTalr1z586k/3+Xy6Vdu3al9CNmK7mSVFFRIa/Xm/IxhsdZv3590o/5nnzySXm9Xktnv2erqqpq2uuZmNnr1q37Rs5swzBsy33mmWeScqX/zOxVq1bZlj3VzC4rK0vLzJ7qaEZubq6eeeaZjMxsu+8Vq1atSsqVpJKSEr3wwgspHZ2YyY4dO5Jm5xe5qZwdn8nOnTunfF3l5eXyeDy2zuwNGzY89mhGljHDv+pwOKxwODznG/tCTk6OXC6XFi5cmHA9FAqpr6/Pttzc3Fy5XK6kv/ixsTGFw2FLh8Rny+FwyOVyqaCgICE3FAqldLjdSq706FxbOBzWyMiIbdnFxcVyuVwJB+gfPnyoUChk+heKUs2VHv1CUTgctvSLLrOVl5en0tLShH/86cjNz8+Xy+VKGjojIyMKhUIp/bLdTJxOp0pLSxNuqMPDwwqHw7bmFhUVyeVyJd3IBwcHFQqFFI+bOy9qxqJFi1RaWppwbWBgQOFw2NZcl8sll8uVdD0TM9swDIXDYVtndk5OjkpLS5nZYmbbJS8vTy6XK6EoMrPTlytlbmZ/1YzFGAAAAPgm4IwxAAAAIIoxAAAAIIliDAAAAEiiGAMAAACSKMYAAACAJIoxAAAAIIliDAAAAEiiGAMAAACSKMYAAACAJIoxAAAAIIliDAAAAEiS/g/b7CyNP6ZQXQAAAABJRU5ErkJggg==" width="710" height="138" class="img_ev3q"></p><blockquote><p>维护一个序列，支持：
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>区间加，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>查单点</p></blockquote><p>和第一个例子一样，修改查询反过来</p><p><img loading="lazy" src="data:image/png;base64,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" width="701" height="131" class="img_ev3q"></p><p><img loading="lazy" src="data:image/png;base64,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aWRkRENDQ5qYmLAtu7CwUA6H42uRK9k/O+fNmyeHw5GRmT3VvSJTs5OZbV9uJmf2/5+dzOz05UrS6OioYrFYRmbnF2Ysxp988onq6+vndFNfVVpaKo/Ho23btn15bXJyUmfPntXp06dty128eLG8Xq+2bNmScL2vr091dXXy+/22Za9du1Yej0crV6788looFFJ9fb2uXr1qW+66devk8XhUUVGRcP3mzZuqr69XZ2enbdkvvviiPB5Pwpvx888/V11dne7evWtb7ne/+115vV4VFBQkXB8eHtYHH3ygs2fP2pZdXl4uj8ej9evXJ+TW19fr008/tS23oqJCXq9XVVVVCde7u7tVV1enGzdu2JZdXV0tr9erJUuWfHktEAiovr5ezc3NtuVu3bpVXq9XpaWlCdevX7+uuro6hUIh27L37dsnr9ebcCP/97//rbq6OoXDYdtyPR6PvF5v0vVPP/1UdXV1tuW6XC55vd6MzGyPx6OtW7cmXO/r61N9fb2uXLliW3amZnZVVZW8Xm/SzG5ra1NdXZ2tM3vXrl3av3+/CgsLv7yWjpn94osvav/+/VPO7A8//FAff/yxbdkrVqyQx+PRhg0bEnLTca/wer1at25dwvXu7m7V19erqanJtuzNmzfL6/Vq6dKlSbl23yv279+vxYsXJ1z/Ymb39vbalr1nzx59//vfT/rw9SXjMSYnJ423337bkGTb/yorK42//OUvCbnj4+PGW2+9ZWvut771LaO2tjbpNX/++efGwYMHbc3+3ve+Z1y8eDEht6WlxXjttddszfV6vcbly5eTXvPf/vY3Y8uWLbZmv/nmm0ZfX19C7nvvvWds3rzZ1txf/OIXRiQSSXrN/f39xs9//nNbs6urq41Tp04l5IbDYeONN96wNXfr1q1GXV1d0mtuaGgwPB6PrdkHDhwwWltbE3IvXLhg7N2719bcgwcPGjdv3kx6zT6fz1i9erWt2W+99ZYxMTGRkHv06FFj1apVtua+/fbbSa93cnLS+M1vfmNrbmVlpXH06NGE3Hg8bvz617+2NXfNmjWGz+dLes3pmNl79+6dcmYfOHDA1lyPx2M0NDQkvea6ujpj69attma/8cYbSTP71KlTts/sn/3sZ0Y0Gk16zf39/cYvf/lLW7M3b95svPfeewm54XDY9nvFli1bjPfffz/pNV++fNnwer22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" width="710" height="138" class="img_ev3q"></p><blockquote><p>维护一个序列，支持：
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>区间加，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>查单点</p></blockquote><p>每次对区间<!-- -->[l,r]<!-- -->加x的时候，差分为前缀<!-- -->[1,l-1]<!-- -->减x，前缀<!-- -->[1,r]<!-- -->加x，同时在数组上和块上打标记，使得区间<!-- -->[l,r]<!-- -->加x。</p><p><img loading="lazy" src="data:image/png;base64,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" width="705" height="129" class="img_ev3q"></p><p>查询的时候就扫过块外的标记和块内的标记即可</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAskAAACJCAYAAADe8qWoAAAgAElEQVR4nO3d+XMU190u8Kdn1cxIo1m0AJJACyABEmYNBhsb4yUFMQaMXRXHIUnVzV+VBAfbleT1tV02EGxjB+wYgkEYZECAAO0jaTSjWSXNPt19f+BqrqYlYLqllvze9/n84qqWWt8+Z3rOebr7NBZkWZZBREREREQFhuU+ACIiIiKinxuGZCIiIiIiBYZkIiIiIiIFhmQiIiIiIgXT034hl8shlUpBFMWlOB6ikgmCAKvVCqvVCoOh+HpPkiSk02lks1nw3VT6uTGZTLDZbDCZ5g7Bsiwjk8kgk8lAkqRlODqixzMajSgrK4PFYpnzs1wuh3Q6jXw+vwxHRvRkVqsVZWVlc/LCkzw1JA8PD+OHH35AMBhc0MERLTaLxYJnnnkG27dvh91uL/pZIpHAtWvX0N3dzQGbfnbq6+uxe/duNDQ0zPlZOp3GzZs3cfPmTSQSiWU4OqLH83q92LVrF1pbWyEIQmG7JEkYGxtDZ2cnRkZGeHOCflYMBgM2b96MZ599dk5eeJKnhuSBgQH813/9F7q7uxd0gESLzeFw4Pjx49i4ceOck356ehrffvstPvroI2Sz2WU6QqL57dq1Cw0NDfOG5FQqhWvXruH9999HKBRahqMjery1a9fC5XJh/fr1RSFZlmUMDw/j008/xdWrVxmS6WfFZDLhnXfewebNmxc3JKdSKfj9fgwNDS3oAIkWW0VFBWKx2LxLgfL5PCKRCHw+H9Lp9DIcHdH8BEFAY2PjY89LURQRj8cxOjqK8fHxJT46oidzOBxIJpNzQrAsy0ilUggEAhgeHuZSIfpZMZvNiEajqpcOPzUkz2YwGFBRUYHKysp519IR6UmWZSQSCcRiMdV3h61WK1wuF+x2e9HdD6KlkM1mEY/HkUgkVN9hM0OA02CAw2Dgm9a05EQZmJRFTEkS1MReg8EAh8OBysrKedcvE+ktmUwiGo0ik8lo/huqkq7VasUzzzyD/fv3o6qqSnNRIi1yuRxu3ryJf/3rXxgdHS15P0EQsGrVKrz66qvYuHEjL/BoScmyDL/fj/Pnz6Orqwu5XE7V/i6DAS9Y7XjGYoWVF3i0xKZlCZcyKVzOpJBRcYFnNpvR3t6OfQ1r4J0IQVB53hMthOz14r4g4+uuGwtaCaEqLZjNZrS1teHIkSNoamrSXJRIi3Q6jYqKCly/fh1jY2Ml7ycIAqqrq/HSSy/h1Vdfhdls1vEoiea6d+8eBgcHcfv2bdUh2WkwYIfFijfs5XCoeCubaDGERBFhUcK1bFpVSDaZTFi3bh1+VbsKDQM+YGpax6MkUlhVj4tr6nB9eGjpQrIgCLBYLKioqIDT6dRclEgLi8UCm80Go9Goel+j0Qi73Q6n08mQTEvO4XDAbDZrWupjAFAmCCgXDCgXGJJpaaUNMiwCoPbMFQQBZrMZDkFARSIFeZr/UgstHSGbg81o0pQXZuOIS0RERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpGBS88v5fB6jo6O4cuUKhoeH9Tomonlls1ncu3cP09PTkGVZ1b6Tk5Po7u6G3W6HyaTqtCdasIGBAQQCAYiiqHrfpCyjN5/DlWwKNoH3NWhpxSQJI2IeeZVjriiK8Pv9uG62YmxlNeB26nSERPOwWXBnYgKTk5ML+jOq0kImk0FnZyfGxsZgs9kWVJhILVEUEQqFMD4+riokS5IEn8+Hf/zjHzh37hwMBgYNWjqyLCOZTMLn8yGXy6nePyKJOJdO4HouDSMEHY6Q6PFysowxMY+sypCczWbR1dWFCd8IbIIAqNyfaEF64oikUhgbG1vQn9F0J3l0dHRBRYmW2sydZKLlJgjqgm7q/95J7s2rD9hEy2XmTrLf71/uQyHS7Kkh2WAwwGw2w2q1LsXxEJXMarXCaDTO+zNBEGAymWCxWFQvzSDSm9lsfuwTDUEQYDQaYbFYOO7Sz86Tzt3ZeUGSpCU+MqLHM5vNMBqNqm9SPDUk19XV4cCBA9i4caPmgyPSQ1lZGbZu3YqysrI5P7Pb7di5cydSqRTy+fwyHB3R47W2tqK2tnben1mtVrS3t+Po0aMLXk9HtNhWrlyJxsbGOWFDEASsXLkSr7zyChoaGnhzgn5WjEYjdu7cOW9eeBJBfsqZnEgkEA6HkclkFnSARItNEAS4XC643e45d5Tz+TwikQgmJyc5WNPPjs1mg8fjgd1un/MzURQRj8cRi8U0vehHpCeLxQKPx4OKioqi7bIsI5VKIRKJIJVKLdPRET1eZWUlvF7vY59Az+epIZmIiIiI6H8avuZPRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKTAkExEREREpMCQTERERESkwJBMRERERKRgetIP0+k0xsfHEY/HdTuA8vJyrFixAg6Ho7Atk8lgfHwcsVhMt7oOhwO1tbWoqKgo2p5IJBAIBDA1NaVLXUEQ4HQ6UVNTA7vdXtieSqUwPj6OyclJXeoCQEVFBWpra4v6WpZlTE9PIxAIIJFI6FJXEAS4XC7U1NSgrKysUDeRSCAYDOra15WVlaipqYHNZiv6mSRJCIfDCAaDyOfzutQ3Go2oqalBVVUVDIZH16OyLCMSiSAQCCCXy+lS12AwoLq6GtXV1TAajYXtoihiYmICoVAIoijqUttisaC6uhput7tQW5IkhEIhBINB3eqazWZUV1fD4/EUtTmXy2FiYgKRSES32mVlZaipqUFlZWXhc87n8wiFQgiHw7qdX1arFdXV1XC5XEVtzmQymJiYQDQahSRJutS22Wyora1FZWVlYVs2m0UoFNK1r61WK2pra+FyuSAIQmF7Op1GMBhENBrVpS4w/5yRzWYRDAYRiUQgy7Iudefra2D55ox0Oo1AILAk83N5eXnR5yxJEuLxOILBINLptC61DQYDvF4vqqurYTabATwat2fqplIpXeoKggCPx4OamhpYLJbCdkmSEI1Gl3zOkGUZsVgMgUAAmUxGl7qCIKCqqgq1tbVFY5gsywiFQggEArrOGVVVVfB6vUW1lZ4YkoPBID799FN0dnYu+gHO2Lx5M9566y20trYWtkUiEZw+fRr/+c9/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" width="713" height="137" class="img_ev3q"></p><p>嗯，我相信你一定已经会了如何<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>区间加，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="padding-left:0.833em">n</span></span><span style="top:-2.7603em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>区间和了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="根号平衡">根号平衡<a href="#根号平衡" class="hash-link" aria-label="根号平衡的直接链接" title="根号平衡的直接链接">​</a></h3><p>经过了上面的学习，你一定好奇如何应用分块，那么就来试试吧！</p><blockquote><p>维护一个序列
1.区间加
2.查询区间小于x的数的个数</p></blockquote><p>如果是单点修改，我们可以用树套树实现。但是区间修改后树套树无法快速合并信息。</p><p>比如我们维护了cur的一个名次数据结构，cur的左儿子没有发生变化，cur的右儿子被整体加了。这样我们无法通过这两个儿子的名次数据结构快速维护出cur的名次数据结构，也无法直接在cur的名次数据结构上操作。</p><p>所以分治结构无法在低复杂度解决这个问题。</p><p>所以我们自然而然地想到使用分块。</p><p>分块，维护每块的OV（就是排序后的数组）不用维护每块的数据结构，因为分块套数据结构是很慢很慢的。</p><p>每次区间加的时候，整块可以打一个标记，零散块可以重构。</p><p>每次查询的时候，整块查询小于x的数，这个整块的标记为y（也就是说这一块所有数都加了y），则等价于查整块的排序后的数组里面小于x-y的数的个数，这个可以二分。</p><p>零散块就直接暴力查询块内在查询区间内的数是否满足条件。</p><p>这里整块和零散块的复杂度明显不同，为了平衡复杂度，我们设块的个数为x，每个块的大小即为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>n</mi><mi>x</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac nx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>。</p><p>查询复杂度：</p><p>整块<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x*O(\log(\frac nx))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">))</span></span></span></span></span></p><p>零散块<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\frac nx)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>修改复杂度：</p><p>整块<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x*O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p><p>零散块<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\frac nx)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span>（使用归并排序重构）</p><p>平衡整块和零散块的复杂度，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>x</mi><mi>log</mi><mo>⁡</mo><mtext> </mtext><mfrac><mi>n</mi><mi>x</mi></mfrac><mo>+</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(x\log \frac nx+x)=O(\frac nx)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"> </span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span>，即<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>x</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(x\log n)=O(\frac nx)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span>，解得<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><msqrt><mfrac><mi>n</mi><mrow><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow></mfrac></msqrt></mrow><annotation encoding="application/x-tex">x=\sqrt{\frac n{\log n}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.7479em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0921em"><span class="svg-align" style="top:-3.8em"><span class="pstrut" style="height:3.8em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em">g</span></span><span class="mspace mtight" style="margin-right:0.1952em"></span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.0521em"><span class="pstrut" style="height:3.8em"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.88em" viewBox="0 0 400000 1944" preserveAspectRatio="xMinYMin slice"><path d="M983 90
l0 -0
c4,-6.7,10,-10,18,-10 H400000v40
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7479em"><span></span></span></span></span></span></span></span></span></span>，此时总的时间复杂度为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mrow><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi></mrow></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt {n\log n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.085em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.835em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span></span></span><span style="top:-2.795em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.205em"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="树分治">树分治<a href="#树分治" class="hash-link" aria-label="树分治的直接链接" title="树分治的直接链接">​</a></h2><p>[下个月写]</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="附录">附录<a href="#附录" class="hash-link" aria-label="附录的直接链接" title="附录的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多棵平衡树求kth">多棵平衡树求kth<a href="#多棵平衡树求kth" class="hash-link" aria-label="多棵平衡树求kth的直接链接" title="多棵平衡树求kth的直接链接">​</a></h3><p>preknowledge：平衡树支持O(1)找出rank在<!-- -->[71%,80%]<!-- -->之间的某个元素（不关心具体rank，只要在范围内即可），并按这个元素O(1)分裂成比它小/大的部分（不包含这个元素）。</p><p>设m课平衡树维护的序列长度分别为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>a</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">a_1,a_2,\dots,a_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>，我们要求解的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>≤</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">k\leq(a_1+a_2+\cdots+a_n)/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/2</span></span></span></span></span>。由于大小关系是偏序关系，所以小于成立时大于也成立（说人话就是大于的话把大于小于关系反过来就行）</p><p>我们为每棵树找一个rank在<!-- -->[71%,81%]<!-- -->的元素，称之为这棵树的key。</p><p>我们用类似求解nth_element的方法，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>将这些树分成三组，第二组只有一棵树，第三组的key比第二组大，第一组的key比第二组小，且满足前两组的树维护的序列长度至少占总序列长度之和的71%，后两组的树维护的序列长度至少占总序列长度之和的29%。不难发现，这种分组方式一定存在（留待读者自证x）。</p><p>所以前两组中小于等于其所属的树的key的元素个数至少占总序列长度之和的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>71</mn><mi mathvariant="normal">%</mi><mo>×</mo><mn>71</mn><mi mathvariant="normal">%</mi><mtext> </mtext><mo>&gt;</mo><mtext> </mtext><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">71\%\times71\% &gt; 50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.0833em"></span><span class="mord">71%</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mord">71% </span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mord"> 50%</span></span></span></span></span>，而且这些元素一定比第二组的key要小。即，我们可以说，第二组的key在总序列中的rank至少为50%。那么，所有比第二组的key大的元素就都不可能是kth了。</p><p>不难发现，后两组中大于等于其所属的树的key的元素都比第二组的key要大，因此这些元素可以直接去掉，即直接将后两组平衡树替换为小于key的部分。我们去掉的元素个数至少占总序列长度之和的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>29</mn><mi mathvariant="normal">%</mi><mo>×</mo><mn>20</mn><mi mathvariant="normal">%</mi><mtext> </mtext><mo>=</mo><mtext> </mtext><mn>5.8</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">29\%\times20\% = 5.8\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.0833em"></span><span class="mord">29%</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mord">20% </span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mord"> 5.8%</span></span></span></span></span>。</p><p>即，我们使用<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>的操作，将原问题变成了问题规模减少了至少<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.8</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">5.8\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mord">5.8%</span></span></span></span></span>的子问题。</p><p>因此时间复杂度为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>m</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m\log(a_1+a_2+\cdots+a_m))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">))</span></span></span></span></span></p><p>如果你是从上面那个链接点过来的，那么一个区间涉及外层树上共<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>个节点，即共<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m=O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>棵平衡树，所有这些涉及的节点所维护的总序列长度为<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">O(n)=a_1+a_2+\cdots+a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>，即用这种方法实现的树套树区间kth查询降至<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log^2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1484em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="核心代码">核心代码<a href="#核心代码" class="hash-link" aria-label="核心代码的直接链接" title="核心代码的直接链接">​</a></h3><p>码风是18年的（</p><p>所以里面其实有大量的单词拼写错误，应该不影响阅读</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> segment_tree </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">mid</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">l</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa"> r</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">l </span><span class="token macro property expression operator" style="color:#393A34">+</span><span class="token macro property expression" style="color:#36acaa"> r</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&gt;&gt;</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">ls</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&lt;&lt;</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">rs</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&lt;&lt;</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">|</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">fa</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&gt;&gt;</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">len</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">tree</span><span class="token macro property expression punctuation" style="color:#393A34">[</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">]</span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">r </span><span class="token macro property expression operator" style="color:#393A34">-</span><span class="token macro property expression" style="color:#36acaa"> tree</span><span class="token macro property expression punctuation" style="color:#393A34">[</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">]</span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">l </span><span class="token macro property expression operator" style="color:#393A34">+</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> N </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> lzy1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">inline</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">inline</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">downdata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        init</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">rd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> r </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">downdata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> r </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy1 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lzy2 </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">downdata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">updata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">downdata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">rs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">mid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">fa</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">len</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// namespace segment_tree</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> fenwickTree </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">lowbit</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&amp;</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">-</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">x</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> N </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> del1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> del2</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> tot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> tot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        d</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lowbit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ans </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lowbit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//单点修改 区间查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_point_normal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query_interval_normal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//区间修改 单点查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_interval_normal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query_point_normal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//区间修改 区间查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add_interval_special</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">k </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query_interval_special</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">del2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//代替平衡树部分操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> hs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">N</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//大部分情况需将操作数离散化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">del</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cnt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ans </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ans </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> tot </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cnt </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ans</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ans </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cnt </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ans</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> hs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ans </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ans </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lowbit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pre</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">my_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">del</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nxt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">my_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">del</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">lowbit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// namespace fenwickTree</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> SPLAY </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> MAX </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> tot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fre</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> top </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new_node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> top </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> fre</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">top</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">tot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        k </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">^</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">^</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">^</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">splay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new_node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">splay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">splay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">splay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">l </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l </span><span class="token operator" style="color:#393A34">^</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">splay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">updata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">del</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fre</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">++</span><span class="token plain">top</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fa</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">del</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sze</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find_rank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pre</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nxt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">dfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">dfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">son</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// namespace SPLAY</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/软件工程技能树/基础入门/基础课程/数据结构/树/树.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/数据结构"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">数据结构</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cs-engineering/docs/软件工程技能树/基础入门/基础课程/数据结构/树/线段树/线段树"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">线段树</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#线段树" class="table-of-contents__link toc-highlight">线段树</a></li><li><a href="#平衡树" class="table-of-contents__link toc-highlight">平衡树</a><ul><li><a href="#splay" class="table-of-contents__link toc-highlight">Splay</a></li><li><a href="#treap" class="table-of-contents__link toc-highlight">Treap</a></li></ul></li><li><a href="#树套树" class="table-of-contents__link toc-highlight">树套树</a><ul><li><a href="#range-tree" class="table-of-contents__link toc-highlight">Range tree</a></li><li><a href="#高维树状数组" class="table-of-contents__link toc-highlight">高维树状数组</a></li><li><a href="#树状数组套平衡树" class="table-of-contents__link toc-highlight">树状数组套平衡树</a></li><li><a href="#comparison" class="table-of-contents__link toc-highlight">Comparison</a></li></ul></li><li><a href="#分块科技" class="table-of-contents__link toc-highlight">分块科技</a><ul><li><a href="#分块基础" class="table-of-contents__link toc-highlight">分块基础</a></li><li><a href="#动态分块" class="table-of-contents__link toc-highlight">动态分块</a></li><li><a href="#根号平衡" class="table-of-contents__link toc-highlight">根号平衡</a></li></ul></li><li><a href="#树分治" class="table-of-contents__link toc-highlight">树分治</a></li><li><a href="#附录" class="table-of-contents__link toc-highlight">附录</a><ul><li><a href="#多棵平衡树求kth" class="table-of-contents__link toc-highlight">多棵平衡树求kth</a></li><li><a href="#核心代码" class="table-of-contents__link toc-highlight">核心代码</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/docs/intro">Tutoria</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 浙江大学启真交叉学科创新创业实验室, Inc.</div></div></div></footer></div>
<script src="/cs-engineering/assets/js/runtime~main.e29adf2c.js"></script>
<script src="/cs-engineering/assets/js/main.20ce48b1.js"></script>
</body>
</html>