<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Cookie | CS-Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/small-logo.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/small-logo.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cookie | CS-Engineering"><meta data-rh="true" name="description" content="Author:NA"><meta data-rh="true" property="og:description" content="Author:NA"><link data-rh="true" rel="icon" href="/cs-engineering/img/small-logo.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie" hreflang="zh"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cs-engineering/blog/rss.xml" title="CS-Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cs-engineering/blog/atom.xml" title="CS-Engineering Atom Feed"><link rel="stylesheet" href="/cs-engineering/assets/css/styles.4c83be5a.css">
<link rel="preload" href="/cs-engineering/assets/js/runtime~main.ff1670aa.js" as="script">
<link rel="preload" href="/cs-engineering/assets/js/main.c272b5bd.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cs-engineering/"><div class="navbar__logo"><img src="/cs-engineering/img/small-logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cs-engineering/img/small-logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CS-Engineering</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs-engineering/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">知识空间</a><a class="navbar__item navbar__link" href="/cs-engineering/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cs-engineering/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">新人必看：CS工程指南介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item software_engineering_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cs-engineering/软件工程技能树/软件工程技能树">软件工程技能树</a><button aria-label="打开/收起侧边栏菜单「软件工程技能树」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed basic_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/基础入门">基础入门</a><button aria-label="打开/收起侧边栏菜单「基础入门」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item frontend_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端技术">前端技术</a><button aria-label="打开/收起侧边栏菜单「前端技术」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/前端入门">前端入门</a><button aria-label="打开/收起侧边栏菜单「前端入门」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/浏览器">浏览器</a><button aria-label="打开/收起侧边栏菜单「浏览器」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/BOM/BOM">BOM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/DOM/DOM">DOM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie">Cookie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/FetchAPI/Fetch API">Fetch API</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/前端COC/前端COC">前端COC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端入门/前端入门实践/前端入门实践">前端入门实践</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端三件套/前端三件套">前端三件套</a><button aria-label="打开/收起侧边栏菜单「前端三件套」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/开发语言/开发语言">开发语言</a><button aria-label="打开/收起侧边栏菜单「开发语言」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/框架入门/框架入门">框架入门</a><button aria-label="打开/收起侧边栏菜单「框架入门」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/跨平台与多端开发/跨平台与多端开发">跨平台与多端开发</a><button aria-label="打开/收起侧边栏菜单「跨平台与多端开发」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端进阶/前端进阶">前端进阶</a><button aria-label="打开/收起侧边栏菜单「前端进阶」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed backend_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/后端技术/后端技术">后端技术</a><button aria-label="打开/收起侧边栏菜单「后端技术」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed devops_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/运营维护/运营维护">运营维护</a><button aria-label="打开/收起侧边栏菜单「运营维护」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed tools_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/开发工具/开发工具">开发工具</a><button aria-label="打开/收起侧边栏菜单「开发工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed advanced_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/进阶技术/进阶技术">进阶技术</a><button aria-label="打开/收起侧边栏菜单「进阶技术」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/软件科研技能树/软件科研技能树">软件科研技能树</a><button aria-label="打开/收起侧边栏菜单「软件科研技能树」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cs-engineering/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/软件工程技能树"><span itemprop="name">软件工程技能树</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/前端技术/前端技术"><span itemprop="name">前端技术</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/前端技术/前端入门/前端入门"><span itemprop="name">前端入门</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/浏览器"><span itemprop="name">浏览器</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cookie</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Cookie</h1><p>Author:NA</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cookie的诞生背景">Cookie的诞生背景<a href="#cookie的诞生背景" class="hash-link" aria-label="Cookie的诞生背景的直接链接" title="Cookie的诞生背景的直接链接">​</a></h2><p>1994年，当网景通信（Netscape Communications）的工程师Lou Montulli正在开发最早的电子商务网站时，他遇到了一个根本性问题——<b>HTTP协议的无状态特性</b>。就像每次见面都把你当作陌生人的服务员，早期的Web服务器无法记住之前的任何请求。这意味着：</p><ul><li>用户每点击一个链接都被视为全新访客</li><li>购物车无法记住已选商品</li><li>登录状态在页面刷新后立即消失</li></ul><p>Montulli从Unix系统的&quot;magic cookie&quot;概念获得灵感，创造了Web Cookie技术。这个命名源自幸运饼干（Fortune Cookie）——里面藏着小纸条的甜点，完美隐喻了Cookie在浏览器中存储小数据的特性。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cookie的版本迭代">Cookie的版本迭代<a href="#cookie的版本迭代" class="hash-link" aria-label="Cookie的版本迭代的直接链接" title="Cookie的版本迭代的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="石器时代1994-1996">石器时代（1994-1996）<a href="#石器时代1994-1996" class="hash-link" aria-label="石器时代（1994-1996）的直接链接" title="石器时代（1994-1996）的直接链接">​</a></h3><ul><li><b>Netscape Navigator 0.9beta</b>：首个支持Cookie的浏览器</li><li>最初规范仅包含：</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-Cookie: user_id=12345; path=/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="标准化时代1997-2011">标准化时代（1997-2011）<a href="#标准化时代1997-2011" class="hash-link" aria-label="标准化时代（1997-2011）的直接链接" title="标准化时代（1997-2011）的直接链接">​</a></h3><ul><li><b>RFC 2109</b>（1997）：首个正式标准，引入`Max-Age`、`Secure`等属性</li><li><b>RFC 2965</b>（2000）：尝试推广`Set-Cookie2`（最终失败）</li><li>浏览器大战导致实现差异：IE与Netscape处理方式不同</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="现代安全时代2011至今">现代安全时代（2011至今）<a href="#现代安全时代2011至今" class="hash-link" aria-label="现代安全时代（2011至今）的直接链接" title="现代安全时代（2011至今）的直接链接">​</a></h3><ul><li><b>RFC 6265</b>（2011）：统一标准，废弃Cookie2</li><li>关键安全增强：</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-Cookie: sessionID=abc123; Secure; HttpOnly; SameSite=Lax</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><b>GDPR</b>（2018）：要求明确告知Cookie使用</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cookie的工作原理">Cookie的工作原理<a href="#cookie的工作原理" class="hash-link" aria-label="Cookie的工作原理的直接链接" title="Cookie的工作原理的直接链接">​</a></h2><p>当服务器需要记住客户端状态时，会在响应中包含：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OKSet-Cookie: user_token=xyz789; Max-Age=3600; Path=/; Secure</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>浏览器会像保存小纸条一样存储这些信息，并在后续请求中自动携带：</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /account HTTP/1.1Cookie: user_token=xyz789</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Cookie 主要用于以下三个方面：</p><ul><li>会话状态管理</li></ul><p>如用户登录状态、购物车、游戏分数或其他需要记录的信息</p><ul><li>个性化设置</li></ul><p>如用户自定义设置、主题和其他设置</p><ul><li>浏览器行为跟踪</li></ul><p>如跟踪分析用户行为等</p><p>曾经由于没有更合适的方法，cookie被用来存储客户端数据。但由于浏览器的每次请求都会携带 Cookie 数据，会带来额外的性能开销，再加上现在有了新的存储数据的API（<em>localStorage</em>等），所以就不要再用cookie存储客户端数据了。</p><p>既然cookie是存储于本地的一小块数据，那么这块数据以何格式从服务器获取，作用域和生命周期怎么定义，数据有无大小限制，又该如何保证cookie的安全传输呢？接下来逐条说。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建cookie">创建cookie<a href="#创建cookie" class="hash-link" aria-label="创建cookie的直接链接" title="创建cookie的直接链接">​</a></h2><ol><li>在首次访问网站时，浏览器发送请求中并未携带Cookie。</li><li>服务器看到请求中未携带Cookie，在HTTP的响应头中加入<code>Set-Cookie</code>。</li></ol><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">Content-type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> text/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">Set-Cookie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yummy_cookie=choco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">Set-Cookie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tasty_cookie=strawberry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>浏览器收到<code>Set-Cookie</code>后，会将Cookie保存下来</li><li>下次再访问该网站时，HTTP请求头就会携带Cookie。</li></ol><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /sample_page.html HTTP/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">Host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> www.example.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">Cookie</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yummy_cookie=choco</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> tasty_cookie=strawberry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-cookie">Set-Cookie<a href="#set-cookie" class="hash-link" aria-label="Set-Cookie的直接链接" title="Set-Cookie的直接链接">​</a></h2><p>cookie始于一个cookie的名称/值对，<!-- -->&lt;<!-- -->cookie-value<!-- -->&gt;<!-- -->是可选的。此外还有很多属性可以设置：</p><ul><li><code>Expires=&lt;date&gt;</code> ：可选，若无代表这是一个会话期cookie。</li><li><code>Max-Age=&lt;number&gt;</code>：cookie经过多少秒失效，优先级在<code>Expires</code>之上。</li><li><code>Domain=&lt;domain-value&gt;</code>：指定 cookie 可以送达的主机名。假如没有指定，那么默认值为当前文档访问地址中的主机部分（但是不包含子域名）。</li><li><code>Path=&lt;path-value&gt;</code>：指定一个 URL 路径，这个路径<em>必须</em>出现在要请求的资源的路径中才可以发送 <code>Cookie</code> 标头。具体在作用域部分会解释。</li><li><code>Secure</code>：只有在请求使用 <code>https:</code> 协议的时候才会被发送到服务器。</li><li><code>HttpOnly</code>：用于阻止 JavaScript 通过 <code>Document.cookie</code> 属性访问 cookie。</li><li><code>SameSite=&lt;samesite-value&gt;</code>：也在下文作用域部分解释。
此外还存在特殊的cookie名称前缀：名称中包含 <code>__Secure-</code> 或 <code>__Host-</code> 前缀的 cookie，只可以应用在使用了安全连接（HTTPS）的域中，需要同时设置 <code>secure</code> 属性。
另外，假如 cookie 以 <code>__Host-</code> 为前缀，那么 path 属性的值必须为 <code>/</code>（表示整个站点），且不能含有 <code>Domain</code> 属性。</li></ul><p>fetch默认对服务端通过<code>Set-Cookie</code>头设置的cookie会忽略</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="生命周期">生命周期<a href="#生命周期" class="hash-link" aria-label="生命周期的直接链接" title="生命周期的直接链接">​</a></h2><p>Cookie 的生命周期可以通过两种方式定义：</p><ul><li><em>会话期</em> Cookie 会在当前的会话结束之后删除。浏览器定义了“当前会话”结束的时间。（一<em>些浏览器重启时会使用会话恢复。这可能导致会话 cookie 无限延长）</em></li><li><em>持久性</em> Cookie 在过期时间（`Expires`）指定的日期或有效期（`Max-Age`）指定的一段时间后被删除。 `Max-Age`优先级在`Expires`之上。</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="作用域">作用域<a href="#作用域" class="hash-link" aria-label="作用域的直接链接" title="作用域的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="domain-属性">Domain 属性<a href="#domain-属性" class="hash-link" aria-label="Domain 属性的直接链接" title="Domain 属性的直接链接">​</a></h2><p><code>Domain</code> 指定了哪些主机可以接受 Cookie。如果不指定，该属性默认为同一 host 设置 cookie，<em>不包含子域名</em>。如果指定了 <code>Domain</code>，则一般包含子域名。因此，指定 <code>Domain</code> 比省略它的限制要少。</p><p>例如，如果设置 <code>Domain=mozilla.org</code>，则 Cookie 也包含在子域名中（如 <code>developer.mozilla.org</code>）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="path-属性">Path 属性<a href="#path-属性" class="hash-link" aria-label="Path 属性的直接链接" title="Path 属性的直接链接">​</a></h2><p><code>Path</code> 属性指定了一个 URL 路径，该 URL 路径必须存在于请求的 URL 中，以便发送 <code>Cookie</code> 标头。以字符<code>“/”</code> 作为路径分隔符，并且子路径也会被匹配。</p><p>例如，设置 <code>Path=/docs</code>，则以下地址都会匹配：</p><ul><li><code>/docs</code></li><li><code>/docs/</code></li><li><code>/docs/Web/</code></li><li><code>/docs/Web/HTTP</code></li></ul><p>但是这些请求路径不会匹配以下地址：</p><ul><li><code>/</code></li><li><code>/docsets</code></li><li><code>/fr/docs</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="samesite-属性">SameSite 属性<a href="#samesite-属性" class="hash-link" aria-label="SameSite 属性的直接链接" title="SameSite 属性的直接链接">​</a></h2><p>用于设定cookie是否随着跨站请求一起发送。注意：来自同一域的 cookie 若使用了不同的协议（<code>http:</code> 或 <code>HTTPS:</code>），将不再被视为来自同一站点。该属性有三个值。</p><ul><li><p><code>Strict</code></p><ul><li>: 意味着这是一个同站 <code>cookie</code>，只能作为第一方cookie。即请求来自设置 cookie 的站点。如果请求来自不同的域或协议（即使是相同域），则携带有 <code>SameSite=Strict</code> 属性的 cookie 将不会被发送。</li></ul></li><li><p><code>Lax</code></p><ul><li>: 这意味着 cookie 不会在跨站请求中被发送，如：加载图像或 frame 的请求（这两个会作为例子在下面提到）。但 cookie 在用户从外部站点导航到源站时，cookie 也将被发送（通过链接跳转）。这是 <code>SameSite</code> 属性未被设置时的<b>默认</b>行为。</li></ul></li><li><p><code>None</code></p><ul><li>: 这意味着浏览器会在跨站和同站请求中均发送 cookie。在设置这一属性值时，必须同时设置 <code>Secure</code> 属性，就像这样：<code>SameSite=None; Secure</code>。</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="同站与同域">同站与同域<a href="#同站与同域" class="hash-link" aria-label="同站与同域的直接链接" title="同站与同域的直接链接">​</a></h2><p>既然说到<code>SameSite</code>中的跨站请求，那怎么才能判定到底是跨站还是同站呢？<b>在遇到一个域名时，会首先匹配列表中的后缀，再把eTLD+1个字段相同表示为同站，不同表示为非同站。</b>而这个有效顶级域名，eTLD，并不一定只有一个字段（如github.io)，实际上浏览器是通过<em>Public Suffix List</em>列表来确定哪些是有效顶级域名。</p><p>比如<code>a.baidu.com.cn</code>与<code>b.baidu.com.cn</code>属于同站， <code>github.com</code>与<code>other.com</code>属于跨站。当一个请求本身的 URL 和它的发起页面的 URL 不属于同一个站点时，这个请求就算第三方请求。</p><p>跨站是比跨域更宽松的一种限制。可以这么说如果跨站，那么肯定会跨域，但如果跨域，那么不一定会跨站。如端口不同，子域名不同（<code>a.baidu.com.cn</code>与<code>b.baidu.com.cn</code>）都属于跨 域，但不属于跨站。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="其它规则">其它规则<a href="#其它规则" class="hash-link" aria-label="其它规则的直接链接" title="其它规则的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="大小限制">大小限制<a href="#大小限制" class="hash-link" aria-label="大小限制的直接链接" title="大小限制的直接链接">​</a></h3><p>不同浏览器对cookie限制不同，个数上限大多在20-50个，总大小上限在4kb左右。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="js修改cookie">js修改cookie<a href="#js修改cookie" class="hash-link" aria-label="js修改cookie的直接链接" title="js修改cookie的直接链接">​</a></h3><p>在浏览器中用js修改cookie，相当于重新设置。并且js中没有直接删除Cookie的方法。如果需要删除某个Cookie，需要重新设置该Cookie，将它的有效期直接设置为过期，即可实现删除功能。</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//设置cookie  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookie</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a=1;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookie</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a=1; doamin=google.com&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//删除cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookie</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a=1; max-age=-1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//读取cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cookie</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>而在读取cookie时，也只能读取到名称和值，而不能读取到属性。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="第三方cookie">第三方cookie<a href="#第三方cookie" class="hash-link" aria-label="第三方cookie的直接链接" title="第三方cookie的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="现状与漏洞">现状与漏洞<a href="#现状与漏洞" class="hash-link" aria-label="现状与漏洞的直接链接" title="现状与漏洞的直接链接">​</a></h3><p>目前第三方cookie有可能被利用于CSRF攻击，即在第三方网站中，利用不显示的图片，或<code>iframe</code>等，调用本地的cookie，伪造用户给服务器发送恶意请求。如下就是一个利用<code>iframe</code>的CSRF攻击例子，用户只要点进网站，恶意网站就会提交表单，给bank-example发送使用第三方cookie的转账POST请求。</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">iframe</span><span class="token tag" style="color:#00009f"> </span><span class="token tag special-attr attr-name" style="color:#00a4db">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag special-attr attr-value value css language-css property" style="color:#36acaa">display</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#393A34">:</span><span class="token tag special-attr attr-value value css language-css" style="color:#e3116c"> none</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#393A34">;</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">csrf-frame</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">iframe</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">POST</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">http://bank-example/transfer</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name" style="color:#00a4db">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">csrf-frame</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">csrf-form</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">hidden</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">to user</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c"> </span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">hack01</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">hidden</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c"> </span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">money</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">1000000</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c"> </span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c"> submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript function" style="color:#d73a49">getElementById</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&quot;csrf-form&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">submit</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>CSRF攻击的存在，是因为服务器验证不充分，所以一种解决方法就是上面提到的，在设置cookie时添加<code>SameSite</code>属性，这样就阻止了部分第三方cookie的发送。还有其它方法如：验证码，核对referer（但某些浏览器也可以篡改referer），加入随机token等。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="未来">未来<a href="#未来" class="hash-link" aria-label="未来的直接链接" title="未来的直接链接">​</a></h3><p>因上面说到的安全漏洞，为了保护用户的隐私，浏览器供正在逐步停止对第三方 <b>Cookie</b> 的支持。目前 <b>Safari</b> 已经完全禁止了三方 <b>Cookie</b>，<b>Chrome</b> 也宣布将逐步弃用。一个叫<b>Privacy Sandbox</b>的计划正在为解决第三方cookie的方案进行试验，有不少提议方案，如<code>CHIPS</code>（拥有独立分区状态的Cookies）和<code>First-Party Set</code>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chips"><a href="https://github.com/privacycg/CHIPS" target="_blank" rel="noopener noreferrer">CHIPS</a><a href="#chips" class="hash-link" aria-label="chips的直接链接" title="chips的直接链接">​</a></h3><p>CHIPS引入了一个新的 cookie 属性， <code>Partitioned</code>。</p><p>当用户访问站点A并嵌入内容来自站点C时，设置一个带有 <code>Partitioned</code> 属性的cookie，这个cookie 被存到了 <code>partitioned jar</code>，该 <code>partitioned jar</code> 只用于存储站点C嵌入站点A时 设置的cookie。浏览器只会在顶级站点A时发送cookie。（下面左图为原来的，中图为加了 <code>Partitioned</code>属性的cookie，右图表示即使在顶级站点为c时也不会使用该分区cookie）</p><div class="flex gap-3 columns-3" column-size="3"><div class="w-[36%]" width-ratio="36">![](/assets/Vtdrbvcmzoj9JTxzrtVcPfypnle.png)</div><div class="w-[36%]" width-ratio="36">![](/assets/LxLCbinEvo7SbVxGz16cGRz6nSd.png)</div><div class="w-[27%]" width-ratio="27">![](/assets/C725b1ideoyI9VxUVKnc3fOEnLg.png)</div></div><p>只需在设置cookie时添加 <code>Partitioned</code>属性即可。</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Set-Cookie: __Host-name=value; Secure; Path=/; SameSite=None; Partitioned;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="first-party-sets"><a href="https://github.com/WICG/first-party-sets" target="_blank" rel="noopener noreferrer">First-Party Sets</a><a href="#first-party-sets" class="hash-link" aria-label="first-party-sets的直接链接" title="first-party-sets的直接链接">​</a></h3><p>说白了这个方案的意思是，通过一系列策略，扩大第一方cookie的定义范围（比如登录<code>.tmall.com</code>时存储在<code>taobao.com</code>域下的cookie可被视为第一方cookie），再禁止第三方cookie就可以减小带来的不便。</p><div class="flex gap-3 columns-2" column-size="2"><div class="w-[50%]" width-ratio="50"><p>目前 <code>First-Party Sets</code> 确定的原则如下：</p><ul><li><p><code>First-Party Sets</code> 中的域必须由同一组织拥有和运营。</p></li><li><p>所有域名应该作为一个组被用户识别。</p></li><li><p>所有域名应该共享一个共同的隐私政策。</p></li></ul></div><div class="w-[50%]" width-ratio="50">![](/assets/Z8TtbnNV9od97ux1C46c5OjdnId.png)</div></div><p>所有开启了  <code>First-Party Sets</code> 域名下需要共享的 <code>Cookie</code> 都需要增加 <code>SameParty</code> 属性。这时我在 <code>taobao.com</code> 下发送 <code>.tmall.com</code> 域名的请求，<code>Cookie</code> 也可以被携带了，但是如果我在另外一个网站，例如 <code>eval.site</code> 下发送这个请求， <code>Cookie</code> 就不会被携带。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/软件工程技能树/前端技术/前端入门/浏览器/Cookie/Cookie.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/DOM/DOM"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">DOM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cs-engineering/软件工程技能树/前端技术/前端入门/浏览器/FetchAPI/Fetch API"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Fetch API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cookie的诞生背景" class="table-of-contents__link toc-highlight">Cookie的诞生背景</a></li><li><a href="#cookie的版本迭代" class="table-of-contents__link toc-highlight">Cookie的版本迭代</a><ul><li><a href="#石器时代1994-1996" class="table-of-contents__link toc-highlight">石器时代（1994-1996）</a></li><li><a href="#标准化时代1997-2011" class="table-of-contents__link toc-highlight">标准化时代（1997-2011）</a></li><li><a href="#现代安全时代2011至今" class="table-of-contents__link toc-highlight">现代安全时代（2011至今）</a></li></ul></li><li><a href="#cookie的工作原理" class="table-of-contents__link toc-highlight">Cookie的工作原理</a></li><li><a href="#创建cookie" class="table-of-contents__link toc-highlight">创建cookie</a></li><li><a href="#set-cookie" class="table-of-contents__link toc-highlight">Set-Cookie</a></li><li><a href="#生命周期" class="table-of-contents__link toc-highlight">生命周期</a></li><li><a href="#作用域" class="table-of-contents__link toc-highlight">作用域</a></li><li><a href="#domain-属性" class="table-of-contents__link toc-highlight">Domain 属性</a></li><li><a href="#path-属性" class="table-of-contents__link toc-highlight">Path 属性</a></li><li><a href="#samesite-属性" class="table-of-contents__link toc-highlight">SameSite 属性</a></li><li><a href="#同站与同域" class="table-of-contents__link toc-highlight">同站与同域</a></li><li><a href="#其它规则" class="table-of-contents__link toc-highlight">其它规则</a><ul><li><a href="#大小限制" class="table-of-contents__link toc-highlight">大小限制</a></li><li><a href="#js修改cookie" class="table-of-contents__link toc-highlight">js修改cookie</a></li></ul></li><li><a href="#第三方cookie" class="table-of-contents__link toc-highlight">第三方cookie</a><ul><li><a href="#现状与漏洞" class="table-of-contents__link toc-highlight">现状与漏洞</a></li><li><a href="#未来" class="table-of-contents__link toc-highlight">未来</a></li><li><a href="#chips" class="table-of-contents__link toc-highlight">CHIPS</a></li><li><a href="#first-party-sets" class="table-of-contents__link toc-highlight">First-Party Sets</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/docs/intro">Tutoria</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 浙江大学启真交叉学科创新创业实验室, Inc.</div></div></div></footer></div>
<script src="/cs-engineering/assets/js/runtime~main.ff1670aa.js"></script>
<script src="/cs-engineering/assets/js/main.c272b5bd.js"></script>
</body>
</html>