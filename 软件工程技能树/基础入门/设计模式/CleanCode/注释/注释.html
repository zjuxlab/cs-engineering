<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-软件工程技能树/基础入门/设计模式/CleanCode/注释/注释" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">注释 | CS-Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/small-logo.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cs-engineering/img/small-logo.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="注释 | CS-Engineering"><meta data-rh="true" name="description" content="我们需要纠正一个误区："><meta data-rh="true" property="og:description" content="我们需要纠正一个误区："><link data-rh="true" rel="icon" href="/cs-engineering/img/small-logo.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释" hreflang="zh"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cs-engineering/blog/rss.xml" title="CS-Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cs-engineering/blog/atom.xml" title="CS-Engineering Atom Feed"><link rel="stylesheet" href="/cs-engineering/assets/css/styles.4c83be5a.css">
<link rel="preload" href="/cs-engineering/assets/js/runtime~main.3158629a.js" as="script">
<link rel="preload" href="/cs-engineering/assets/js/main.c272b5bd.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cs-engineering/"><div class="navbar__logo"><img src="/cs-engineering/img/small-logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cs-engineering/img/small-logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CS-Engineering</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs-engineering/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">知识空间</a><a class="navbar__item navbar__link" href="/cs-engineering/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cs-engineering/新人必看CS工程指南介绍/gvpywcwokiqophkzxotckxylnld-gvpywc">新人必看：CS工程指南介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item software_engineering_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cs-engineering/软件工程技能树/软件工程技能树">软件工程技能树</a><button aria-label="打开/收起侧边栏菜单「软件工程技能树」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item basic_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/基础入门">基础入门</a><button aria-label="打开/收起侧边栏菜单「基础入门」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/基础课程/基础课程">基础课程</a><button aria-label="打开/收起侧边栏菜单「基础课程」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/Git与GiteeGithub/Git 与 Gitee/Github">Git 与 Gitee/Github</a><button aria-label="打开/收起侧边栏菜单「Git 与 Gitee/Github」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/常见工具/常见工具">常见工具</a><button aria-label="打开/收起侧边栏菜单「常见工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/构建工具/构建工具">构建工具</a><button aria-label="打开/收起侧边栏菜单「构建工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/设计模式">设计模式</a><button aria-label="打开/收起侧边栏菜单「设计模式」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/Clean Code">Clean Code</a><button aria-label="打开/收起侧边栏菜单「Clean Code」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/整洁代码/整洁代码">整洁代码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/有意义的命名/有意义的命名">有意义的命名</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/函数/函数">函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释">注释</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/正则表达式Regex/正则表达式 Regex">正则表达式 Regex</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/Linux入门/Linux 入门">Linux 入门</a><button aria-label="打开/收起侧边栏菜单「Linux 入门」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/代码规范/代码规范">代码规范</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/虚拟化/虚拟化">虚拟化</a><button aria-label="打开/收起侧边栏菜单「虚拟化」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/基础入门/杂项常识/杂项常识">杂项常识</a><button aria-label="打开/收起侧边栏菜单「杂项常识」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed frontend_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/前端技术/前端技术">前端技术</a><button aria-label="打开/收起侧边栏菜单「前端技术」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed backend_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/后端技术/后端技术">后端技术</a><button aria-label="打开/收起侧边栏菜单「后端技术」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed devops_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/运营维护/运营维护">运营维护</a><button aria-label="打开/收起侧边栏菜单「运营维护」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed tools_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/开发工具/开发工具">开发工具</a><button aria-label="打开/收起侧边栏菜单「开发工具」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed advanced_sidebar"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cs-engineering/软件工程技能树/进阶技术/进阶技术">进阶技术</a><button aria-label="打开/收起侧边栏菜单「进阶技术」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cs-engineering/软件科研技能树/软件科研技能树">软件科研技能树</a><button aria-label="打开/收起侧边栏菜单「软件科研技能树」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cs-engineering/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/软件工程技能树"><span itemprop="name">软件工程技能树</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/基础入门/基础入门"><span itemprop="name">基础入门</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/基础入门/设计模式/设计模式"><span itemprop="name">设计模式</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/Clean Code"><span itemprop="name">Clean Code</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">注释</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>注释</h1><p>我们需要纠正一个误区：</p><p>注释并不是好的，注释是一种必须的恶，注释是用来弥补我们在用代码来表达意图时遇到的失败。</p><p>我们需要明确以下几点：</p><ul><li>注释会撒谎。代码在变动，但是注释并不总是随着代码变动，因此注释将会变得越来越不精确。注释存在的时间越久，就会越偏离其所描述的代码。因为程序员不能坚持在维护代码的同时维护注释。</li><li>不准确的注释比没有注释要坏的多。</li><li>只有代码才会告诉你真相，代码是唯一真正准确的信息来源。</li></ul><p>尽管有时也需要注释，但是我们也该多花心思尽量减少注释量。</p><h1>注释不能美化糟糕的代码</h1><div class="callout callout-bg-2 callout-border-2"><div class="callout-emoji">📌</div><p>“别给糟糕的代码加注释——重新写吧。”</p><p>——Brian W. Kernighan 与 P.J. Plaugher</p></div><p>写注释的常见动机是——你写了一段垃圾代码。然而与其花时间编写解释的注释，不如花时间改善一下代码质量。</p><h1>用代码来阐述</h1><p>许多人认为代码本身很难做好解释意图的工作，然而事实并非如此。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Check to see if the employee is eligible for full benefits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ((employee.flags &amp; HOURLY_FLAG) &amp;&amp; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (employee.age &gt; 65))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (employee.isEligibleForFullBenefits())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>很多时候用代码来阐述意图非常简单，简单到只需要创建一个适当的函数。</p><h1>好注释</h1><p>有些注释是必须的、有利的，但是真正好的做法是想办法不去写注释。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="法律信息">法律信息<a href="#法律信息" class="hash-link" aria-label="法律信息的直接链接" title="法律信息的直接链接">​</a></h2><p>有时，公司的代码规范要求编写与法律有关的注释。例如，版权与著作权声明就是必须和有理由在每一个源文件开头的写上注释。好在现在的IDE大都都会自动卷起这些注释，这样就不会显得凌乱了。</p><p>这些注释并不是整个license或者是整个细则。只要有可能，这些注释就应该指向一份标准许可或者其他外部文档，而不是把所有条款放到注释中。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="提供信息的注释">提供信息的注释<a href="#提供信息的注释" class="hash-link" aria-label="提供信息的注释的直接链接" title="提供信息的注释的直接链接">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// format matched kk:mm:ss EEE, MMM dd, yyyy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pattern timeMatcher = Pattern.compile(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段注释说明该正则表达式在匹配一个特定格式字符串格式化的时间和日期。当然如果把这段代码转移到某个转换日期时间格式的类中就更好了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="对意图的解释">对意图的解释<a href="#对意图的解释" class="hash-link" aria-label="对意图的解释的直接链接" title="对意图的解释的直接链接">​</a></h2><p>也许后来的人不同意你对这个问题提供的解决方案，但至少别人能知道你在干什么。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//This is our best attempt to get a race condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//by creating large number of threads</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; 25000; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="阐释">阐释<a href="#阐释" class="hash-link" aria-label="阐释的直接链接" title="阐释的直接链接">​</a></h2><p>有时我们需要把某些晦涩难懂的参数或者返回值（比如你返回了一个int作为状态码）翻译成某种可读的形式，这时候的注释也是有用的。当然更好的方法是尽量让参数或返回值本身就足够清楚。但是如果参数或返回值是某个标准库的一部分、或者你不能修改的代码，帮助阐释其含义的代码就很有用。</p><p><img loading="lazy" src="/cs-engineering/assets/images/TuvYbmNqfolyh0xTztCcH3Vonpc-3b58d74cc0c5cbaaa71611abf1572eb0.png" width="715" height="519" class="img_ev3q"></p><p>当然这也会冒<b>阐释性注释本身不准确</b>的风险，确认这个风险所消耗时间的代价也是巨大的。因此我们在写这类注释之前，需要考虑一下有没有更好的方法并小心确认阐释的正确性。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="警示">警示<a href="#警示" class="hash-link" aria-label="警示的直接链接" title="警示的直接链接">​</a></h2><p>用于警示其他程序员可能会出现某种后果的注释也是好注释。比如：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Don&#x27;t run unless you have some time to kill</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void _testWithReallyBigFile()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    writeLinesToFile(10000000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>还有一个更麻烦的例子：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public static SimpleDateFormat makeStandardHttpDateFormat(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //SimpleDateFormat is not thread safe,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //so we need to create each instance independently</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SimpleDateFormat df = new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    df.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return df;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>虽然我们有更好的方法来解决上方注释中提到的问题，但是这些注释的存在仍然很有意义——阻止一些人以提高效率的名义使用静态初始化。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="todo注释">TODO注释<a href="#todo注释" class="hash-link" aria-label="TODO注释的直接链接" title="TODO注释的直接链接">​</a></h2><p>TODO是一种我们认为应该做，但由于某些原因目前还没做的工作。它可能是：</p><ul><li>要删除某个不必要的特性</li><li>要求他人注意某个问题</li><li>恳请别人帮忙起个好名字</li><li>提示对依赖某个计划的事件的修改</li><li>.......</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//TODO-MdM these are not needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//we expect this to go away when we do the checkout model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected VersionInfo makeVersion() throws Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但是无论TODO的目的是什么，都不是在系统中留下垃圾代码的借口。</p><p>如今大多IDE都有针对TODO注释的优化，因此我们要注意定期查看代码，删除某些不必要的TODO。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="放大">放大<a href="#放大" class="hash-link" aria-label="放大的直接链接" title="放大的直接链接">​</a></h2><p>有时候注释会用来放大（提示）某种看来&quot;不合理&quot;的代码的重要性。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">String listItemContent = match.group(3).trim();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//the trim is real importent. It removes the starting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//spaces that could cause the item to be recognized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//as another list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new ListItemWidget(this, listItemContent, this.level + 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return buildList(text.substring(match.end()));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="公共api中的doc">公共API中的doc<a href="#公共api中的doc" class="hash-link" aria-label="公共API中的doc的直接链接" title="公共API中的doc的直接链接">​</a></h2><p>如果你在编写公共API，就该为它编写良好的doc。不过要注意其他有关注释的建议。就像其他注释一样，doc也有可能误导/不适用或者提供错误信息。</p><h1>坏注释</h1><p>大多数注释都属于坏注释。坏注释往往是糟糕代码的支撑或者借口，或者是对错误决策的修正，基本上等于程序员在自说自话。</p><p>不过我们这里讨论的坏注释基本都是指成品代码中的注释，如果你正在开发，码到一半，那一些奇怪的注释并不一定会带来副作用，只要记得在交付代码的时候删掉（美化、重构）就行了。正如之前说的那样，没人可以一次性写出完美的代码。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="喃喃自语">喃喃自语<a href="#喃喃自语" class="hash-link" aria-label="喃喃自语的直接链接" title="喃喃自语的直接链接">​</a></h2><p>写代码过程中因为写作时的需要而产生的注释是没有意义的（至少也要在写完代码之后删掉）。</p><p>我们来看一个例子，这个例子中的注释大概确实是有用的，但不多。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public void loadProperties()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String propertiesPath = propertiesLocation + &quot;/&quot; + PROPERTIES_FILE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileInputStream propertiesStream = new FileInputStream(propertiesPath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loadedProperties.load(propertiesStream);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch(IOException e)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //No properties files means all defaults are loaded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>catch代码中的代码（一句注释）虽然对于写代码时候的作者来说有意义，但是作为最终版本的代码而放在一个catch块中是不合格的。</p><p>很明显，如果出现了IOException，就表示没有属性文件，在这种情况下将会默认载入默认设置。而catch块留空暗中说明了try中的代码已经处理好了这种情况的发生。</p><p>然而这段注释完全没有展示出足够的信息，谁来装载默认设置？什么时候装载？是怎么装载的？是<code>loadProperties.load</code>捕获异常、装载配置还是其他怎么做？</p><p>或者说这段注释只是作者在安慰自己别在意catch代码块的留空。</p><p>还有更可怕的一种可能：作者想要告诉自己，将来再回过头来写装载默认设置的代码。（但是他TMD忘了）</p><p>这些都意味着读者需要查看系统中其他部分的代码才能弄清楚前因后果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="多余的注释">多余的注释<a href="#多余的注释" class="hash-link" aria-label="多余的注释的直接链接" title="多余的注释的直接链接">​</a></h2><p>对于简单清晰的函数，给函数写一段冗长的“总结”是没有意义的。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Utility method that returns when this.closed is true. Throws an exceptation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// if the timeout is reached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public synchronized void waitForClose(final long timeoutMillis)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">throws Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(!closed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wait(timeoutMillis);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(!closed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new Exception(&quot;MockResponseSender could not be closed&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段函数开头的注释完全是多余的，他完全不能比代码本身提供更多的信息。既没有证明代码的应以，也没有给出代码的意图或者逻辑，还不如代码精确，容易误导读者。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="误导性注释">误导性注释<a href="#误导性注释" class="hash-link" aria-label="误导性注释的直接链接" title="误导性注释的直接链接">​</a></h2><p>有时候你会觉得你写的注释没有问题，实际上别人理解起来的意思可不一定就是你所想的。</p><p>我们依旧拿这份代码为例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Utility method that returns when this.closed is true. Throws an exceptation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// if the timeout is reached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public synchronized void waitForClose(final long timeoutMillis)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">throws Exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(!closed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wait(timeoutMillis);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(!closed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new Exception(&quot;MockResponseSender could not be closed&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果我们仅看注释和函数名，我们很容易理解成：我们调用这个函数等待<code>this.close</code>为true，而当其转为true了的那个瞬间，这个函数将会返回。</p><p>然而事实并不是这样，这个函数在进入之后首先判断<code>this.close</code>是不是true，然后就是一个漫长的超时等待，即使在等待中间<code>this.true</code>了，这个函数也不会立即返回。必须等到wait结束了之后，这个函数才重新判断一下<code>this.close</code>，如果还是false，那就扔个Exception。</p><p>或许这份代码的作者在写的时候觉得自己的注释没有问题，但是对于别人来说完全就是另一个意思。这会导致另一个程序员快乐地调用了这个打包好的函数，希望用这个函数在<code>this.close</code>变为true之后立即返回，然后发现自己的代码运行地如此之慢，随后开始debug，花上N个小时最终发现是这里的注释他理解错了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="循规式注释">循规式注释<a href="#循规式注释" class="hash-link" aria-label="循规式注释的直接链接" title="循规式注释的直接链接">​</a></h2><p>所谓的每个函数都要有doc或者每个变量都要有注释的规矩是愚蠢的。这样只会让代码变得散漫，而考虑到注释的不准确性，整个代码文件的内容很容易变成满口胡言。</p><p><img loading="lazy" src="/cs-engineering/assets/images/VAqjba1zMo2f6mxofoIcAA0VnZL-168e4e73f07fd09fb93156d3c1738c8a.png" width="578" height="301" class="img_ev3q"></p><p>不要为了遵循一些愚蠢的规定而写废话。</p><p>当然并不是让你再也不写函数的doc和变量的注释，如果你这么理解了，则也从侧面证明了注释（文档）确实容易误导别人（因为你理解错了“循规式注释”这个章节的意思）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="日志式注释">日志式注释<a href="#日志式注释" class="hash-link" aria-label="日志式注释的直接链接" title="日志式注释的直接链接">​</a></h2><p>有些人在每次编辑代码的时候，在模块的开始处添加一条注释，这条注释就像是一种记录每次修改的日志。</p><p><img loading="lazy" src="/cs-engineering/assets/images/BMIQbrRLKoz7oCxGBq9cYZjRnxd-fd0a9a10f3cbeb9ac64970a2be5ffe3c.png" width="702" height="358" class="img_ev3q"></p><p>如果在很久以前，在模块开始处创建并维护这些记录还有道理。但是我们现在已经有版本控制工具可以使用了，这些注释应该删除。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="废话注释">废话注释<a href="#废话注释" class="hash-link" aria-label="废话注释的直接链接" title="废话注释的直接链接">​</a></h2><p>写废话注释是纯纯的小丑行为。</p><p><img loading="lazy" src="data:image/png;base64,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" width="290" height="114" class="img_ev3q"></p><p>还有这个</p><p><img loading="lazy" src="data:image/png;base64,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" width="296" height="58" class="img_ev3q"></p><p>以及非常经典的废话注释，建议搭配“循规式注释”食用。</p><p><img loading="lazy" src="/cs-engineering/assets/images/StRObKLnqoO7GXx3rQTcoCsbn3b-1f3d1abe9050758b411299ac7ea8d895.png" width="343" height="160" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="可怕的废话">可怕的废话<a href="#可怕的废话" class="hash-link" aria-label="可怕的废话的直接链接" title="可怕的废话的直接链接">​</a></h2><p>doc中也有废话。下列doc（来自某知名开源库）中就废话连篇，而且还包含一些复制粘贴上的错误。</p><p><img loading="lazy" src="/cs-engineering/assets/images/HCY6bR28boTiqBxLBfLcn7Mjn7b-a1cd80a724fa11d93b8d7a20ceb09323.png" width="269" height="216" class="img_ev3q"></p><p>这深受可怕“循规式注释”的荼毒。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="能用函数或变量时就别用注释">能用函数或变量时就别用注释<a href="#能用函数或变量时就别用注释" class="hash-link" aria-label="能用函数或变量时就别用注释的直接链接" title="能用函数或变量时就别用注释的直接链接">​</a></h2><p>如果你需要使用注释来表达某个表达式的意义的话，可以使用函数或者变量来代替。函数或者变量名可以起到同样的说明作用。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// does the module from the global list &lt;mod&gt; depend on the </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// subsystem we are part of? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (smodule.getDependSubsystems().contains(subSysMod.getSubSystem()))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>应该改成</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ArrayList moduleDependees = smodule.getDependSubsystems(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String ourSubSystem = subSysMod.getSubSystem(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (moduleDependees.contains(ourSubSystem))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="位置标记">位置标记<a href="#位置标记" class="hash-link" aria-label="位置标记的直接链接" title="位置标记的直接链接">​</a></h2><p>很多人喜欢在程序中标记某个特别的位置。比如：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Actions //////////////////////////////////</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在一些语言已经有自己的标记来代替这些自己创造的愚蠢注释标记（比如C#语言的伪代码——#region）。如果你用的编程语言有这种东西的话，就不要自己创造新的标记了。</p><p>如果位置标记不多，那么它的作用是显而易见的。但是一旦被滥用，这些东西就只是纯纯的背景噪音。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="括号后面的注释">括号后面的注释<a href="#括号后面的注释" class="hash-link" aria-label="括号后面的注释的直接链接" title="括号后面的注释的直接链接">​</a></h2><p>有些人喜欢在右括号后面跟上注释来标记这是谁的右括号。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class wc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String line;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int lineCount = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int charCount = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int wordCount = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while ((line = in.readLine()) != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lineCount++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                charCount += line.length();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String words[] = line.split(&quot;\\W&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                wordCount += words.length;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } //while</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;wordCount = &quot; + wordCount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;lineCount = &quot; + lineCount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;charCount = &quot; + charCount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } // try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        catch (IOException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.err.println(&quot;Error:&quot; + e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } //catch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } //main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些注释或许对于多层嵌套的长函数是有其意义的，但是我们的宗旨应当是写短小精悍、封装良好的函数。如果你发现你需要写这些注释来帮助理解多层嵌套的话，或许你更应该做的是缩短简化函数。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="归属和署名">归属和署名<a href="#归属和署名" class="hash-link" aria-label="归属和署名的直接链接" title="归属和署名的直接链接">​</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* Added by Br */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>版本控制工具是专业干这个的，你没有必要去抢它的活。</p><p>或许你会觉得这个注释大概有助于让别人知道应该和谁去讨论这段代码。但是事实上，这种注释只会在那儿放了一年又一年，变得越来越不精确，越来越和原作者毫无关系。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="注释掉的代码">注释掉的代码<a href="#注释掉的代码" class="hash-link" aria-label="注释掉的代码的直接链接" title="注释掉的代码的直接链接">​</a></h2><div class="callout callout-bg-2 callout-border-2"><div class="callout-emoji">❗</div><p><b>重申：我们这里讨论的坏注释基本都是指成品代码中的注释</b></p></div><p>直接把不要的代码注释掉而不清理是很烂的做法。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">InputStreamResponse response = new InputStreamResponse(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response.setBody(formatter.getResultStream(), formatter.getByteCount()); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// InputStream resultsStream = formatter.getResultStream(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// StreamReader reader = new StreamReader(resultsStream); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// response.setContent(reader.read(formatter.getByteCount()));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><b>其他人不敢删除你注释掉的代码！</b>他们会觉得这段代码放在这里，一定有其原因。<p>我们来看看一段来自Apache公共库的代码：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">this.bytePos = writeBytes(pngIdBytes, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//hdrPos = bytePos;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">writeHeader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">writeResolution();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//dataPos = bytePos;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (writeImageData()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    writeEnd();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.pngBytes = resizeByteArray(this.pngBytes, this.maxPos);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.pngBytes = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return this.pngBytes;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注释掉的两行代码在这里毫无意义，他并不会给未来的任何人起到任何作用，这很可能是多年前某个人注释掉并且忘记清理留下的产物。但是除了始作俑者，大家都不会去删除这两行注释代码。</p><p>在1960s的时候，注释掉代码可能会有用处。但是我们现在已经有了完善的版本控制工具，你可以放心把你迭代掉的老代码交给版本控制工具去记忆。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="html注释">HTML注释<a href="#html注释" class="hash-link" aria-label="HTML注释的直接链接" title="HTML注释的直接链接">​</a></h2><p>有些时候注释会被某些工具（比如Javadoc）抽出来放到网页上，那么这些注释中的HTML标签就应该是由工具来负责添加，而并不是程序员的工作。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/** </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Task to run fit tests.  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This task runs fitnesse tests and publishes the results. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;p/&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;pre&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Usage: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;taskdef name=&quot;execute-fitnesse-tests&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * classname=&quot;fitnesse.ant.ExecuteFitnesseTestsTask&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * classpathref=&quot;classpath&quot; /&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * OR </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;taskdef classpathref=&quot;classpath&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * resource=&quot;tasks.properties&quot; /&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;p/&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;execute-fitnesse-tests  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * suitepage=&quot;FitNesse.SuiteAcceptanceTests&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * fitnesseport=&quot;8082&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * resultsdir=&quot;${results.dir}&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * resultshtmlpage=&quot;fit-results.html&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * classpathref=&quot;classpath&quot; /&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;/pre&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="非本地信息">非本地信息<a href="#非本地信息" class="hash-link" aria-label="非本地信息的直接链接" title="非本地信息的直接链接">​</a></h2><p>如果你一定要写注释的话，确保你的注释描述了距离他最近的代码。</p><p>不要在本地代码中的注释中描述系统级别的信息。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Port on which fitnesse would run. Defaults to &lt;b&gt;8082&lt;/b&gt;. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @param fitnessePort </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setFitnessePort(int fitnessePort) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.fitnessePort = fitnessePort; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以上代码中的注释不仅带着冗余信息，还提及了默认端口的信息。然而这个函数本身根本没有控制这个所谓的默认值。这意味着这个注释没有在描述该函数，反而在描述项目中远在天边（可能在某个配置文件中）的其他函数。这意味着<b>我们无法确保在那个包含默认值的代码被修改后，这里的注释也会随之修改</b>！</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="信息过多">信息过多<a href="#信息过多" class="hash-link" aria-label="信息过多的直接链接" title="信息过多的直接链接">​</a></h2><p>不要在注释中添加一些有趣的历史话题或者一些奇怪的无关的细节描述。</p><p>因为这些东西对于读者来说除了增加阅读难度和浪费时间外毫无意义。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="不明显的联系">不明显的联系<a href="#不明显的联系" class="hash-link" aria-label="不明显的联系的直接链接" title="不明显的联系的直接链接">​</a></h2><p>注释和其描述的代码的联系应该显而易见，不要让读者对注释继续做阅读理解。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * start with an array that is big enough to hold all the pixels </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * (plus filter bytes), and an extra 200 bytes for header info </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> this.pngBytes = new byte[((this.width + 1) * this.height * 3) + 200];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比如上方这些注释，没人知道<code>filter bytes</code>是什么，和+1有关系吗，和*3有关系吗？或者和两者都有关？以及这个<code>extra 200</code>是什么？为什么非得是200？</p><p>这些注释完全没有解释清楚下方这段充满了硬编码的代码。若非有200这个数字的出现，甚至让人怀疑这两者之间的联系。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="函数头">函数头<a href="#函数头" class="hash-link" aria-label="函数头的直接链接" title="函数头的直接链接">​</a></h2><p>如果你写的是一个短函数，那么起一个好的函数名比写一段函数头注释要好得多。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="非公共代码中的doc">非公共代码中的doc<a href="#非公共代码中的doc" class="hash-link" aria-label="非公共代码中的doc的直接链接" title="非公共代码中的doc的直接链接">​</a></h2><p>虽然doc对于公共的API非常有用，但是对于不打算用作公共用途的代码就非常的令人厌恶了，而对于doc注释的额外形式要求（比如每个变量必须有注释说明是什么干什么的）等同于八股文。</p><h1>注释改进的案例</h1><p>接下来是一份代码重构的案例。这份代码是一个生成质数的函数。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="源代码">源代码<a href="#源代码" class="hash-link" aria-label="源代码的直接链接" title="源代码的直接链接">​</a></h2><div class="callout callout-bg-2 callout-border-2"><div class="callout-emoji">📌</div><p>该代码源于鲍勃大叔为XP Immersion课程编写的模块。他认为这个代码是糟糕代码和坏注释的典范。</p><p>比较有意思的是，曾经有一阵子，许多人都认为这份代码的注释和文档工作完成的非常的好。但是如今鲍勃大叔却认为这份代码是一小团乱麻。</p></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This class Generates prime numbers up to a user specified</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * maximum. The algorithm used is the Sieve of Eratosthenes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Eratosthenes of Cyrene, b. c. 276 BC, Cyrene, Libya --</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * d. c. 194, Alexandria. The first man to calculate the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * circumference of the Earth. Also known for working on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * calendars with leap years and ran the library at Alexandria.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * The algorithm is quite simple. Given an array of integers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * starting at 2. Cross out all multiples of 2. Find the next</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * uncrossed integer, and cross out all of its multiples.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Repeat untilyou have passed the square root of the maximum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author Alphonse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @version 13 Feb 2002 atp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class GeneratePrimes {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param maxValue is the generation limit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static int[] generatePrimes(int maxValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (maxValue &gt;= 2) // the only valid case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // declarations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int s = maxValue + 1; // size of array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean[] f = new boolean[s];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // initialize array to true.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (i = 0; i &lt; s; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                f[i] = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // get rid of known non-primes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            f[0] = f[1] = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // sieve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (i = 2; i &lt; Math.sqrt(s) + 1; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (f[i]) // if i is uncrossed, cross its multiples.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for (j = 2 * i; j &lt; s; j += i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        f[j] = false; // multiple is not prime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // how many primes are there?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (i = 0; i &lt; s; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (f[i])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    count++; // bump count.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int[] primes = new int[count];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // move the primes into the result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (i = 0, j = 0; i &lt; s; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (f[i]) // if prime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    primes[j++] = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return primes; // return the primes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else // maxValue &lt; 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new int[0]; // return null array if bad input.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重构后的代码">重构后的代码<a href="#重构后的代码" class="hash-link" aria-label="重构后的代码的直接链接" title="重构后的代码的直接链接">​</a></h2><p>重构后的代码中，注释的使用被明显地限制了。只有两处注释，而每一处注释都尽到了注释该尽的责任。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This class Generates prime numbers up to a user specified</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * maximum. The algorithm used is the Sieve of Eratosthenes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Given an array of integers starting at 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Find the first uncrossed integer, and cross out all its</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * multiples. Repeat until there are no more multiples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * in the array.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PrimeGenerator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static boolean[] crossedOut;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int[] result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static int[] generatePrimes(int maxValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (maxValue &lt; 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new int[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            uncrossIntegersUpTo(maxValue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            crossOutMultiples();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            putUncrossedIntegersIntoResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static void uncrossIntegersUpTo(int maxValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        crossedOut = new boolean[maxValue + 1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 2; i &lt; crossedOut.length; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            crossedOut[i] = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static void crossOutMultiples()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int limit = determineIterationLimit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 2; i &lt;= limit; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (notCrossed(i))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                crossOutMultiplesOf(i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int determineIterationLimit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Every multiple in the array has a prime factor that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // is less than or equal to the root of the array size,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // so we don&#x27;t have to cross out multiples of numbers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // larger than that root.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double iterationLimit = Math.sqrt(crossedOut.length);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (int) iterationLimit;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static void crossOutMultiplesOf(int i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int multiple = 2*i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             multiple &lt; crossedOut.length;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             multiple += i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            crossedOut[multiple] = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static boolean notCrossed(int i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return crossedOut[i] == false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static void putUncrossedIntegersIntoResult()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result = new int[numberOfUncrossedIntegers()];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int j = 0, i = 2; i &lt; crossedOut.length; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (notCrossed(i))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                result[j++] = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int numberOfUncrossedIntegers()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 2; i &lt; crossedOut.length; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (notCrossed(i))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                count++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="对两处注释的评价">对两处注释的评价<a href="#对两处注释的评价" class="hash-link" aria-label="对两处注释的评价的直接链接" title="对两处注释的评价的直接链接">​</a></h2><p>虽然重构后的第一处注释看起来是多余的，因为这个注释读起来就像是单纯地描述<code>generatePrimes</code>这个函数本身所干的事情，但是这段注释节省了读者去读具体算法的精力，因此鲍勃大叔倾向于保留这段注释。</p><p>第二段注释显然很有必要，它解释了平方根作为循环限制的理由，而且基本找不到能说明白这个事情的简单变量名或者其他编程结构。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/软件工程技能树/基础入门/设计模式/CleanCode/注释/注释.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cs-engineering/软件工程技能树/基础入门/设计模式/CleanCode/函数/函数"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">函数</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cs-engineering/软件工程技能树/基础入门/正则表达式Regex/正则表达式 Regex"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">正则表达式 Regex</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#法律信息" class="table-of-contents__link toc-highlight">法律信息</a></li><li><a href="#提供信息的注释" class="table-of-contents__link toc-highlight">提供信息的注释</a></li><li><a href="#对意图的解释" class="table-of-contents__link toc-highlight">对意图的解释</a></li><li><a href="#阐释" class="table-of-contents__link toc-highlight">阐释</a></li><li><a href="#警示" class="table-of-contents__link toc-highlight">警示</a></li><li><a href="#todo注释" class="table-of-contents__link toc-highlight">TODO注释</a></li><li><a href="#放大" class="table-of-contents__link toc-highlight">放大</a></li><li><a href="#公共api中的doc" class="table-of-contents__link toc-highlight">公共API中的doc</a></li><li><a href="#喃喃自语" class="table-of-contents__link toc-highlight">喃喃自语</a></li><li><a href="#多余的注释" class="table-of-contents__link toc-highlight">多余的注释</a></li><li><a href="#误导性注释" class="table-of-contents__link toc-highlight">误导性注释</a></li><li><a href="#循规式注释" class="table-of-contents__link toc-highlight">循规式注释</a></li><li><a href="#日志式注释" class="table-of-contents__link toc-highlight">日志式注释</a></li><li><a href="#废话注释" class="table-of-contents__link toc-highlight">废话注释</a></li><li><a href="#可怕的废话" class="table-of-contents__link toc-highlight">可怕的废话</a></li><li><a href="#能用函数或变量时就别用注释" class="table-of-contents__link toc-highlight">能用函数或变量时就别用注释</a></li><li><a href="#位置标记" class="table-of-contents__link toc-highlight">位置标记</a></li><li><a href="#括号后面的注释" class="table-of-contents__link toc-highlight">括号后面的注释</a></li><li><a href="#归属和署名" class="table-of-contents__link toc-highlight">归属和署名</a></li><li><a href="#注释掉的代码" class="table-of-contents__link toc-highlight">注释掉的代码</a></li><li><a href="#html注释" class="table-of-contents__link toc-highlight">HTML注释</a></li><li><a href="#非本地信息" class="table-of-contents__link toc-highlight">非本地信息</a></li><li><a href="#信息过多" class="table-of-contents__link toc-highlight">信息过多</a></li><li><a href="#不明显的联系" class="table-of-contents__link toc-highlight">不明显的联系</a></li><li><a href="#函数头" class="table-of-contents__link toc-highlight">函数头</a></li><li><a href="#非公共代码中的doc" class="table-of-contents__link toc-highlight">非公共代码中的doc</a></li><li><a href="#源代码" class="table-of-contents__link toc-highlight">源代码</a></li><li><a href="#重构后的代码" class="table-of-contents__link toc-highlight">重构后的代码</a></li><li><a href="#对两处注释的评价" class="table-of-contents__link toc-highlight">对两处注释的评价</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/docs/intro">Tutoria</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cs-engineering/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/zjuxlab/cs-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 浙江大学启真交叉学科创新创业实验室, Inc.</div></div></div></footer></div>
<script src="/cs-engineering/assets/js/runtime~main.3158629a.js"></script>
<script src="/cs-engineering/assets/js/main.c272b5bd.js"></script>
</body>
</html>